function _init(){"use strict";$.AdminLTE.layout={activate:function(){var e=this;e.fix(),e.fixSidebar(),$("body, html, .wrapper").css("height","auto"),$(window,".wrapper").resize(function(){e.fix(),e.fixSidebar()})},fix:function(){$(".layout-boxed > .wrapper").css("overflow","hidden");var e=$(".main-footer").outerHeight()||0,t=$(".main-header").outerHeight()+e,n=$(window).height(),i=$(".sidebar").height()||0;if($("body").hasClass("fixed"))$(".content-wrapper, .right-side").css("min-height",n-e);else{var a;n>=i?($(".content-wrapper, .right-side").css("min-height",n-t),a=n-t):($(".content-wrapper, .right-side").css("min-height",i),a=i);var r=$($.AdminLTE.options.controlSidebarOptions.selector);void 0!==r&&r.height()>a&&$(".content-wrapper, .right-side").css("min-height",r.height())}},fixSidebar:function(){if(!$("body").hasClass("fixed"))return void(void 0!==$.fn.slimScroll&&$(".sidebar").slimScroll({destroy:!0}).height("auto"));void 0===$.fn.slimScroll&&window.console&&window.console.error("Error: the fixed layout requires the slimscroll plugin!"),$.AdminLTE.options.sidebarSlimScroll&&void 0!==$.fn.slimScroll&&($(".sidebar").slimScroll({destroy:!0}).height("auto"),$(".sidebar").slimScroll({height:$(window).height()-$(".main-header").height()+"px",color:"rgba(0,0,0,0.2)",size:"3px"}))}},$.AdminLTE.pushMenu={activate:function(e){var t=$.AdminLTE.options.screenSizes;$(document).on("click",e,function(e){e.preventDefault(),$(window).width()>t.sm-1?$("body").hasClass("sidebar-collapse")?$("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu"):$("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").hasClass("sidebar-open")?$("body").removeClass("sidebar-open").removeClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").addClass("sidebar-open").trigger("expanded.pushMenu")}),$(".content-wrapper").click(function(){$(window).width()<=t.sm-1&&$("body").hasClass("sidebar-open")&&$("body").removeClass("sidebar-open")}),($.AdminLTE.options.sidebarExpandOnHover||$("body").hasClass("fixed")&&$("body").hasClass("sidebar-mini"))&&this.expandOnHover()},expandOnHover:function(){var e=this,t=$.AdminLTE.options.screenSizes.sm-1;$(".main-sidebar").hover(function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-collapse")&&$(window).width()>t&&e.expand()},function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-expanded-on-hover")&&$(window).width()>t&&e.collapse()})},expand:function(){$("body").removeClass("sidebar-collapse").addClass("sidebar-expanded-on-hover")},collapse:function(){$("body").hasClass("sidebar-expanded-on-hover")&&$("body").removeClass("sidebar-expanded-on-hover").addClass("sidebar-collapse")}},$.AdminLTE.tree=function(e){var t=this,n=$.AdminLTE.options.animationSpeed;$(document).off("click",e+" li a").on("click",e+" li a",function(e){var i=$(this),a=i.next();if(a.is(".treeview-menu")&&a.is(":visible")&&!$("body").hasClass("sidebar-collapse"))a.slideUp(n,function(){a.removeClass("menu-open")}),a.parent("li").removeClass("active");else if(a.is(".treeview-menu")&&!a.is(":visible")){var r=i.parents("ul").first(),o=r.find("ul:visible").slideUp(n);o.removeClass("menu-open");var s=i.parent("li");a.slideDown(n,function(){a.addClass("menu-open"),r.find("li.active").removeClass("active"),s.addClass("active"),t.layout.fix()})}a.is(".treeview-menu")&&e.preventDefault()})},$.AdminLTE.controlSidebar={activate:function(){var e=this,t=$.AdminLTE.options.controlSidebarOptions,n=$(t.selector);$(t.toggleBtnSelector).on("click",function(i){i.preventDefault(),n.hasClass("control-sidebar-open")||$("body").hasClass("control-sidebar-open")?e.close(n,t.slide):e.open(n,t.slide)});var i=$(".control-sidebar-bg");e._fix(i),$("body").hasClass("fixed")?e._fixForFixed(n):$(".content-wrapper, .right-side").height()<n.height()&&e._fixForContent(n)},open:function(e,t){t?e.addClass("control-sidebar-open"):$("body").addClass("control-sidebar-open")},close:function(e,t){t?e.removeClass("control-sidebar-open"):$("body").removeClass("control-sidebar-open")},_fix:function(e){var t=this;if($("body").hasClass("layout-boxed")){if(e.css("position","absolute"),e.height($(".wrapper").height()),t.hasBindedResize)return;$(window).resize(function(){t._fix(e)}),t.hasBindedResize=!0}else e.css({position:"fixed",height:"auto"})},_fixForFixed:function(e){e.css({position:"fixed","max-height":"100%",overflow:"auto","padding-bottom":"50px"})},_fixForContent:function(e){$(".content-wrapper, .right-side").css("min-height",e.height())}},$.AdminLTE.boxWidget={selectors:$.AdminLTE.options.boxWidgetOptions.boxWidgetSelectors,icons:$.AdminLTE.options.boxWidgetOptions.boxWidgetIcons,animationSpeed:$.AdminLTE.options.animationSpeed,activate:function(e){var t=this;e||(e=document),$(e).on("click",t.selectors.collapse,function(e){e.preventDefault(),t.collapse($(this))}),$(e).on("click",t.selectors.remove,function(e){e.preventDefault(),t.remove($(this))})},collapse:function(e){var t=this,n=e.parents(".box").first(),i=n.find("> .box-body, > .box-footer, > form  >.box-body, > form > .box-footer");n.hasClass("collapsed-box")?(e.children(":first").removeClass(t.icons.open).addClass(t.icons.collapse),i.slideDown(t.animationSpeed,function(){n.removeClass("collapsed-box")})):(e.children(":first").removeClass(t.icons.collapse).addClass(t.icons.open),i.slideUp(t.animationSpeed,function(){n.addClass("collapsed-box")}))},remove:function(e){e.parents(".box").first().slideUp(this.animationSpeed)}}}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?n=t:t={};var e,n,i;!function(t){function a(e,t){return w.call(e,t)}function r(e,t){var n,i,a,r,o,s,l,c,d,h,u,f=t&&t.split("/"),p=v.map,m=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),o=e.length-1,v.nodeIdCompat&&x.test(e[o])&&(e[o]=e[o].replace(x,"")),e=f.slice(0,f.length-1).concat(e),d=0;d<e.length;d+=1)if("."===(u=e[d]))e.splice(d,1),d-=1;else if(".."===u){if(1===d&&(".."===e[2]||".."===e[0]))break;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||m)&&p){for(n=e.split("/"),d=n.length;d>0;d-=1){if(i=n.slice(0,d).join("/"),f)for(h=f.length;h>0;h-=1)if((a=p[f.slice(0,h).join("/")])&&(a=a[i])){r=a,s=d;break}if(r)break;!l&&m&&m[i]&&(l=m[i],c=d)}!r&&l&&(r=l,s=c),r&&(n.splice(0,s,r),e=n.join("/"))}return e}function o(e,n){return function(){var i=C.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),f.apply(t,i.concat([e,n]))}}function s(e){return function(t){return r(t,e)}}function l(e){return function(t){g[e]=t}}function c(e){if(a(y,e)){var n=y[e];delete y[e],b[e]=!0,u.apply(t,n)}if(!a(g,e)&&!a(b,e))throw new Error("No "+e);return g[e]}function d(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function h(e){return function(){return v&&v.config&&v.config[e]||{}}}var u,f,p,m,g={},y={},v={},b={},w=Object.prototype.hasOwnProperty,C=[].slice,x=/\.js$/;p=function(e,t){var n,i=d(e),a=i[0];return e=i[1],a&&(a=r(a,t),n=c(a)),a?e=n&&n.normalize?n.normalize(e,s(t)):r(e,t):(e=r(e,t),i=d(e),a=i[0],e=i[1],a&&(n=c(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:n}},m={require:function(e){return o(e)},exports:function(e){var t=g[e];return void 0!==t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:h(e)}}},u=function(e,n,i,r){var s,d,h,u,f,v,w=[],C=typeof i;if(r=r||e,"undefined"===C||"function"===C){for(n=!n.length&&i.length?["require","exports","module"]:n,f=0;f<n.length;f+=1)if(u=p(n[f],r),"require"===(d=u.f))w[f]=m.require(e);else if("exports"===d)w[f]=m.exports(e),v=!0;else if("module"===d)s=w[f]=m.module(e);else if(a(g,d)||a(y,d)||a(b,d))w[f]=c(d);else{if(!u.p)throw new Error(e+" missing "+d);u.p.load(u.n,o(r,!0),l(d),{}),w[f]=g[d]}h=i?i.apply(g[e],w):void 0,e&&(s&&s.exports!==t&&s.exports!==g[e]?g[e]=s.exports:h===t&&v||(g[e]=h))}else e&&(g[e]=i)},e=n=f=function(e,n,i,a,r){if("string"==typeof e)return m[e]?m[e](n):c(p(e,n).f);if(!e.splice){if(v=e,v.deps&&f(v.deps,v.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=a,a=r),a?u(t,e,n,i):setTimeout(function(){u(t,e,n,i)},4),f},f.config=function(e){return f(e)},e._defined=g,i=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),a(g,e)||a(y,e)||(y[e]=[e,t,n])},i.amd={jQuery:!0}}(),t.requirejs=e,t.require=n,t.define=i}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error,t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,n=[];for(var i in t){"function"==typeof t[i]&&("constructor"!==i&&n.push(i))}return n}var n={};n.Extend=function(e,t){function n(){this.constructor=e}var i={}.hasOwnProperty;for(var a in t)i.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},n.Decorate=function(e,n){function i(){var t=Array.prototype.unshift,i=n.prototype.constructor.length,a=e.prototype.constructor;i>0&&(t.call(arguments,e.prototype.constructor),a=n.prototype.constructor),a.apply(this,arguments)}function a(){this.constructor=i}var r=t(n),o=t(e);n.displayName=e.displayName,i.prototype=new a;for(var s=0;s<o.length;s++){var l=o[s];i.prototype[l]=e.prototype[l]}for(var c=0;c<r.length;c++){var d=r[c];i.prototype[d]=function(e){var t=function(){};e in i.prototype&&(t=i.prototype[e]);var a=n.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),a.apply(this,arguments)}}(d)}return i};var i=function(){this.listeners={}};return i.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},i.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},n.Observable=i,n.generateChars=function(e){for(var t="",n=0;n<e;n++){t+=Math.floor(36*Math.random()).toString(36)}return t},n.bind=function(e,t){return function(){e.apply(t,arguments)}},n._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var a=0;a<n.length;a++){var r=n[a];r=r.substring(0,1).toLowerCase()+r.substring(1),r in i||(i[r]={}),a==n.length-1&&(i[r]=e[t]),i=i[r]}delete e[t]}}return e},n.hasScroll=function(t,n){var i=e(n),a=n.style.overflowX,r=n.style.overflowY;return(a!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===a||"scroll"===r||(i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth))},n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},n.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var i=e();e.map(n,function(e){i=i.add(e)}),n=i}t.append(n)},n}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),a=this.options.get("translations").get(t.message);i.append(n(a(t.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],a=this.option(i);t.push(a)}this.$results.append(t)},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var t=this;this.data.current(function(n){var i=e.map(n,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var t=e(this),n=e.data(this,"data"),a=""+n.id;null!=n.element&&n.element.selected||null==n.element&&e.inArray(a,i)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching"),n={disabled:!0,loading:!0,text:t(e)},i=this.option(n);i.className+=" loading-results",this.$results.prepend(i)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==t.id&&delete i["aria-selected"],null!=t._resultId&&(n.id=t._resultId),t.title&&(n.title=t.title),t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(var a in i){var r=i[a];n.setAttribute(a,r)}if(t.children){var o=e(n),s=document.createElement("strong");s.className="select2-results__group";e(s);this.template(t,s);for(var l=[],c=0;c<t.children.length;c++){var d=t.children[c],h=this.option(d);l.push(h)}var u=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});u.append(l),o.append(s),o.append(u)}else this.template(t,n);return e.data(n,"data",t),n},n.prototype.bind=function(t,n){var i=this,a=t.id+"-results";this.$results.attr("id",a),t.on("results:all",function(e){i.clear(),i.append(e.data),t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("results:append",function(e){i.append(e.data),t.isOpen()&&i.setClasses()}),t.on("query",function(e){i.hideMessages(),i.showLoading(e)}),t.on("select",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),t.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=i.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=i.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?i.trigger("close",{}):i.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e);if(0!==n){var a=n-1;0===e.length&&(a=0);var r=t.eq(a);r.trigger("mouseenter");var o=i.$results.offset().top,s=r.offset().top,l=i.$results.scrollTop()+(s-o);0===a?i.$results.scrollTop(0):s-o<0&&i.$results.scrollTop(l)}}),t.on("results:next",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e),a=n+1;if(!(a>=t.length)){var r=t.eq(a);r.trigger("mouseenter");var o=i.$results.offset().top+i.$results.outerHeight(!1),s=r.offset().top+r.outerHeight(!1),l=i.$results.scrollTop()+s-o;0===a?i.$results.scrollTop(0):s>o&&i.$results.scrollTop(l)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){i.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-t+e.deltaY,a=e.deltaY>0&&t-e.deltaY<=0,r=e.deltaY<0&&n<=i.$results.height();a?(i.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):r&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var n=e(this),a=n.data("data");if("true"===n.attr("aria-selected"))return void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:t,data:a}):i.trigger("close",{}));i.trigger("select",{originalEvent:t,data:a})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var n=e(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:n,element:e(this)})})},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]"),n=t.index(e),i=this.$results.offset().top,a=e.offset().top,r=this.$results.scrollTop()+(a-i),o=a-i;r-=2*e.outerHeight(!1),n<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(r)}},n.prototype.template=function(t,n){var i=this.options.get("templateResult"),a=this.options.get("escapeMarkup"),r=i(t,n);null==r?n.style.display="none":"string"==typeof r?n.innerHTML=a(r):e(n).append(r)},n}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},i.prototype.bind=function(e,t){var i=this,a=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",function(e){i.trigger("focus",e)}),this.$selection.on("blur",function(e){i._handleBlur(e)}),this.$selection.on("keydown",function(e){i.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){i.update(e.data)}),e.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",a),i._attachCloseHandler(e)}),e.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(e)}),e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),e.on("disable",function(){i.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(t){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)},1)},i.prototype._attachCloseHandler=function(t){e(document.body).on("mousedown.select2."+t.id,function(t){var n=e(t.target),i=n.closest(".select2");e(".select2.select2-container--open").each(function(){var t=e(this);this!=i[0]&&t.data("element").select2("close")})})},i.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,i){function a(){a.__super__.constructor.apply(this,arguments)}return n.Extend(a,t),a.prototype.render=function(){var e=a.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},a.prototype.bind=function(e,t){var n=this;a.__super__.bind.apply(this,arguments);var i=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("focus",function(t){e.isOpen()||n.$selection.focus()}),e.on("selection:update",function(e){n.update(e.data)})},a.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},a.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},a.prototype.selectionContainer=function(){return e("<span></span>")},a.prototype.update=function(e){if(0===e.length)return void this.clear();var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i),n.prop("title",t.title||t.text)},a}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function i(e,t){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(t,n){var a=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){a.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!a.options.get("disabled")){var n=e(this),i=n.parent(),r=i.data("data");a.trigger("unselect",{originalEvent:t,data:r})}})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var a=e[i],r=this.selectionContainer(),o=this.display(a,r);r.append(o),r.prop("title",a.title||a.text),r.data("data",a),t.push(r)}var s=this.$selection.find(".select2-selection__rendered");n.appendMany(s,t)}},i}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(t.length>1||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function n(){}return n.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error,this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),a=0;a<i.length;a++){var r={data:i[a]};if(this.trigger("unselect",r),r.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(e,n,i){i.isOpen()||n.which!=t.DELETE&&n.which!=t.BACKSPACE||this._handleClear(n)},n.prototype.update=function(t,n){if(t.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=e('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function i(e,t,n){e.call(this,t,n)}return i.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=t.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(e,t,i){var a=this;e.call(this,t,i),t.on("open",function(){a.$search.trigger("focus")}),t.on("close",function(){a.$search.val(""),a.$search.removeAttr("aria-activedescendant"),a.$search.trigger("focus")}),t.on("enable",function(){a.$search.prop("disabled",!1),a._transferTabIndex()}),t.on("disable",function(){a.$search.prop("disabled",!0)}),t.on("focus",function(e){a.$search.trigger("focus")}),t.on("results:focus",function(e){a.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){a.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){a._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),a.trigger("keypress",e),a._keyUpPrevented=e.isDefaultPrevented(),e.which===n.BACKSPACE&&""===a.$search.val()){var t=a.$searchContainer.prev(".select2-selection__choice");if(t.length>0){var i=t.data("data");a.searchRemoveChoice(i),e.preventDefault()}}});var r=document.documentMode,o=r&&r<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){if(o)return void a.$selection.off("input.search input.searchcheck");a.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(o&&"input"===e.type)return void a.$selection.off("input.search input.searchcheck");var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&a.handleSearch(e)})},i.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},i.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(""!==this.$search.attr("placeholder"))e=this.$selection.find(".select2-selection__rendered").innerWidth();else{e=.75*(this.$search.val().length+1)+"em"}this.$search.css("width",e)},i}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,i){var a=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting"],o=["opening","closing","selecting","unselecting"];t.call(this,n,i),n.on("*",function(t,n){if(-1!==e.inArray(t,r)){n=n||{};var i=e.Event("select2:"+t,{params:n});a.$element.trigger(i),-1!==e.inArray(t,o)&&(n.prevented=i.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var i=t(e);n._cache[e]=i}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U",
"Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}}),t.define("select2/data/base",["../utils"],function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var i=t.id+"-result-";return i+=e.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+e.generateChars(4),i},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var t=[],i=this;this.$element.find(":selected").each(function(){var e=n(this),a=i.item(e);t.push(a)}),e(t)},i.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var a=[];e=[e],e.push.apply(e,i);for(var r=0;r<e.length;r++){var o=e[r].id;-1===n.inArray(o,a)&&a.push(o)}t.$element.val(a),t.$element.trigger("change")});else{var i=e.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple")){if(e.selected=!1,n(e.element).is("option"))return e.element.selected=!1,void this.$element.trigger("change");this.current(function(i){for(var a=[],r=0;r<i.length;r++){var o=i[r].id;o!==e.id&&-1===n.inArray(o,a)&&a.push(o)}t.$element.val(a),t.$element.trigger("change")})}},i.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},i.prototype.query=function(e,t){var i=[],a=this;this.$element.children().each(function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var r=a.item(t),o=a.matches(e,r);null!==o&&i.push(o)}}),t({results:i})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):(t=document.createElement("option"),void 0!==t.textContent?t.textContent=e.text:t.innerText=e.text),e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var i=n(t),a=this._normalizeItem(e);return a.element=t,n.data(t,"data",a),i},i.prototype.item=function(e){var t={};if(null!=(t=n.data(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),a=[],r=0;r<i.length;r++){var o=n(i[r]),s=this.item(o);a.push(s)}t.children=a}return t=this._normalizeItem(t),t.element=e[0],n.data(e[0],"data",t),t},i.prototype._normalizeItem=function(e){n.isPlainObject(e)||(e={id:e,text:e}),e=n.extend({},{text:""},e);var t={selected:!1,disabled:!1};return null!=e.id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},t,e)},i.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},i}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(i,e),i.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),i.__super__.select.call(this,e)},i.prototype.convertToOptions=function(e){for(var i=this,a=this.$element.find("option"),r=a.map(function(){return i.item(n(this)).id}).get(),o=[],s=0;s<e.length;s++){var l=this._normalizeItem(e[s]);if(n.inArray(l.id,r)>=0){var c=a.filter(function(e){return function(){return n(this).val()==e.id}}(l)),d=this.item(c),h=n.extend(!0,{},l,d),u=this.option(h);c.replaceWith(u)}else{var f=this.option(l);if(l.children){var p=this.convertToOptions(l.children);t.appendMany(f,p)}o.push(f)}}return o},i}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,i){var a=n.ajax(e);return a.then(t),a.fail(i),a}};return n.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(e,t){function i(){var i=r.transport(r,function(i){var r=a.processResults(i,e);a.options.get("debug")&&window.console&&console.error&&(!r||!r.results||n.isArray(r.results)),t(r)},function(){i.status&&"0"===i.status||a.trigger("results:message",{message:"errorLoading"})});a._request=i}var a=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var r=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url.call(this.$element,e)),"function"==typeof r.data&&(r.data=r.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},i}),t.define("select2/data/tags",["jquery"],function(e){function t(t,n,i){var a=i.get("tags"),r=i.get("createTag");void 0!==r&&(this.createTag=r);var o=i.get("insertTag");if(void 0!==o&&(this.insertTag=o),t.call(this,n,i),e.isArray(a))for(var s=0;s<a.length;s++){var l=a[s],c=this._normalizeItem(l),d=this.option(c);this.$element.append(d)}}return t.prototype.query=function(e,t,n){function i(e,r){for(var o=e.results,s=0;s<o.length;s++){var l=o[s],c=null!=l.children&&!i({results:l.children},!0);if(l.text===t.term||c)return!r&&(e.data=o,void n(e))}if(r)return!0;var d=a.createTag(t);if(null!=d){var h=a.option(d);h.attr("data-select2-tag",!0),a.addOptions([h]),a.insertTag(o,d)}e.results=o,n(e)}var a=this;if(this._removeOldTags(),null==t.term||null!=t.page)return void e.call(this,t,n);e.call(this,t,i)},t.prototype.createTag=function(t,n){var i=e.trim(n.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,i){function a(t){var n=o._normalizeItem(t);if(!o.$element.find("option").filter(function(){return e(this).val()===n.id}).length){var i=o.option(n);i.attr("data-select2-tag",!0),o._removeOldTags(),o.addOptions([i])}r(n)}function r(e){o.trigger("select",{data:e})}var o=this;n.term=n.term||"";var s=this.tokenizer(n,this.options,a);s.term!==n.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.focus()),n.term=s.term),t.call(this,n,i)},t.prototype.tokenizer=function(t,n,i,a){for(var r=i.get("tokenSeparators")||[],o=n.term,s=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};s<o.length;){var c=o[s];if(-1!==e.inArray(c,r)){var d=o.substr(0,s),h=e.extend({},n,{term:d}),u=l(h);null!=u?(a(u),o=o.substr(s+1)||"",s=0):s++}else s++}return{term:o}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){if(t.term=t.term||"",t.term.length<this.minimumInputLength)return void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){if(t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength)return void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var i=this;this.current(function(a){var r=null!=a?a.length:0;if(i.maximumSelectionLength>0&&r>=i.maximumSelectionLength)return void i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}});e.call(i,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function n(){}return n.prototype.render=function(t){var n=t.call(this),i=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(t,n,i){var a=this;t.call(this,n,i),this.$search.on("keydown",function(e){a.trigger("keypress",e),a._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){a.handleSearch(e)}),n.on("open",function(){a.$search.attr("tabindex",0),a.$search.focus(),window.setTimeout(function(){a.$search.focus()},0)}),n.on("close",function(){a.$search.attr("tabindex",-1),a.$search.val("")}),n.on("focus",function(){n.isOpen()&&a.$search.focus()}),n.on("results:all",function(e){if(null==e.query.term||""===e.query.term){a.showSearch(e)?a.$searchContainer.removeClass("select2-search--hide"):a.$searchContainer.addClass("select2-search--hide")}})},n.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.showSearch=function(e,t){return!0},n}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;i>=0;i--){var a=t[i];this.placeholder.id===a.id&&n.splice(i,1)}return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,i){var a=this;t.call(this,n,i),n.on("query",function(e){a.lastParams=e,a.loading=!0}),n.on("query:append",function(e){a.lastParams=e,a.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,a.$loadingMore[0]);if(!a.loading&&t){a.$results.offset().top+a.$results.outerHeight(!1)+50>=a.$loadingMore.offset().top+a.$loadingMore.outerHeight(!1)&&a.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(t,n,i){this.$dropdownParent=i.get("dropdownParent")||e(document.body),t.call(this,n,i)}return n.prototype.bind=function(e,t,n){var i=this,a=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),a||(a=!0,t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),i=t.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var a=this,r="scroll.select2."+i.id,o="resize.select2."+i.id,s="orientationchange.select2."+i.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(r,function(t){var n=e(this).data("select2-scroll-position");e(this).scrollTop(n.y)}),e(window).on(r+" "+o+" "+s,function(e){a._positionDropdown(),a._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,i){var a="scroll.select2."+i.id,r="resize.select2."+i.id,o="orientationchange.select2."+i.id;this.$container.parents().filter(t.hasScroll).off(a),e(window).off(a+" "+r+" "+o)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),a=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=r.top,o.bottom=r.top+o.height;var s={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},c=l.top<r.top-s.height,d=l.bottom>r.bottom+s.height,h={left:r.left,top:o.bottom},u=this.$dropdownParent;"static"===u.css("position")&&(u=u.offsetParent());var f=u.offset();h.top-=f.top,h.left-=f.left,n||i||(a="below"),d||!c||n?!c&&d&&n&&(a="below"):a="above",("above"==a||n&&"below"!==a)&&(h.top=o.top-f.top-s.height),null!=a&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+a),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+a)),this.$dropdownContainer.css(h)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var n=0,i=0;i<t.length;i++){var a=t[i];a.children?n+=e(a.children):n++}return n}function t(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return t.prototype.showSearch=function(t,n){return!(e(n.data.results)<this.minimumResultsForSearch)&&t.call(this,n)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(e){i._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var a=i.data("data");null!=a.element&&a.element.selected||null==a.element&&a.selected||this.trigger("select",{data:a})}},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,i,a,r,o,s,l,c,d,h,u,f,p,m,g,y,v,b,w,C,x,k,S,D,_,T,E){function A(){this.reset()}return A.prototype.apply=function(h){if(h=e.extend(!0,{},this.defaults,h),null==h.dataAdapter){if(null!=h.ajax?h.dataAdapter=p:null!=h.data?h.dataAdapter=f:h.dataAdapter=u,h.minimumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,y)),h.maximumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,v)),h.maximumSelectionLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,b)),h.tags&&(h.dataAdapter=c.Decorate(h.dataAdapter,m)),null==h.tokenSeparators&&null==h.tokenizer||(h.dataAdapter=c.Decorate(h.dataAdapter,g)),null!=h.query){var E=t(h.amdBase+"compat/query");h.dataAdapter=c.Decorate(h.dataAdapter,E)}if(null!=h.initSelection){var A=t(h.amdBase+"compat/initSelection");h.dataAdapter=c.Decorate(h.dataAdapter,A)}}if(null==h.resultsAdapter&&(h.resultsAdapter=n,null!=h.ajax&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,k)),null!=h.placeholder&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,x)),h.selectOnClose&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,_))),null==h.dropdownAdapter){if(h.multiple)h.dropdownAdapter=w;else{var N=c.Decorate(w,C);h.dropdownAdapter=N}if(0!==h.minimumResultsForSearch&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,D)),h.closeOnSelect&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,T)),null!=h.dropdownCssClass||null!=h.dropdownCss||null!=h.adaptDropdownCssClass){var R=t(h.amdBase+"compat/dropdownCss");h.dropdownAdapter=c.Decorate(h.dropdownAdapter,R)}h.dropdownAdapter=c.Decorate(h.dropdownAdapter,S)}if(null==h.selectionAdapter){if(h.multiple?h.selectionAdapter=a:h.selectionAdapter=i,null!=h.placeholder&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,r)),h.allowClear&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,o)),h.multiple&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,s)),null!=h.containerCssClass||null!=h.containerCss||null!=h.adaptContainerCssClass){var I=t(h.amdBase+"compat/containerCss");h.selectionAdapter=c.Decorate(h.selectionAdapter,I)}h.selectionAdapter=c.Decorate(h.selectionAdapter,l)}if("string"==typeof h.language)if(h.language.indexOf("-")>0){var M=h.language.split("-"),L=M[0];h.language=[h.language,L]}else h.language=[h.language];if(e.isArray(h.language)){var P=new d;h.language.push("en");for(var O=h.language,H=0;H<O.length;H++){var $=O[H],B={};try{B=d.loadPath($)}catch(e){try{$=this.defaults.amdLanguageBase+$,B=d.loadPath($)}catch(e){h.debug&&window.console&&console.warn;continue}}P.extend(B)}h.translations=P}else{var j=d.loadPath(this.defaults.amdLanguageBase+"en"),F=new d(h.language);F.extend(j),h.translations=F}return h},A.prototype.reset=function(){function t(e){function t(e){return h[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function n(i,a){if(""===e.trim(i.term))return a;if(a.children&&a.children.length>0){for(var r=e.extend(!0,{},a),o=a.children.length-1;o>=0;o--){null==n(i,a.children[o])&&r.children.splice(o,1)}return r.children.length>0?r:n(i,r)}var s=t(a.text).toUpperCase(),l=t(i.term).toUpperCase();return s.indexOf(l)>-1?a:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:E,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},A.prototype.set=function(t,n){var i=e.camelCase(t),a={};a[i]=n;var r=c._convertData(a);e.extend(this.defaults,r)},new A}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,i){function a(t,a){if(this.options=t,null!=a&&this.fromElement(a),this.options=n.apply(this.options),a&&a.is("input")){var r=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,r)}}return a.prototype.fromElement=function(e){var n=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn,e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn,e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var a={};a=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var r=t.extend(!0,{},a);r=i._convertData(r);for(var o in r)t.inArray(o,n)>-1||(t.isPlainObject(this.options[o])?t.extend(this.options[o],r[o]):this.options[o]=r[o]);return this},a.prototype.get=function(e){return this.options[e]},a.prototype.set=function(e,t){this.options[e]=t},a}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,i){var a=function(e,n){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),n=n||{},this.options=new t(n,e),a.__super__.constructor.call(this);var i=e.attr("tabindex")||0;e.data("old-tabindex",i),e.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(e,this.options);var o=this.render();this._placeContainer(o);var s=this.options.get("selectionAdapter");this.selection=new s(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,o);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,o);var c=this.options.get("resultsAdapter");this.results=new c(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var d=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){d.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(a,n.Observable),a.prototype._generateId=function(e){var t="";return t=null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t},a.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},a.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var a=e.outerWidth(!1);return a<=0?"auto":a+"px"}if("style"==t){var r=e.attr("style");if("string"!=typeof r)return null;for(var o=r.split(";"),s=0,l=o.length;s<l;s+=1){var c=o[s].replace(/\s/g,""),d=c.match(n);if(null!==d&&d.length>=1)return d[1]}return null}return t},a.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},a.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){e.each(n,t._syncA),e.each(n,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},a.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},a.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(i,a){-1===e.inArray(i,n)&&t.trigger(i,a)})},a.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},a.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},a.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),
this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;e.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&t.altKey?(e.close(),t.preventDefault()):n===i.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===i.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===i.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===i.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},a.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},a.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&t.addedNodes.length>0)for(var a=0;a<t.addedNodes.length;a++){var r=t.addedNodes[a];r.selected&&(n=!0)}else t.removedNodes&&t.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},a.prototype.trigger=function(e,t){var n=a.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in i){var r=i[e],o={prevented:!1,name:e,args:t};if(n.call(this,r,o),o.prevented)return void(t.prevented=!0)}n.call(this,e,t)},a.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},a.prototype.open=function(){this.isOpen()||this.trigger("query",{})},a.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},a.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},a.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},a.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},a.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn,null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},a.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn;var e=[];return this.dataAdapter.current(function(t){e=t}),e},a.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn,null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},a.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},a.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},a}),t.define("select2/compat/utils",["jquery"],function(e){function t(t,n,i){var a,r,o=[];a=e.trim(t.attr("class")),a&&(a=""+a,e(a.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&o.push(this)})),a=e.trim(n.attr("class")),a&&(a=""+a,e(a.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(r=i(this))&&o.push(r)})),t.attr("class",o.join(" "))}return{syncCssClasses:t}}),t.define("select2/compat/containerCss",["jquery","./utils"],function(e,t){function n(e){return null}function i(){}return i.prototype.render=function(i){var a=i.call(this),r=this.options.get("containerCssClass")||"";e.isFunction(r)&&(r=r(this.$element));var o=this.options.get("adaptContainerCssClass");if(o=o||n,-1!==r.indexOf(":all:")){r=r.replace(":all:","");var s=o;o=function(e){var t=s(e);return null!=t?t+" "+e:e}}var l=this.options.get("containerCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(a,this.$element,o),a.css(l),a.addClass(r),a},i}),t.define("select2/compat/dropdownCss",["jquery","./utils"],function(e,t){function n(e){return null}function i(){}return i.prototype.render=function(i){var a=i.call(this),r=this.options.get("dropdownCssClass")||"";e.isFunction(r)&&(r=r(this.$element));var o=this.options.get("adaptDropdownCssClass");if(o=o||n,-1!==r.indexOf(":all:")){r=r.replace(":all:","");var s=o;o=function(e){var t=s(e);return null!=t?t+" "+e:e}}var l=this.options.get("dropdownCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(a,this.$element,o),a.css(l),a.addClass(r),a},i}),t.define("select2/compat/initSelection",["jquery"],function(e){function t(e,t,n){n.get("debug")&&window.console&&console.warn,this.initSelection=n.get("initSelection"),this._isInitialized=!1,e.call(this,t,n)}return t.prototype.current=function(t,n){var i=this;if(this._isInitialized)return void t.call(this,n);this.initSelection.call(null,this.$element,function(t){i._isInitialized=!0,e.isArray(t)||(t=[t]),n(t)})},t}),t.define("select2/compat/inputData",["jquery"],function(e){function t(e,t,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===t.prop("type")&&n.get("debug")&&console&&console.warn,e.call(this,t,n)}return t.prototype.current=function(t,n){function i(t,n){var a=[];return t.selected||-1!==e.inArray(t.id,n)?(t.selected=!0,a.push(t)):t.selected=!1,t.children&&a.push.apply(a,i(t.children,n)),a}for(var a=[],r=0;r<this._currentData.length;r++){var o=this._currentData[r];a.push.apply(a,i(o,this.$element.val().split(this._valueSeparator)))}n(a)},t.prototype.select=function(t,n){if(this.options.get("multiple")){var i=this.$element.val();i+=this._valueSeparator+n.id,this.$element.val(i),this.$element.trigger("change")}else this.current(function(t){e.map(t,function(e){e.selected=!1})}),this.$element.val(n.id),this.$element.trigger("change")},t.prototype.unselect=function(e,t){var n=this;t.selected=!1,this.current(function(e){for(var i=[],a=0;a<e.length;a++){var r=e[a];t.id!=r.id&&i.push(r.id)}n.$element.val(i.join(n._valueSeparator)),n.$element.trigger("change")})},t.prototype.query=function(e,t,n){for(var i=[],a=0;a<this._currentData.length;a++){var r=this._currentData[a],o=this.matches(t,r);null!==o&&i.push(o)}n({results:i})},t.prototype.addOptions=function(t,n){var i=e.map(n,function(t){return e.data(t[0],"data")});this._currentData.push.apply(this._currentData,i)},t}),t.define("select2/compat/matcher",["jquery"],function(e){function t(t){function n(n,i){var a=e.extend(!0,{},i);if(null==n.term||""===e.trim(n.term))return a;if(i.children){for(var r=i.children.length-1;r>=0;r--){var o=i.children[r];t(n.term,o.text,o)||a.children.splice(r,1)}if(a.children.length>0)return a}return t(n.term,i.text,i)?a:null}return n}return t}),t.define("select2/compat/query",[],function(){function e(e,t,n){n.get("debug")&&window.console&&console.warn,e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.callback=n,this.options.get("query").call(null,t)},e}),t.define("select2/dropdown/attachContainer",[],function(){function e(e,t,n){e.call(this,t,n)}return e.prototype.position=function(e,t,n){n.find(".dropdown-wrapper").append(t),t.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},e}),t.define("select2/dropdown/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);var i=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(i.join(" "),function(e){e.stopPropagation()})},e}),t.define("select2/selection/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);var i=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(i.join(" "),function(e){e.stopPropagation()})},e}),function(n){"function"==typeof t.define&&t.define.amd?t.define("jquery-mousewheel",["jquery"],n):"object"==typeof exports?module.exports=n:n(e)}(function(e){function t(t){var o=t||window.event,s=l.call(arguments,1),c=0,h=0,u=0,f=0,p=0,m=0;if(t=e.event.fix(o),t.type="mousewheel","detail"in o&&(u=-1*o.detail),"wheelDelta"in o&&(u=o.wheelDelta),"wheelDeltaY"in o&&(u=o.wheelDeltaY),"wheelDeltaX"in o&&(h=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(h=-1*u,u=0),c=0===u?h:u,"deltaY"in o&&(u=-1*o.deltaY,c=u),"deltaX"in o&&(h=o.deltaX,0===u&&(c=-1*h)),0!==u||0!==h){if(1===o.deltaMode){var g=e.data(this,"mousewheel-line-height");c*=g,u*=g,h*=g}else if(2===o.deltaMode){var y=e.data(this,"mousewheel-page-height");c*=y,u*=y,h*=y}if(f=Math.max(Math.abs(u),Math.abs(h)),(!r||f<r)&&(r=f,i(o,f)&&(r/=40)),i(o,f)&&(c/=40,h/=40,u/=40),c=Math[c>=1?"floor":"ceil"](c/r),h=Math[h>=1?"floor":"ceil"](h/r),u=Math[u>=1?"floor":"ceil"](u/r),d.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();p=t.clientX-v.left,m=t.clientY-v.top}return t.deltaX=h,t.deltaY=u,t.deltaFactor=r,t.offsetX=p,t.offsetY=m,t.deltaMode=0,s.unshift(t,c,h,u),a&&clearTimeout(a),a=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){r=null}function i(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var a,r,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var c=o.length;c;)e.event.fixHooks[o[--c]]=e.event.mouseHooks;var d=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",d.getLineHeight(this)),e.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,n,i){if(null==e.fn.select2){var a=["open","close","destroy"];e.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var i=e.extend(!0,{},t);new n(e(this),i)}),this;if("string"==typeof t){var i,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this).data("select2");null==n&&window.console&&console.error,i=n[t].apply(n,r)}),e.inArray(t,a)>-1?this:i}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=i),n}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n}),function(e){function t(e){var t=document.createElement("input"),e="on"+e,n=e in t;return n||(t.setAttribute(e,"return;"),n="function"==typeof t[e]),t=null,n}function n(t,i,a){var r=a.aliases[t];return!!r&&(r.alias&&n(r.alias,void 0,a),e.extend(!0,a,r),e.extend(!0,a,i),!0)}function i(t){function n(n){t.numericInput&&(n=n.split("").reverse().join(""));var i=!1,a=0,r=t.greedy,o=t.repeat;"*"==o&&(r=!1),1==n.length&&0==r&&0!=o&&(t.placeholder="");for(var s=e.map(n.split(""),function(e,n){var r=[];if(e==t.escapeChar)i=!0;else if(e!=t.optionalmarker.start&&e!=t.optionalmarker.end||i){var o=t.definitions[e];if(o&&!i)for(var s=0;s<o.cardinality;s++)r.push(t.placeholder.charAt((a+s)%t.placeholder.length));else r.push(e),i=!1;return a+=r.length,r}}),l=s.slice(),c=1;c<o&&r;c++)l=l.concat(s.slice());return{mask:l,repeat:o,greedy:r}}function i(n){t.numericInput&&(n=n.split("").reverse().join(""));var i=!1,a=!1,r=!1;return e.map(n.split(""),function(e,n){var o=[];if(e==t.escapeChar)a=!0;else if(e!=t.optionalmarker.start||a){if(e!=t.optionalmarker.end||a){var s=t.definitions[e];if(s&&!a){for(var l=s.prevalidator,c=l?l.length:0,d=1;d<s.cardinality;d++){var h=c>=d?l[d-1]:[],u=h.validator,f=h.cardinality;o.push({fn:u?"string"==typeof u?new RegExp(u):new function(){this.test=u}:new RegExp("."),cardinality:f||1,optionality:i,newBlockMarker:1==i&&r,offset:0,casing:s.casing,def:s.definitionSymbol||e}),1==i&&(r=!1)}o.push({fn:s.validator?"string"==typeof s.validator?new RegExp(s.validator):new function(){this.test=s.validator}:new RegExp("."),cardinality:s.cardinality,optionality:i,newBlockMarker:r,offset:0,casing:s.casing,def:s.definitionSymbol||e})}else o.push({fn:null,cardinality:0,optionality:i,newBlockMarker:r,offset:0,casing:null,def:e}),a=!1;return r=!1,o}i=!1,r=!0}else i=!0,r=!0})}function a(e){return t.optionalmarker.start+e+t.optionalmarker.end}function r(e){for(var n=0,i=0,a=e.length,r=0;r<a&&(e.charAt(r)==t.optionalmarker.start&&n++,e.charAt(r)==t.optionalmarker.end&&i++,!(n>0&&n==i));r++);var o=[e.substring(0,r)];return r<a&&o.push(e.substring(r+1,a)),o}function o(e){for(var n=e.length,i=0;i<n&&e.charAt(i)!=t.optionalmarker.start;i++);var a=[e.substring(0,i)];return i<n&&a.push(e.substring(i+1,n)),a}function s(t,d,h){var u,f,p=r(d),m=o(p[0]);m.length>1?(u=t+m[0]+a(m[1])+(p.length>1?p[1]:""),-1==e.inArray(u,c)&&""!=u&&(c.push(u),f=n(u),l.push({mask:u,_buffer:f.mask,buffer:f.mask.slice(),tests:i(u),lastValidPosition:-1,greedy:f.greedy,repeat:f.repeat,metadata:h})),u=t+m[0]+(p.length>1?p[1]:""),-1==e.inArray(u,c)&&""!=u&&(c.push(u),f=n(u),l.push({mask:u,_buffer:f.mask,buffer:f.mask.slice(),tests:i(u),lastValidPosition:-1,greedy:f.greedy,repeat:f.repeat,metadata:h})),o(m[1]).length>1&&s(t+m[0],m[1]+p[1],h),p.length>1&&o(p[1]).length>1&&(s(t+m[0]+a(m[1]),p[1],h),s(t+m[0],p[1],h))):(u=t+p,-1==e.inArray(u,c)&&""!=u&&(c.push(u),f=n(u),l.push({mask:u,_buffer:f.mask,buffer:f.mask.slice(),tests:i(u),lastValidPosition:-1,greedy:f.greedy,repeat:f.repeat,metadata:h})))}var l=[],c=[];return e.isFunction(t.mask)&&(t.mask=t.mask.call(this,t)),e.isArray(t.mask)?e.each(t.mask,function(e,t){void 0!=t.mask?s("",t.mask.toString(),t):s("",t.toString())}):s("",t.mask.toString()),t.greedy?l:l.sort(function(e,t){return e.mask.length-t.mask.length})}function a(t,n,i,a){function d(){return t[n]}function h(){return d().tests}function u(){return d()._buffer}function f(){return d().buffer}function p(a,r,o){function s(e,t,n,a){for(var r=y(e),o=n?1:0,s="",l=t.buffer,c=t.tests[r].cardinality;c>o;c--)s+=x(l,r-(c-1));return n&&(s+=n),null!=t.tests[r].fn?t.tests[r].fn.test(s,l,e,a,i):(n==x(t._buffer,e,!0)||n==i.skipOptionalPartCharacter)&&{refresh:!0,c:x(t._buffer,e,!0),pos:e}}if(o=!0===o){var l=s(a,d(),r,o);return!0===l&&(l={pos:a}),l}var c=[],l=!1,h=n,u=f().slice(),p=d().lastValidPosition,m=(w(a),[]);return e.each(t,function(e,t){if("object"==typeof t){n=e;var i,y=a,w=d().lastValidPosition;if(w==p){if(y-p>1)for(var x=-1==w?0:w;x<y&&!1!==(i=s(x,d(),u[x],!0));x++){C(f(),x,u[x],!0),!0===i&&(i={pos:x});var k=i.pos||x;d().lastValidPosition<k&&(d().lastValidPosition=k)}if(!g(y)&&!s(y,d(),r,o)){for(var S=b(y)-y,D=0;D<S&&!1===s(++y,d(),r,o);D++);m.push(n)}}if((d().lastValidPosition>=p||n==h)&&y>=0&&y<v()){if(!1!==(l=s(y,d(),r,o))){!0===l&&(l={pos:y});var k=l.pos||y;d().lastValidPosition<k&&(d().lastValidPosition=k)}c.push({activeMasksetIndex:e,result:l})}}}),n=h,function(n,i){var o=!1;if(e.each(i,function(t,i){if(o=-1==e.inArray(i.activeMasksetIndex,n)&&!1!==i.result)return!1}),o)i=e.map(i,function(i,a){if(-1==e.inArray(i.activeMasksetIndex,n))return i;t[i.activeMasksetIndex].lastValidPosition=p});else{var l,c=-1,d=-1;e.each(i,function(t,i){-1!=e.inArray(i.activeMasksetIndex,n)&&!1!==i.result&(-1==c||c>i.result.pos)&&(c=i.result.pos,d=i.activeMasksetIndex)}),i=e.map(i,function(i,o){if(-1!=e.inArray(i.activeMasksetIndex,n)){if(i.result.pos==c)return i;if(!1!==i.result){for(var h=a;h<c;h++){if(!1===(l=s(h,t[i.activeMasksetIndex],t[d].buffer[h],!0))){t[i.activeMasksetIndex].lastValidPosition=c-1;break}C(t[i.activeMasksetIndex].buffer,h,t[d].buffer[h],!0),t[i.activeMasksetIndex].lastValidPosition=h}return l=s(c,t[i.activeMasksetIndex],r,!0),!1!==l&&(C(t[i.activeMasksetIndex].buffer,c,r,!0),t[i.activeMasksetIndex].lastValidPosition=c),i}}})}return i}(m,c)}function m(){var i=n,a={activeMasksetIndex:0,lastValidPosition:-1,next:-1};e.each(t,function(e,t){"object"==typeof t&&(n=e,d().lastValidPosition>a.lastValidPosition?(a.activeMasksetIndex=e,a.lastValidPosition=d().lastValidPosition,a.next=b(d().lastValidPosition)):d().lastValidPosition==a.lastValidPosition&&(-1==a.next||a.next>b(d().lastValidPosition))&&(a.activeMasksetIndex=e,a.lastValidPosition=d().lastValidPosition,a.next=b(d().lastValidPosition)))}),n=-1!=a.lastValidPosition&&t[i].lastValidPosition==a.lastValidPosition?i:a.activeMasksetIndex,i!=n&&(D(f(),b(a.lastValidPosition),v()),d().writeOutBuffer=!0),q.data("_inputmask").activeMasksetIndex=n}function g(e){var t=y(e),n=h()[t];return void 0!=n&&n.fn}function y(e){return e%h().length}function v(){return i.getMaskLength(u(),d().greedy,d().repeat,f(),i)}function b(e){var t=v();if(e>=t)return t;for(var n=e;++n<t&&!g(n););return n}function w(e){var t=e;if(t<=0)return 0;for(;--t>0&&!g(t););return t}function C(e,t,n,i){i&&(t=k(e,t));var a=h()[y(t)],r=n;if(void 0!=r&&void 0!=a)switch(a.casing){case"upper":r=n.toUpperCase();break;case"lower":r=n.toLowerCase()}e[t]=r}function x(e,t,n){return n&&(t=k(e,t)),e[t]}function k(e,t){for(var n;void 0==e[t]&&e.length<v();)for(n=0;void 0!==u()[n];)e.push(u()[n++]);return t}function S(e,t,n){e._valueSet(t.join("")),void 0!=n&&M(e,n)}function D(e,t,n,i){for(var a=t,r=v();a<n&&a<r;a++)!0===i?g(a)||C(e,a,""):C(e,a,x(u().slice(),a,!0))}function _(e,t){var n=y(t);C(e,t,x(u(),n))}function T(e){return i.placeholder.charAt(e%i.placeholder.length)}function E(i,a,r,o,s){var l=void 0!=o?o.slice():N(i._valueGet()).split("");e.each(t,function(e,t){"object"==typeof t&&(t.buffer=t._buffer.slice(),t.lastValidPosition=-1,t.p=-1)}),!0!==r&&(n=0),a&&i._valueSet("");v();e.each(l,function(t,n){if(!0===s){var o=d().p,l=-1==o?o:w(o),c=-1==l?t:b(l);-1==e.inArray(n,u().slice(l+1,c))&&U.call(i,void 0,!0,n.charCodeAt(0),a,r,t)}else U.call(i,void 0,!0,n.charCodeAt(0),a,r,t)}),!0===r&&-1!=d().p&&(d().lastValidPosition=w(d().p))}function A(t){return e.inputmask.escapeRegex.call(this,t)}function N(e){return e.replace(new RegExp("("+A(u().join(""))+")*$"),"")}function R(e){for(var t,n,i=f(),a=i.slice(),n=a.length-1;n>=0;n--){var t=y(n);if(!h()[t].optionality)break;if(g(n)&&p(n,i[n],!0))break;a.pop()}S(e,a)}function I(e){if(z&&"number"==typeof e&&(!i.greedy||""!=i.placeholder)){e=f().length-e}return e}function M(t,n,a){var r,o=t.jquery&&t.length>0?t[0]:t;if("number"!=typeof n)return e(t).is(":visible")?(o.setSelectionRange?(n=o.selectionStart,a=o.selectionEnd):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),n=0-r.duplicate().moveStart("character",-1e5),a=n+r.text.length),n=I(n),a=I(a),{begin:n,end:a}):{begin:0,end:0};n=I(n),a=I(a),e(t).is(":visible")&&(a="number"==typeof a?a:n,o.scrollLeft=o.scrollWidth,0==i.insertMode&&n==a&&a++,o.setSelectionRange?(o.selectionStart=n,o.selectionEnd=s?n:a):o.createTextRange&&(r=o.createTextRange(),r.collapse(!0),r.moveEnd("character",a),r.moveStart("character",n),r.select()))}function L(a){if("*"!=i.repeat){var r=!1,o=0,s=n;return e.each(t,function(e,t){if("object"==typeof t){n=e;var i=w(v());if(t.lastValidPosition>=o&&t.lastValidPosition==i){for(var s=!0,l=0;l<=i;l++){var c=g(l),d=y(l);if(c&&(void 0==a[l]||a[l]==T(l))||!c&&a[l]!=u()[d]){s=!1;break}}if(r=r||s)return!1}o=t.lastValidPosition}}),n=s,r}}function P(e,t){return z?e-t>1||e-t==1&&i.insertMode:t-e>1||t-e==1&&i.insertMode}function O(t){var n=e._data(t).events;e.each(n,function(t,n){e.each(n,function(e,t){if("inputmask"==t.namespace&&"setvalue"!=t.type){var n=t.handler;t.handler=function(e){if(!this.readOnly&&!this.disabled)return n.apply(this,arguments);e.preventDefault}}})})}function H(t){var n;if(Object.getOwnPropertyDescriptor&&(n=Object.getOwnPropertyDescriptor(t,"value")),n&&n.get){if(!t._valueGet){var i=n.get,a=n.set;t._valueGet=function(){return z?i.call(this).split("").reverse().join(""):i.call(this)},t._valueSet=function(e){a.call(this,z?e.split("").reverse().join(""):e)},Object.defineProperty(t,"value",{get:function(){var t=e(this),n=e(this).data("_inputmask"),a=n.masksets,r=n.activeMasksetIndex;return n&&n.opts.autoUnmask?t.inputmask("unmaskedvalue"):i.call(this)!=a[r]._buffer.join("")?i.call(this):""},set:function(t){a.call(this,t),e(this).triggerHandler("setvalue.inputmask")}})}}else if(document.__lookupGetter__&&t.__lookupGetter__("value")){if(!t._valueGet){var i=t.__lookupGetter__("value"),a=t.__lookupSetter__("value");t._valueGet=function(){return z?i.call(this).split("").reverse().join(""):i.call(this)},t._valueSet=function(e){a.call(this,z?e.split("").reverse().join(""):e)},t.__defineGetter__("value",function(){var t=e(this),n=e(this).data("_inputmask"),a=n.masksets,r=n.activeMasksetIndex;return n&&n.opts.autoUnmask?t.inputmask("unmaskedvalue"):i.call(this)!=a[r]._buffer.join("")?i.call(this):""}),t.__defineSetter__("value",function(t){a.call(this,t),e(this).triggerHandler("setvalue.inputmask")})}}else if(t._valueGet||(t._valueGet=function(){return z?this.value.split("").reverse().join(""):this.value},t._valueSet=function(e){this.value=z?e.split("").reverse().join(""):e}),void 0==e.valHooks.text||1!=e.valHooks.text.inputmaskpatch){var i=e.valHooks.text&&e.valHooks.text.get?e.valHooks.text.get:function(e){return e.value},a=e.valHooks.text&&e.valHooks.text.set?e.valHooks.text.set:function(e,t){return e.value=t,e};jQuery.extend(e.valHooks,{text:{get:function(t){var n=e(t);if(n.data("_inputmask")){if(n.data("_inputmask").opts.autoUnmask)return n.inputmask("unmaskedvalue");var a=i(t),r=n.data("_inputmask");return a!=r.masksets[r.activeMasksetIndex]._buffer.join("")?a:""}return i(t)},set:function(t,n){var i=e(t),r=a(t,n);return i.data("_inputmask")&&i.triggerHandler("setvalue.inputmask"),r},inputmaskpatch:!0}})}}function $(e,t,n,i){var a=f();if(!1!==i)for(;!g(e)&&e-1>=0;)e--;for(var r=e;r<t&&r<v();r++)if(g(r)){_(a,r);var o=b(r),s=x(a,o);if(s!=T(o))if(o<v()&&!1!==p(r,s,!0)&&h()[y(r)].def==h()[y(o)].def)C(a,r,s,!0);else if(g(r))break}else _(a,r);if(void 0!=n&&C(a,w(t),n),0==d().greedy){var l=N(a.join("")).split("");a.length=l.length;for(var r=0,c=a.length;r<c;r++)a[r]=l[r];0==a.length&&(d().buffer=u().slice())}return e}function B(e,t,n){var i=f();if(x(i,e,!0)!=T(e))for(var a=w(t);a>e&&a>=0;a--)if(g(a)){var r=w(a),o=x(i,r);o!=T(r)&&!1!==p(r,o,!0)&&h()[y(a)].def==h()[y(r)].def&&(C(i,a,o,!0),_(i,r))}else _(i,a);void 0!=n&&x(i,e)==T(e)&&C(i,e,n);var s=i.length;if(0==d().greedy){var l=N(i.join("")).split("");i.length=l.length;for(var a=0,c=i.length;a<c;a++)i[a]=l[a];0==i.length&&(d().buffer=u().slice())}return t-(s-i.length)}function j(e,n,a){if(i.numericInput||z){switch(n){case i.keyCode.BACKSPACE:n=i.keyCode.DELETE;break;case i.keyCode.DELETE:n=i.keyCode.BACKSPACE}if(z){var r=a.end;a.end=a.begin,a.begin=r}}var o=!0;if(a.begin==a.end){var s=n==i.keyCode.BACKSPACE?a.begin-1:a.begin;i.isNumeric&&""!=i.radixPoint&&f()[s]==i.radixPoint&&(a.begin=f().length-1==s?a.begin:n==i.keyCode.BACKSPACE?s:b(s),a.end=a.begin),o=!1,n==i.keyCode.BACKSPACE?a.begin--:n==i.keyCode.DELETE&&a.end++}else a.end-a.begin!=1||i.insertMode||(o=!1,n==i.keyCode.BACKSPACE&&a.begin--);D(f(),a.begin,a.end);var l=v();if(0==i.greedy)$(a.begin,l,void 0,!z&&n==i.keyCode.BACKSPACE&&!o);else{for(var c=a.begin,h=a.begin;h<a.end;h++)!g(h)&&o||(c=$(a.begin,l,void 0,!z&&n==i.keyCode.BACKSPACE&&!o));o||(a.begin=c)}var u=b(-1);D(f(),a.begin,a.end,!0),E(e,!1,void 0==t[1]||u>=a.end,f()),d().lastValidPosition<u?(d().lastValidPosition=-1,d().p=u):d().p=a.begin}function F(t){K=!1;var n=this,a=e(n),r=t.keyCode,s=M(n);r==i.keyCode.BACKSPACE||r==i.keyCode.DELETE||o&&127==r||t.ctrlKey&&88==r?(t.preventDefault(),88==r&&(G=f().join("")),j(n,r,s),m(),S(n,f(),d().p),n._valueGet()==u().join("")&&a.trigger("cleared"),i.showTooltip&&a.prop("title",d().mask)):r==i.keyCode.END||r==i.keyCode.PAGE_DOWN?setTimeout(function(){var e=b(d().lastValidPosition);i.insertMode||e!=v()||t.shiftKey||e--,M(n,t.shiftKey?s.begin:e,e)},0):r==i.keyCode.HOME&&!t.shiftKey||r==i.keyCode.PAGE_UP?M(n,0,t.shiftKey?s.begin:0):r==i.keyCode.ESCAPE||90==r&&t.ctrlKey?(E(n,!0,!1,G.split("")),a.click()):r!=i.keyCode.INSERT||t.shiftKey||t.ctrlKey?0!=i.insertMode||t.shiftKey||(r==i.keyCode.RIGHT?setTimeout(function(){var e=M(n);M(n,e.begin)},0):r==i.keyCode.LEFT&&setTimeout(function(){var e=M(n);M(n,e.begin-1)},0)):(i.insertMode=!i.insertMode,M(n,i.insertMode||s.begin!=v()?s.begin:s.begin-1));var l=M(n);!0===i.onKeyDown.call(this,t,f(),i)&&M(n,l.begin,l.end),J=-1!=e.inArray(r,i.ignorables)}function U(a,r,o,s,l,c){if(void 0==o&&K)return!1;K=!0;var h=this,u=e(h);a=a||window.event;var o=r?o:a.which||a.charCode||a.keyCode;if(!(!0===r||a.ctrlKey&&a.altKey)&&(a.ctrlKey||a.metaKey||J))return!0;if(o){!0!==r&&46==o&&0==a.shiftKey&&","==i.radixPoint&&(o=44);var g,y,k,D=String.fromCharCode(o);if(r){var _=l?c:d().lastValidPosition+1;g={begin:_,end:_}}else g=M(h);var E=P(g.begin,g.end),A=n;E&&(n=A,e.each(t,function(e,t){"object"==typeof t&&(n=e,d().undoBuffer=f().join(""))}),j(h,i.keyCode.DELETE,g),i.insertMode||e.each(t,function(e,t){"object"==typeof t&&(n=e,B(g.begin,v()),d().lastValidPosition=b(d().lastValidPosition))}),n=A);var N=f().join("").indexOf(i.radixPoint);i.isNumeric&&!0!==r&&-1!=N&&(i.greedy&&g.begin<=N?(g.begin=w(g.begin),g.end=g.begin):D==i.radixPoint&&(g.begin=N,g.end=g.begin));var R=g.begin;y=p(R,D,l),!0===l&&(y=[{activeMasksetIndex:n,result:y}]);var I=-1;if(e.each(y,function(e,t){n=t.activeMasksetIndex,d().writeOutBuffer=!0;var a=t.result;if(!1!==a){var r=!1,o=f();if(!0!==a&&(r=a.refresh,R=void 0!=a.pos?a.pos:R,D=void 0!=a.c?a.c:D),!0!==r){if(1==i.insertMode){for(var s=v(),c=o.slice();x(c,s,!0)!=T(s)&&s>=R;)s=0==s?-1:w(s);if(s>=R){B(R,v(),D);var h=d().lastValidPosition,u=b(h);u!=v()&&h>=R&&x(f(),u,!0)!=T(u)&&(d().lastValidPosition=u)}else d().writeOutBuffer=!1}else C(o,R,D,!0);(-1==I||I>b(R))&&(I=b(R))}else if(!l){var p=R<v()?R+1:R;(-1==I||I>p)&&(I=p)}I>d().p&&(d().p=I)}}),!0!==l&&(n=A,m()),!1!==s&&(e.each(y,function(e,t){if(t.activeMasksetIndex==n)return k=t,!1}),void 0!=k)){var O=this;if(setTimeout(function(){i.onKeyValidation.call(O,k.result,i)},0),d().writeOutBuffer&&!1!==k.result){var H,$=f();H=r?void 0:i.numericInput?R>N?w(I):D==i.radixPoint?I-1:w(I-1):I,S(h,$,H),!0!==r&&setTimeout(function(){!0===L($)&&u.trigger("complete"),X=!0,u.trigger("input")},0)}else E&&(d().buffer=d().undoBuffer.split(""))}i.showTooltip&&u.prop("title",d().mask),a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}}function W(t){var n=e(this),a=this,r=t.keyCode,o=f();l&&r==i.keyCode.BACKSPACE&&V==a._valueGet()&&F.call(this,t),i.onKeyUp.call(this,t,o,i),r==i.keyCode.TAB&&i.showMaskOnFocus&&(n.hasClass("focus.inputmask")&&0==a._valueGet().length?(o=u().slice(),S(a,o),M(a,0),G=f().join("")):(S(a,o),o.join("")==u().join("")&&-1!=e.inArray(i.radixPoint,o)?(M(a,I(0)),n.click()):M(a,I(0),I(v()))))}function Y(t){if(!0===X)return X=!1,!0;var n=this,i=e(n);V=f().join(""),E(n,!1,!1),S(n,f()),!0===L(f())&&i.trigger("complete"),i.click()}var q,V,z=!1,G=f().join(""),K=!1,X=!1,J=!1;if(void 0!=a)switch(a.action){case"isComplete":return L(a.buffer);case"unmaskedvalue":return z=a.$input.data("_inputmask").isRTL,function(t,n){if(!h()||!0!==n&&t.hasClass("hasDatepicker"))return t[0]._valueGet();var a=e.map(f(),function(e,t){return g(t)&&p(t,e,!0)?e:null}),r=(z?a.reverse():a).join("");return void 0!=i.onUnMask?i.onUnMask.call(this,f().join(""),r):r}(a.$input,a.skipDatepickerCheck);case"mask":!function(a){if(q=e(a),q.is(":input")){if(q.data("_inputmask",{masksets:t,activeMasksetIndex:n,opts:i,isRTL:!1}),i.showTooltip&&q.prop("title",d().mask),d().greedy=d().greedy?d().greedy:0==d().repeat,null!=q.attr("maxLength")){var o=q.prop("maxLength");o>-1&&e.each(t,function(e,t){"object"==typeof t&&"*"==t.repeat&&(t.repeat=o)}),v()>=o&&o>-1&&(o<u().length&&(u().length=o),0==d().greedy&&(d().repeat=Math.round(o/u().length)),q.prop("maxLength",2*v()))}if(H(a),i.numericInput&&(i.isNumeric=i.numericInput),("rtl"==a.dir||i.numericInput&&i.rightAlignNumerics||i.isNumeric&&i.rightAlignNumerics)&&q.css("text-align","right"),"rtl"==a.dir||i.numericInput){a.dir="ltr",q.removeAttr("dir");var s=q.data("_inputmask");s.isRTL=!0,q.data("_inputmask",s),z=!0}q.unbind(".inputmask"),q.removeClass("focus.inputmask"),q.closest("form").bind("submit",function(){G!=f().join("")&&q.change()}).bind("reset",function(){setTimeout(function(){q.trigger("setvalue")},0)}),q.bind("mouseenter.inputmask",function(){var t=e(this),n=this;!t.hasClass("focus.inputmask")&&i.showMaskOnHover&&n._valueGet()!=f().join("")&&S(n,f())}).bind("blur.inputmask",function(){var a=e(this),r=this,o=r._valueGet(),s=f();a.removeClass("focus.inputmask"),G!=f().join("")&&a.change(),i.clearMaskOnLostFocus&&""!=o&&(o==u().join("")?r._valueSet(""):R(r)),!1===L(s)&&(a.trigger("incomplete"),i.clearIncomplete&&(e.each(t,function(e,t){"object"==typeof t&&(t.buffer=t._buffer.slice(),t.lastValidPosition=-1)}),n=0,i.clearMaskOnLostFocus?r._valueSet(""):(s=u().slice(),S(r,s))))}).bind("focus.inputmask",function(){var t=e(this),n=this,a=n._valueGet();i.showMaskOnFocus&&!t.hasClass("focus.inputmask")&&(!i.showMaskOnHover||i.showMaskOnHover&&""==a)&&n._valueGet()!=f().join("")&&S(n,f(),b(d().lastValidPosition)),t.addClass("focus.inputmask"),G=f().join("")}).bind("mouseleave.inputmask",function(){var t=e(this),n=this;i.clearMaskOnLostFocus&&(t.hasClass("focus.inputmask")||n._valueGet()==t.attr("placeholder")||(n._valueGet()==u().join("")||""==n._valueGet()?n._valueSet(""):R(n)))}).bind("click.inputmask",function(){var t=this;setTimeout(function(){var n=M(t),a=f();if(n.begin==n.end){var r,o=z?I(n.begin):n.begin,s=d().lastValidPosition;r=i.isNumeric&&!1===i.skipRadixDance&&""!=i.radixPoint&&-1!=e.inArray(i.radixPoint,a)?i.numericInput?b(e.inArray(i.radixPoint,a)):e.inArray(i.radixPoint,a):b(s),o<r?g(o)?M(t,o):M(t,b(o)):M(t,r)}},0)}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){M(e,0,b(d().lastValidPosition))},0)
}).bind(c+".inputmask dragdrop.inputmask drop.inputmask",function(t){if(!0===X)return X=!1,!0;var n=this,a=e(n);if("propertychange"==t.type&&n._valueGet().length<=v())return!0;setTimeout(function(){var e=void 0!=i.onBeforePaste?i.onBeforePaste.call(this,n._valueGet()):n._valueGet();E(n,!0,!1,e.split(""),!0),!0===L(f())&&a.trigger("complete"),a.click()},0)}).bind("setvalue.inputmask",function(){var e=this;E(e,!0),G=f().join(""),e._valueGet()==u().join("")&&e._valueSet("")}).bind("complete.inputmask",i.oncomplete).bind("incomplete.inputmask",i.onincomplete).bind("cleared.inputmask",i.oncleared).bind("keyup.inputmask",W),l?q.bind("input.inputmask",Y):q.bind("keydown.inputmask",F).bind("keypress.inputmask",U),r&&q.bind("input.inputmask",Y),E(a,!0,!1),G=f().join("");var h;try{h=document.activeElement}catch(e){}h===a?(q.addClass("focus.inputmask"),M(a,b(d().lastValidPosition))):i.clearMaskOnLostFocus?f().join("")==u().join("")?a._valueSet(""):R(a):S(a,f()),O(a)}}(a.el);break;case"format":return q=e({}),q.data("_inputmask",{masksets:t,activeMasksetIndex:n,opts:i,isRTL:i.numericInput}),i.numericInput&&(i.isNumeric=i.numericInput,z=!0),E(q,!1,!1,a.value.split(""),!0),f().join("")}}if(void 0===e.fn.inputmask){var r=null!==navigator.userAgent.match(new RegExp("msie 10","i")),o=null!==navigator.userAgent.match(new RegExp("iphone","i")),s=null!==navigator.userAgent.match(new RegExp("android.*safari.*","i")),l=null!==navigator.userAgent.match(new RegExp("android.*chrome.*","i")),c=t("paste")?"paste":t("input")?"input":"propertychange";e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:e.noop,onKeyDown:e.noop,onBeforePaste:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,isNumeric:!1,radixPoint:"",skipRadixDance:!1,rightAlignNumerics:!0,definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],getMaskLength:function(e,t,n,i,a){var r=e.length;return t||("*"==n?r=i.length+1:n>1&&(r+=e.length*(n-1))),r}},escapeRegex:function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")},format:function(t,r){var o=e.extend(!0,{},e.inputmask.defaults,r);return n(o.alias,r,o),a(i(o),0,o,{action:"format",value:t})}},e.fn.inputmask=function(t,r){var o,s=e.extend(!0,{},e.inputmask.defaults,r),l=0;if("string"==typeof t)switch(t){case"mask":return n(s.alias,r,s),o=i(s),0==o.length?this:this.each(function(){a(e.extend(!0,{},o),0,s,{action:"mask",el:this})});case"unmaskedvalue":var c=e(this);return c.data("_inputmask")?(o=c.data("_inputmask").masksets,l=c.data("_inputmask").activeMasksetIndex,s=c.data("_inputmask").opts,a(o,l,s,{action:"unmaskedvalue",$input:c})):c.val();case"remove":return this.each(function(){var t=e(this),n=this;if(t.data("_inputmask")){o=t.data("_inputmask").masksets,l=t.data("_inputmask").activeMasksetIndex,s=t.data("_inputmask").opts,n._valueSet(a(o,l,s,{action:"unmaskedvalue",$input:t,skipDatepickerCheck:!0})),t.removeData("_inputmask"),t.unbind(".inputmask"),t.removeClass("focus.inputmask");var i;Object.getOwnPropertyDescriptor&&(i=Object.getOwnPropertyDescriptor(n,"value")),i&&i.get?n._valueGet&&Object.defineProperty(n,"value",{get:n._valueGet,set:n._valueSet}):document.__lookupGetter__&&n.__lookupGetter__("value")&&n._valueGet&&(n.__defineGetter__("value",n._valueGet),n.__defineSetter__("value",n._valueSet));try{delete n._valueGet,delete n._valueSet}catch(e){n._valueGet=void 0,n._valueSet=void 0}}});case"getemptymask":return this.data("_inputmask")?(o=this.data("_inputmask").masksets,l=this.data("_inputmask").activeMasksetIndex,o[l]._buffer.join("")):"";case"hasMaskedValue":return!!this.data("_inputmask")&&!this.data("_inputmask").opts.autoUnmask;case"isComplete":return o=this.data("_inputmask").masksets,l=this.data("_inputmask").activeMasksetIndex,s=this.data("_inputmask").opts,a(o,l,s,{action:"isComplete",buffer:this[0]._valueGet().split("")});case"getmetadata":return this.data("_inputmask")?(o=this.data("_inputmask").masksets,l=this.data("_inputmask").activeMasksetIndex,o[l].metadata):void 0;default:return n(t,r,s)||(s.mask=t),o=i(s),0==o.length?this:this.each(function(){a(e.extend(!0,{},o),l,s,{action:"mask",el:this})})}else{if("object"==typeof t)return s=e.extend(!0,{},e.inputmask.defaults,t),n(s.alias,t,s),o=i(s),0==o.length?this:this.each(function(){a(e.extend(!0,{},o),l,s,{action:"mask",el:this})});if(void 0==t)return this.each(function(){var t=e(this).attr("data-inputmask");if(t&&""!=t)try{t=t.replace(new RegExp("'","g"),'"');var i=e.parseJSON("{"+t+"}");e.extend(!0,i,r),s=e.extend(!0,{},e.inputmask.defaults,i),n(s.alias,i,s),s.alias=void 0,e(this).inputmask(s)}catch(e){}})}}}}(jQuery),function(e){e.extend(e.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),e.extend(e.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+n+"[01])")},val2:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9])"+n+"(0[1-9]|1[012]))|(30"+n+"(0[13-9]|1[012]))|(31"+n+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,n){var i=parseInt(e.concat(t.toString().slice(e.length))),a=parseInt(e.concat(n.toString().slice(e.length)));return NaN!=i&&(t<=i&&i<=n)||NaN!=a&&(t<=a&&a<=n)},determinebaseyear:function(e,t,n){var i=(new Date).getFullYear();if(e>i)return e;if(t<i){for(var a=t.toString().slice(0,2),r=t.toString().slice(2,4);t<a+n;)a--;var o=a+r;return e>o?e:o}return i},onKeyUp:function(t,n,i){var a=e(this);if(t.ctrlKey&&t.keyCode==i.keyCode.RIGHT){var r=new Date;a.val(r.getDate().toString()+(r.getMonth()+1).toString()+r.getFullYear().toString())}},definitions:{1:{validator:function(e,t,n,i,a){var r=a.regex.val1.test(e);return i||r||e.charAt(1)!=a.separator&&-1=="-./".indexOf(e.charAt(1))||!(r=a.regex.val1.test("0"+e.charAt(0)))?r:(t[n-1]="0",{pos:n,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,n,i,a){var r=a.regex.val1pre.test(e);return i||r||!(r=a.regex.val1.test("0"+e))?r:(t[n]="0",n++,{pos:n})},cardinality:1}]},2:{validator:function(e,t,n,i,a){var r=t.join("").substr(0,3);-1!=r.indexOf(a.placeholder[0])&&(r="01"+a.separator);var o=a.regex.val2(a.separator).test(r+e);return i||o||e.charAt(1)!=a.separator&&-1=="-./".indexOf(e.charAt(1))||!(o=a.regex.val2(a.separator).test(r+"0"+e.charAt(0)))?o:(t[n-1]="0",{pos:n,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,n,i,a){var r=t.join("").substr(0,3);-1!=r.indexOf(a.placeholder[0])&&(r="01"+a.separator);var o=a.regex.val2pre(a.separator).test(r+e);return i||o||!(o=a.regex.val2(a.separator).test(r+"0"+e))?o:(t[n]="0",n++,{pos:n})},cardinality:1}]},y:{validator:function(e,t,n,i,a){if(a.isInYearRange(e,a.yearrange.minyear,a.yearrange.maxyear)){if(t.join("").substr(0,6)!=a.leapday)return!0;var r=parseInt(e,10);return r%4==0&&(r%100!=0||r%400==0)}return!1},cardinality:4,prevalidator:[{validator:function(e,t,n,i,a){var r=a.isInYearRange(e,a.yearrange.minyear,a.yearrange.maxyear);if(!i&&!r){var o=a.determinebaseyear(a.yearrange.minyear,a.yearrange.maxyear,e+"0").toString().slice(0,1);if(r=a.isInYearRange(o+e,a.yearrange.minyear,a.yearrange.maxyear))return t[n++]=o[0],{pos:n};if(o=a.determinebaseyear(a.yearrange.minyear,a.yearrange.maxyear,e+"0").toString().slice(0,2),r=a.isInYearRange(o+e,a.yearrange.minyear,a.yearrange.maxyear))return t[n++]=o[0],t[n++]=o[1],{pos:n}}return r},cardinality:1},{validator:function(e,t,n,i,a){var r=a.isInYearRange(e,a.yearrange.minyear,a.yearrange.maxyear);if(!i&&!r){var o=a.determinebaseyear(a.yearrange.minyear,a.yearrange.maxyear,e).toString().slice(0,2);if(r=a.isInYearRange(e[0]+o[1]+e[1],a.yearrange.minyear,a.yearrange.maxyear))return t[n++]=o[1],{pos:n};if(o=a.determinebaseyear(a.yearrange.minyear,a.yearrange.maxyear,e).toString().slice(0,2),a.isInYearRange(o+e,a.yearrange.minyear,a.yearrange.maxyear)){if(t.join("").substr(0,6)!=a.leapday)r=!0;else{var s=parseInt(e,10);r=s%4==0&&(s%100!=0||s%400==0)}}else r=!1;if(r)return t[n-1]=o[0],t[n++]=o[1],t[n++]=e[0],{pos:n}}return r},cardinality:2},{validator:function(e,t,n,i,a){return a.isInYearRange(e,a.yearrange.minyear,a.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[13-9]|1[012])"+n+"[0-3])|(02"+n+"[0-2])")},val2:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|1[012])"+n+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+n+"30)|((0[13578]|1[02])"+n+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyUp:function(t,n,i){var a=e(this);if(t.ctrlKey&&t.keyCode==i.keyCode.RIGHT){var r=new Date;a.val((r.getMonth()+1).toString()+r.getDate().toString()+r.getFullYear().toString())}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyUp:function(t,n,i){var a=e(this);if(t.ctrlKey&&t.keyCode==i.keyCode.RIGHT){var r=new Date;a.val(r.getFullYear().toString()+(r.getMonth()+1).toString()+r.getDate().toString())}},definitions:{2:{validator:function(e,t,n,i,a){var r=t.join("").substr(5,3);-1!=r.indexOf(a.placeholder[5])&&(r="01"+a.separator);var o=a.regex.val2(a.separator).test(r+e);if(!i&&!o&&(e.charAt(1)==a.separator||-1!="-./".indexOf(e.charAt(1)))&&(o=a.regex.val2(a.separator).test(r+"0"+e.charAt(0))))return t[n-1]="0",{pos:n,c:e.charAt(0)};if(o){if(t.join("").substr(4,4)+e!=a.leapday)return!0;var s=parseInt(t.join("").substr(0,4),10);return s%4==0&&(s%100!=0||s%400==0)}return o},cardinality:2,prevalidator:[{validator:function(e,t,n,i,a){var r=t.join("").substr(5,3);-1!=r.indexOf(a.placeholder[5])&&(r="01"+a.separator);var o=a.regex.val2pre(a.separator).test(r+e);return i||o||!(o=a.regex.val2(a.separator).test(r+"0"+e))?o:(t[n]="0",n++,{pos:n})},cardinality:1}]}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-9]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-3]"),ampm:new RegExp("^[a|p|A|P][m|M]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,n,i,a){var r=a.regex.hrs.test(e);if(!i&&!r&&(e.charAt(1)==a.timeseparator||-1!="-.:".indexOf(e.charAt(1)))&&(r=a.regex.hrs.test("0"+e.charAt(0))))return t[n-1]="0",t[n]=e.charAt(0),n++,{pos:n};if(r&&"24"!==a.hourFormat&&a.regex.hrs24.test(e)){var o=parseInt(e,10);return 24==o?(t[n+5]="a",t[n+6]="m"):(t[n+5]="p",t[n+6]="m"),o-=12,o<10?(t[n]=o.toString(),t[n-1]="0"):(t[n]=o.toString().charAt(1),t[n-1]=o.toString().charAt(0)),{pos:n,c:t[n]}}return r},cardinality:2,prevalidator:[{validator:function(e,t,n,i,a){var r=a.regex.hrspre.test(e);return i||r||!(r=a.regex.hrs.test("0"+e))?r:(t[n]="0",n++,{pos:n})},cardinality:1}]},t:{validator:function(e,t,n,i,a){return a.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",autoUnmask:!1},"hh:mm":{mask:"h:s",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}})}(jQuery),function(e){e.extend(e.inputmask.defaults.definitions,{A:{validator:"[A-Za-z]",cardinality:1,casing:"upper"},"#":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1,casing:"upper"}}),e.extend(e.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(e,t,n,i,a){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=0;t<8;t++)e[t]=function(){var e=t;return{validator:function(t,n,i,a,r){if(r.regex["urlpre"+(e+1)]){var o,s=t;e+1-t.length>0&&(s=n.join("").substring(0,e+1-t.length)+""+s);var l=r.regex["urlpre"+(e+1)].test(s);if(!a&&!l){for(i-=e,o=0;o<r.defaultPrefix.length;o++)n[i]=r.defaultPrefix[o],i++;for(o=0;o<s.length-1;o++)n[i]=s[o],i++;return{pos:i}}return l}return!1},cardinality:e}}();return e}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:["[[x]y]z.[[x]y]z.[[x]y]z.x[yz]","[[x]y]z.[[x]y]z.[[x]y]z.[[x]y][z]"],definitions:{x:{validator:"[012]",cardinality:1,definitionSymbol:"i"},y:{validator:function(e,t,n,i,a){return e=n-1>-1&&"."!=t[n-1]?t[n-1]+e:"0"+e,new RegExp("2[0-5]|[01][0-9]").test(e)},cardinality:1,definitionSymbol:"i"},z:{validator:function(e,t,n,i,a){return n-1>-1&&"."!=t[n-1]?(e=t[n-1]+e,e=n-2>-1&&"."!=t[n-2]?t[n-2]+e:"0"+e):e="00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)},cardinality:1,definitionSymbol:"i"}}}})}(jQuery),function(e,t){if("function"==typeof define&&define.amd)define(["moment","jquery","exports"],function(n,i,a){e.daterangepicker=t(e,a,n,i)});else if("undefined"!=typeof exports){var n=require("moment"),i="undefined"!=typeof window?window.jQuery:void 0;if(!i)try{i=require("jquery"),i.fn||(i.fn={})}catch(e){if(!i)throw new Error("jQuery dependency not found")}t(e,exports,n,i)}else e.daterangepicker=t(e,{},e.moment||moment,e.jQuery||e.Zepto||e.ender||e.$)}(this||{},function(e,t,n,i){var a=function(e,t,a){if(this.parentEl="body",this.element=i(e),this.startDate=n().startOf("day"),this.endDate=n().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-success",this.cancelClass="btn-default",this.locale={format:"MM/DD/YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:n.weekdaysMin(),monthNames:n.monthsShort(),firstDay:n.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof t&&null!==t||(t={}),t=i.extend(this.element.data(),t),"string"==typeof t.template||t.template instanceof i||(t.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'),this.parentEl=i(t.parentEl&&i(t.parentEl).length?t.parentEl:this.parentEl),this.container=i(t.template).appendTo(this.parentEl),"object"==typeof t.locale&&("string"==typeof t.locale.format&&(this.locale.format=t.locale.format),"string"==typeof t.locale.separator&&(this.locale.separator=t.locale.separator),"object"==typeof t.locale.daysOfWeek&&(this.locale.daysOfWeek=t.locale.daysOfWeek.slice()),"object"==typeof t.locale.monthNames&&(this.locale.monthNames=t.locale.monthNames.slice()),"number"==typeof t.locale.firstDay&&(this.locale.firstDay=t.locale.firstDay),"string"==typeof t.locale.applyLabel&&(this.locale.applyLabel=t.locale.applyLabel),"string"==typeof t.locale.cancelLabel&&(this.locale.cancelLabel=t.locale.cancelLabel),"string"==typeof t.locale.weekLabel&&(this.locale.weekLabel=t.locale.weekLabel),"string"==typeof t.locale.customRangeLabel&&(this.locale.customRangeLabel=t.locale.customRangeLabel)),"string"==typeof t.startDate&&(this.startDate=n(t.startDate,this.locale.format)),"string"==typeof t.endDate&&(this.endDate=n(t.endDate,this.locale.format)),"string"==typeof t.minDate&&(this.minDate=n(t.minDate,this.locale.format)),"string"==typeof t.maxDate&&(this.maxDate=n(t.maxDate,this.locale.format)),"object"==typeof t.startDate&&(this.startDate=n(t.startDate)),"object"==typeof t.endDate&&(this.endDate=n(t.endDate)),"object"==typeof t.minDate&&(this.minDate=n(t.minDate)),"object"==typeof t.maxDate&&(this.maxDate=n(t.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof t.applyClass&&(this.applyClass=t.applyClass),"string"==typeof t.cancelClass&&(this.cancelClass=t.cancelClass),"object"==typeof t.dateLimit&&(this.dateLimit=t.dateLimit),"string"==typeof t.opens&&(this.opens=t.opens),"string"==typeof t.drops&&(this.drops=t.drops),"boolean"==typeof t.showWeekNumbers&&(this.showWeekNumbers=t.showWeekNumbers),"boolean"==typeof t.showISOWeekNumbers&&(this.showISOWeekNumbers=t.showISOWeekNumbers),"string"==typeof t.buttonClasses&&(this.buttonClasses=t.buttonClasses),"object"==typeof t.buttonClasses&&(this.buttonClasses=t.buttonClasses.join(" ")),"boolean"==typeof t.showDropdowns&&(this.showDropdowns=t.showDropdowns),"boolean"==typeof t.singleDatePicker&&(this.singleDatePicker=t.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof t.timePicker&&(this.timePicker=t.timePicker),"boolean"==typeof t.timePickerSeconds&&(this.timePickerSeconds=t.timePickerSeconds),"number"==typeof t.timePickerIncrement&&(this.timePickerIncrement=t.timePickerIncrement),"boolean"==typeof t.timePicker24Hour&&(this.timePicker24Hour=t.timePicker24Hour),"boolean"==typeof t.autoApply&&(this.autoApply=t.autoApply),"boolean"==typeof t.autoUpdateInput&&(this.autoUpdateInput=t.autoUpdateInput),"boolean"==typeof t.linkedCalendars&&(this.linkedCalendars=t.linkedCalendars),"function"==typeof t.isInvalidDate&&(this.isInvalidDate=t.isInvalidDate),"boolean"==typeof t.alwaysShowCalendars&&(this.alwaysShowCalendars=t.alwaysShowCalendars),0!=this.locale.firstDay)for(var r=this.locale.firstDay;r>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),r--;var o,s,l;if(void 0===t.startDate&&void 0===t.endDate&&i(this.element).is("input[type=text]")){var c=i(this.element).val(),d=c.split(this.locale.separator);o=s=null,2==d.length?(o=n(d[0],this.locale.format),s=n(d[1],this.locale.format)):this.singleDatePicker&&""!==c&&(o=n(c,this.locale.format),s=n(c,this.locale.format)),null!==o&&null!==s&&(this.setStartDate(o),this.setEndDate(s))}if("object"==typeof t.ranges){for(l in t.ranges){o="string"==typeof t.ranges[l][0]?n(t.ranges[l][0],this.locale.format):n(t.ranges[l][0]),s="string"==typeof t.ranges[l][1]?n(t.ranges[l][1],this.locale.format):n(t.ranges[l][1]),this.minDate&&o.isBefore(this.minDate)&&(o=this.minDate.clone());var h=this.maxDate;if(this.dateLimit&&o.clone().add(this.dateLimit).isAfter(h)&&(h=o.clone().add(this.dateLimit)),h&&s.isAfter(h)&&(s=h.clone()),!(this.minDate&&s.isBefore(this.minDate)||h&&o.isAfter(h))){var u=document.createElement("textarea");u.innerHTML=l;var f=u.value;this.ranges[f]=[o,s]}}var p="<ul>";for(l in this.ranges)p+="<li>"+l+"</li>";p+="<li>"+this.locale.customRangeLabel+"</li>",p+="</ul>",this.container.find(".ranges").prepend(p)}if("function"==typeof a&&(this.callback=a),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof t.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input i").hide(),this.timePicker||this.container.find(".ranges").hide()),(void 0===t.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),void 0!==t.ranges&&"right"==this.opens){var m=this.container.find(".ranges"),g=m.clone();m.remove(),this.container.find(".calendar.left").parent().prepend(g)}this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",i.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",i.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",i.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",i.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",i.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",i.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",i.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",i.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",i.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_input input",i.proxy(this.formInputsChanged,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",i.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",i.proxy(this.clickCancel,this)).on("click.daterangepicker","li",i.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",i.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",i.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":i.proxy(this.show,this),"focus.daterangepicker":i.proxy(this.show,this),"keyup.daterangepicker":i.proxy(this.elementChanged,this),"keydown.daterangepicker":i.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",i.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};return a.prototype={constructor:a,setStartDate:function(e){"string"==typeof e&&(this.startDate=n(e,this.locale.format)),"object"==typeof e&&(this.startDate=n(e)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(e){"string"==typeof e&&(this.endDate=n(e,this.locale.format)),"object"==typeof e&&(this.endDate=n(e)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.previousRightTime=this.endDate.clone(),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"))},updateCalendars:function(){if(this.timePicker){var e,t,n;if(this.endDate){if(e=parseInt(this.container.find(".left .hourselect").val(),10),t=parseInt(this.container.find(".left .minuteselect").val(),10),n=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var i=this.container.find(".left .ampmselect").val();"PM"===i&&e<12&&(e+=12),"AM"===i&&12===e&&(e=0)}}else if(e=parseInt(this.container.find(".right .hourselect").val(),10),t=parseInt(this.container.find(".right .minuteselect").val(),10),n=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour){var i=this.container.find(".right .ampmselect").val();"PM"===i&&e<12&&(e+=12),"AM"===i&&12===e&&(e=0)}this.leftCalendar.month.hour(e).minute(t).second(n),this.rightCalendar.month.hour(e).minute(t).second(n)}this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(e){var t="left"==e?this.leftCalendar:this.rightCalendar,a=t.month.month(),r=t.month.year(),o=t.month.hour(),s=t.month.minute(),l=t.month.second(),c=n([r,a]).daysInMonth(),d=n([r,a,1]),h=n([r,a,c]),u=n(d).subtract(1,"month").month(),f=n(d).subtract(1,"month").year(),p=n([f,u]).daysInMonth(),m=d.day(),t=[];t.firstDay=d,t.lastDay=h;for(var g=0;g<6;g++)t[g]=[];var y=p-m+this.locale.firstDay+1;y>p&&(y-=7),m==this.locale.firstDay&&(y=p-6);for(var v,b,w=n([f,u,y,12,s,l]),g=0,v=0,b=0;g<42;g++,v++,w=n(w).add(24,"hour"))g>0&&v%7==0&&(v=0,b++),t[b][v]=w.clone().hour(o).minute(s).second(l),w.hour(12),this.minDate&&t[b][v].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&t[b][v].isBefore(this.minDate)&&"left"==e&&(t[b][v]=this.minDate.clone()),this.maxDate&&t[b][v].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&t[b][v].isAfter(this.maxDate)&&"right"==e&&(t[b][v]=this.maxDate.clone());"left"==e?this.leftCalendar.calendar=t:this.rightCalendar.calendar=t;var C="left"==e?this.minDate:this.startDate,x=this.maxDate,k=("left"==e?this.startDate:this.endDate,'<table class="table-condensed">');k+="<thead>",k+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(k+="<th></th>"),C&&!C.isBefore(t.firstDay)||this.linkedCalendars&&"left"!=e?k+="<th></th>":k+='<th class="prev available"><i class="fa fa-chevron-left glyphicon glyphicon-chevron-left"></i></th>';var S=this.locale.monthNames[t[1][1].month()]+t[1][1].format(" YYYY");if(this.showDropdowns){for(var D=t[1][1].month(),_=t[1][1].year(),T=x&&x.year()||_+5,E=C&&C.year()||_-50,A=_==E,N=_==T,R='<select class="monthselect">',I=0;I<12;I++)(!A||I>=C.month())&&(!N||I<=x.month())?R+="<option value='"+I+"'"+(I===D?" selected='selected'":"")+">"+this.locale.monthNames[I]+"</option>":R+="<option value='"+I+"'"+(I===D?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[I]+"</option>";R+="</select>";for(var M='<select class="yearselect">',L=E;L<=T;L++)M+='<option value="'+L+'"'+(L===_?' selected="selected"':"")+">"+L+"</option>";M+="</select>",S=R+M}
if(k+='<th colspan="5" class="month">'+S+"</th>",x&&!x.isAfter(t.lastDay)||this.linkedCalendars&&"right"!=e&&!this.singleDatePicker?k+="<th></th>":k+='<th class="next available"><i class="fa fa-chevron-right glyphicon glyphicon-chevron-right"></i></th>',k+="</tr>",k+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(k+='<th class="week">'+this.locale.weekLabel+"</th>"),i.each(this.locale.daysOfWeek,function(e,t){k+="<th>"+t+"</th>"}),k+="</tr>",k+="</thead>",k+="<tbody>",null==this.endDate&&this.dateLimit){var P=this.startDate.clone().add(this.dateLimit).endOf("day");x&&!P.isBefore(x)||(x=P)}for(var b=0;b<6;b++){k+="<tr>",this.showWeekNumbers?k+='<td class="week">'+t[b][0].week()+"</td>":this.showISOWeekNumbers&&(k+='<td class="week">'+t[b][0].isoWeek()+"</td>");for(var v=0;v<7;v++){var O=[];t[b][v].isSame(new Date,"day")&&O.push("today"),t[b][v].isoWeekday()>5&&O.push("weekend"),t[b][v].month()!=t[1][1].month()&&O.push("off"),this.minDate&&t[b][v].isBefore(this.minDate,"day")&&O.push("off","disabled"),x&&t[b][v].isAfter(x,"day")&&O.push("off","disabled"),this.isInvalidDate(t[b][v])&&O.push("off","disabled"),t[b][v].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&O.push("active","start-date"),null!=this.endDate&&t[b][v].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&O.push("active","end-date"),null!=this.endDate&&t[b][v]>this.startDate&&t[b][v]<this.endDate&&O.push("in-range");for(var H="",$=!1,g=0;g<O.length;g++)H+=O[g]+" ","disabled"==O[g]&&($=!0);$||(H+="available"),k+='<td class="'+H.replace(/^\s+|\s+$/g,"")+'" data-title="r'+b+"c"+v+'">'+t[b][v].date()+"</td>"}k+="</tr>"}k+="</tbody>",k+="</table>",this.container.find(".calendar."+e+" .calendar-table").html(k)},renderTimePicker:function(e){var t,n,i,a=this.maxDate;if(!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(a=this.startDate.clone().add(this.dateLimit)),"left"==e)n=this.startDate.clone(),i=this.minDate;else if("right"==e){n=this.endDate?this.endDate.clone():this.previousRightTime.clone(),i=this.startDate;var r=this.container.find(".calendar.right .calendar-time div");if(""!=r.html()){if(n.hour(r.find(".hourselect option:selected").val()||n.hour()),n.minute(r.find(".minuteselect option:selected").val()||n.minute()),n.second(r.find(".secondselect option:selected").val()||n.second()),!this.timePicker24Hour){var o=r.find(".ampmselect option:selected").val();"PM"===o&&n.hour()<12&&n.hour(n.hour()+12),"AM"===o&&12===n.hour()&&n.hour(0)}n.isBefore(this.startDate)&&(n=this.startDate.clone()),n.isAfter(a)&&(n=a.clone())}}t='<select class="hourselect">';for(var s=this.timePicker24Hour?0:1,l=this.timePicker24Hour?23:12,c=s;c<=l;c++){var d=c;this.timePicker24Hour||(d=n.hour()>=12?12==c?12:c+12:12==c?0:c);var h=n.clone().hour(d),u=!1;i&&h.minute(59).isBefore(i)&&(u=!0),a&&h.minute(0).isAfter(a)&&(u=!0),d!=n.hour()||u?t+=u?'<option value="'+c+'" disabled="disabled" class="disabled">'+c+"</option>":'<option value="'+c+'">'+c+"</option>":t+='<option value="'+c+'" selected="selected">'+c+"</option>"}t+="</select> ",t+=': <select class="minuteselect">';for(var c=0;c<60;c+=this.timePickerIncrement){var f=c<10?"0"+c:c,h=n.clone().minute(c),u=!1;i&&h.second(59).isBefore(i)&&(u=!0),a&&h.second(0).isAfter(a)&&(u=!0),n.minute()!=c||u?t+=u?'<option value="'+c+'" disabled="disabled" class="disabled">'+f+"</option>":'<option value="'+c+'">'+f+"</option>":t+='<option value="'+c+'" selected="selected">'+f+"</option>"}if(t+="</select> ",this.timePickerSeconds){t+=': <select class="secondselect">';for(var c=0;c<60;c++){var f=c<10?"0"+c:c,h=n.clone().second(c),u=!1;i&&h.isBefore(i)&&(u=!0),a&&h.isAfter(a)&&(u=!0),n.second()!=c||u?t+=u?'<option value="'+c+'" disabled="disabled" class="disabled">'+f+"</option>":'<option value="'+c+'">'+f+"</option>":t+='<option value="'+c+'" selected="selected">'+f+"</option>"}t+="</select> "}if(!this.timePicker24Hour){t+='<select class="ampmselect">';var p="",m="";i&&n.clone().hour(12).minute(0).second(0).isBefore(i)&&(p=' disabled="disabled" class="disabled"'),a&&n.clone().hour(0).minute(0).second(0).isAfter(a)&&(m=' disabled="disabled" class="disabled"'),n.hour()>=12?t+='<option value="AM"'+p+'>AM</option><option value="PM" selected="selected"'+m+">PM</option>":t+='<option value="AM" selected="selected"'+p+'>AM</option><option value="PM"'+m+">PM</option>",t+="</select>"}this.container.find(".calendar."+e+" .calendar-time div").html(t)},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var e,t={top:0,left:0},n=i(window).width();this.parentEl.is("body")||(t={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},n=this.parentEl[0].clientWidth+this.parentEl.offset().left),e="up"==this.drops?this.element.offset().top-this.container.outerHeight()-t.top:this.element.offset().top+this.element.outerHeight()-t.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:e,right:n-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:e,left:this.element.offset().left-t.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:e,left:this.element.offset().left-t.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>i(window).width()&&this.container.css({left:"auto",right:0}))},show:function(e){this.isShowing||(this._outsideClickProxy=i.proxy(function(e){this.outsideClick(e)},this),i(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),i(window).on("resize.daterangepicker",i.proxy(function(e){this.move(e)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(e){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),i(document).off(".daterangepicker"),i(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(e){this.isShowing?this.hide():this.show()},outsideClick:function(e){var t=i(e.target);"focusin"==e.type||t.closest(this.element).length||t.closest(this.container).length||t.closest(".calendar-table").length||this.hide()},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(e){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.updateView();else{var n=this.ranges[t];this.container.find("input[name=daterangepicker_start]").val(n[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(n[1].format(this.locale.format))}}},clickRange:function(e){var t=e.target.innerHTML;if(this.chosenLabel=t,t==this.locale.customRangeLabel)this.showCalendars();else{var n=this.ranges[t];this.startDate=n[0],this.endDate=n[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(e){i(e.target).parents(".calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){i(e.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(e){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")&&i(e.target).hasClass("available")){var t=i(e.target).attr("data-title"),n=t.substr(1,1),a=t.substr(3,1),r=i(e.target).parents(".calendar"),o=r.hasClass("left")?this.leftCalendar.calendar[n][a]:this.rightCalendar.calendar[n][a];this.endDate?this.container.find("input[name=daterangepicker_start]").val(o.format(this.locale.format)):this.container.find("input[name=daterangepicker_end]").val(o.format(this.locale.format));var s=this.leftCalendar,l=this.rightCalendar,c=this.startDate;this.endDate||this.container.find(".calendar td").each(function(e,t){if(!i(t).hasClass("week")){var n=i(t).attr("data-title"),a=n.substr(1,1),r=n.substr(3,1),d=i(t).parents(".calendar"),h=d.hasClass("left")?s.calendar[a][r]:l.calendar[a][r];h.isAfter(c)&&h.isBefore(o)?i(t).addClass("in-range"):i(t).removeClass("in-range")}})}},clickDate:function(e){if(i(e.target).hasClass("available")){var t=i(e.target).attr("data-title"),n=t.substr(1,1),a=t.substr(3,1),r=i(e.target).parents(".calendar"),o=r.hasClass("left")?this.leftCalendar.calendar[n][a]:this.rightCalendar.calendar[n][a];if(this.endDate||o.isBefore(this.startDate,"day")){if(this.timePicker){var s=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var l=this.container.find(".left .ampmselect").val();"PM"===l&&s<12&&(s+=12),"AM"===l&&12===s&&(s=0)}var c=parseInt(this.container.find(".left .minuteselect").val(),10),d=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;o=o.clone().hour(s).minute(c).second(d)}this.endDate=null,this.setStartDate(o.clone())}else if(!this.endDate&&o.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{if(this.timePicker){var s=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour){var l=this.container.find(".right .ampmselect").val();"PM"===l&&s<12&&(s+=12),"AM"===l&&12===s&&(s=0)}var c=parseInt(this.container.find(".right .minuteselect").val(),10),d=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;o=o.clone().hour(s).minute(c).second(d)}this.setEndDate(o.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView()}},calculateChosenLabel:function(){var e=!0,t=0;for(var n in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[n][0])&&this.endDate.isSame(this.ranges[n][1])){e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[n][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[n][1].format("YYYY-MM-DD")){e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").html();break}t++}e&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())},clickApply:function(e){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(e){var t=i(e.target).closest(".calendar").hasClass("left"),n=t?"left":"right",a=this.container.find(".calendar."+n),r=parseInt(a.find(".monthselect").val(),10),o=a.find(".yearselect").val();t||(o<this.startDate.year()||o==this.startDate.year()&&r<this.startDate.month())&&(r=this.startDate.month(),o=this.startDate.year()),this.minDate&&(o<this.minDate.year()||o==this.minDate.year()&&r<this.minDate.month())&&(r=this.minDate.month(),o=this.minDate.year()),this.maxDate&&(o>this.maxDate.year()||o==this.maxDate.year()&&r>this.maxDate.month())&&(r=this.maxDate.month(),o=this.maxDate.year()),t?(this.leftCalendar.month.month(r).year(o),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(r).year(o),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(e){var t=i(e.target).closest(".calendar"),n=t.hasClass("left"),a=parseInt(t.find(".hourselect").val(),10),r=parseInt(t.find(".minuteselect").val(),10),o=this.timePickerSeconds?parseInt(t.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var s=t.find(".ampmselect").val();"PM"===s&&a<12&&(a+=12),"AM"===s&&12===a&&(a=0)}if(n){var l=this.startDate.clone();l.hour(a),l.minute(r),l.second(o),this.setStartDate(l),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==l.format("YYYY-MM-DD")&&this.endDate.isBefore(l)&&this.setEndDate(l.clone())}else if(this.endDate){var c=this.endDate.clone();c.hour(a),c.minute(r),c.second(o),this.setEndDate(c)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(e){var t=i(e.target).closest(".calendar").hasClass("right"),a=n(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),r=n(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);a.isValid()&&r.isValid()&&(t&&r.isBefore(a)&&(a=r.clone()),this.setStartDate(a),this.setEndDate(r),t?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateCalendars(),this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"))},elementChanged:function(){if(this.element.is("input")&&this.element.val().length&&!(this.element.val().length<this.locale.format.length)){var e=this.element.val().split(this.locale.separator),t=null,i=null;2===e.length&&(t=n(e[0],this.locale.format),i=n(e[1],this.locale.format)),(this.singleDatePicker||null===t||null===i)&&(t=n(this.element.val(),this.locale.format),i=t),t.isValid()&&i.isValid()&&(this.setStartDate(t),this.setEndDate(i),this.updateView())}},keydown:function(e){9!==e.keyCode&&13!==e.keyCode||this.hide()},updateElement:function(){this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},i.fn.daterangepicker=function(e,t){return this.each(function(){var n=i(this);n.data("daterangepicker")&&n.data("daterangepicker").remove(),n.data("daterangepicker",new a(n,e,t))}),this},a}),function(e,t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return n(e.getFullYear(),e.getMonth(),e.getDate())}function a(e){return function(){return this[e].apply(this,arguments)}}function r(t,n){function i(e,t){return t.toLowerCase()}var a,r=e(t).data(),o={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var l in r)n.test(l)&&(a=l.replace(s,i),o[a]=r[l]);return o}function o(t){var n={};if(p[t]||(t=t.split("-")[0],p[t])){var i=p[t];return e.each(f,function(e,t){t in i&&(n[t]=i[t])}),n}}var s=e(window),l=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),n=0,i=this.length;n<i;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.splice(0)},copy:function(){var e=new l;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),c=function(t,n){this.dates=new l,this.viewDate=i(),this.focusDate=null,this._process_options(n),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(m.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o),i=n.language;switch(p[i]||(i=i.split("-")[0],p[i]||(i=u.language)),n.language=i,n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),!0!==n.multidate&&(n.multidate=Number(n.multidate)||!1,!1!==n.multidate?n.multidate=Math.max(0,n.multidate):n.multidate=1),n.multidateSeparator=String(n.multidateSeparator),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var a=m.parseFormat(n.format);n.startDate!==-1/0&&(n.startDate?n.startDate instanceof Date?n.startDate=this._local_to_utc(this._zero_time(n.startDate)):n.startDate=m.parseDate(n.startDate,a,n.language):n.startDate=-1/0),n.endDate!==1/0&&(n.endDate?n.endDate instanceof Date?n.endDate=this._local_to_utc(this._zero_time(n.endDate)):n.endDate=m.parseDate(n.endDate,a,n.language):n.endDate=1/0),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],e.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)});var r=String(n.orientation).toLowerCase().split(/\s+/g),o=n.orientation.toLowerCase();if(r=e.grep(r,function(e){return/^auto|left|right|top|bottom$/.test(e)}),n.orientation={x:"auto",y:"auto"},o&&"auto"!==o)if(1===r.length)switch(r[0]){case"top":case"bottom":n.orientation.y=r[0];break;case"left":case"right":n.orientation.x=r[0]}else o=e.grep(r,function(e){return/^left|right$/.test(e)}),n.orientation.x=o[0]||"auto",o=e.grep(r,function(e){return/^top|bottom$/.test(e)}),n.orientation.y=o[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t,n,i,a=0;a<e.length;a++)t=e[a][0],2===e[a].length?(n=void 0,i=e[a][1]):3===e[a].length&&(n=e[a][1],i=e[a][2]),t.on(i,n)},_unapplyEvents:function(e){for(var t,n,i,a=0;a<e.length;a++)t=e[a][0],2===e[a].length?(i=void 0,n=e[a][1]):3===e[a].length&&(i=e[a][1],n=e[a][2]),t.off(n,i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var i=n||this.dates.get(-1),a=this._utc_to_local(i);this.element.trigger({type:t,date:a,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return m.formatDate(n,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:a("setDates"),setUTCDate:a("setUTCDates"),setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(t){void 0===t&&(t=this.o.format);var n=this.o.language;return e.map(this.dates,function(e){return m.formatDate(e,t,n)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t=this.picker.outerWidth(),n=this.picker.outerHeight(),i=s.width(),a=s.height(),r=s.scrollTop(),o=parseInt(this.element.parents().filter(function(){return"auto"!==e(this).css("z-index")}).first().css("z-index"))+10,l=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),h=l.left,u=l.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(h-=t-d)):(this.picker.addClass("datepicker-orient-left"),l.left<0?h-=l.left-10:l.left+t>i&&(h=i-t-10));var f,p,m=this.o.orientation.y;"auto"===m&&(f=-r+l.top-n,p=r+a-(l.top+c+n),m=Math.max(f,p)===p?"top":"bottom"),this.picker.addClass("datepicker-orient-"+m),"top"===m?u+=c:u-=n+parseInt(this.picker.css("padding-top")),this.picker.css({top:u,left:h,zIndex:o})}},_allow_update:!0,update:function(){if(this._allow_update){var t=this.dates.copy(),n=[],i=!1;arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return m.parseDate(e,this.o.format,this.o.language)},this)),n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),i?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';t+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+p[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;t<12;)e+='<span class="month">'+p[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var n=[],i=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),r=new Date;return t.getUTCFullYear()<i||t.getUTCFullYear()===i&&t.getUTCMonth()<a?n.push("old"):(t.getUTCFullYear()>i||t.getUTCFullYear()===i&&t.getUTCMonth()>a)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===r.getFullYear()&&t.getUTCMonth()===r.getMonth()&&t.getUTCDate()===r.getDate()&&n.push("today"),-1!==this.dates.contains(t)&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&n.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&n.push("selected")),n},fill:function(){var t,i=new Date(this.viewDate),a=i.getUTCFullYear(),r=i.getUTCMonth(),o=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,s=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,d=p[this.o.language].today||p.en.today||"",h=p[this.o.language].clear||p.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(p[this.o.language].months[r]+" "+a),this.picker.find("tfoot th.today").text(d).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot th.clear").text(h).toggle(!1!==this.o.clearBtn),this.updateNavArrows(),this.fillMonths();var u=n(a,r-1,28),f=m.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(f),u.setUTCDate(f-(u.getUTCDay()-this.o.weekStart+7)%7);var g=new Date(u);g.setUTCDate(g.getUTCDate()+42),g=g.valueOf();for(var y,v=[];u.valueOf()<g;){if(u.getUTCDay()===this.o.weekStart&&(v.push("<tr>"),this.o.calendarWeeks)){var b=new Date(+u+(this.o.weekStart-u.getUTCDay()-7)%7*864e5),w=new Date(Number(b)+(11-b.getUTCDay())%7*864e5),C=new Date(Number(C=n(w.getUTCFullYear(),0,1))+(11-C.getUTCDay())%7*864e5),x=(w-C)/864e5/7+1;v.push('<td class="cw">'+x+"</td>")}if(y=this.getClassNames(u),y.push("day"),this.o.beforeShowDay!==e.noop){var k=this.o.beforeShowDay(this._utc_to_local(u));void 0===k?k={}:"boolean"==typeof k?k={enabled:k}:"string"==typeof k&&(k={classes:k}),!1===k.enabled&&y.push("disabled"),k.classes&&(y=y.concat(k.classes.split(/\s+/))),k.tooltip&&(t=k.tooltip)}y=e.unique(y),v.push('<td class="'+y.join(" ")+'"'+(t?' title="'+t+'"':"")+">"+u.getUTCDate()+"</td>"),u.getUTCDay()===this.o.weekEnd&&v.push("</tr>"),u.setUTCDate(u.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(v.join(""));var S=this.picker.find(".datepicker-months").find("th:eq(1)").text(a).end().find("span").removeClass("active");e.each(this.dates,function(e,t){t.getUTCFullYear()===a&&S.eq(t.getUTCMonth()).addClass("active")}),(a<o||a>l)&&S.addClass("disabled"),a===o&&S.slice(0,s).addClass("disabled"),a===l&&S.slice(c+1).addClass("disabled"),v="",a=10*parseInt(a/10,10);var D=this.picker.find(".datepicker-years").find("th:eq(1)").text(a+"-"+(a+9)).end().find("td");a-=1;for(var _,T=e.map(this.dates,function(e){return e.getUTCFullYear()}),E=-1;E<11;E++)_=["year"],-1===E?_.push("old"):10===E&&_.push("new"),-1!==e.inArray(a,T)&&_.push("active"),(a<o||a>l)&&_.push("disabled"),v+='<span class="'+_.join(" ")+'">'+a+"</span>",a+=1;D.html(v)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){t.preventDefault();var i,a,r,o=e(t.target).closest("span, td, th");if(1===o.length)switch(o[0].nodeName.toLowerCase()){case"th":switch(o[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var s=m.modes[this.viewMode].navStep*("prev"===o[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s),
1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=n(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var c="linked"===this.o.todayBtn?null:"view";this._setDate(l,c);break;case"clear":var d;this.isInput?d=this.element:this.component&&(d=this.element.find("input")),d&&d.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":o.is(".disabled")||(this.viewDate.setUTCDate(1),o.is(".month")?(r=1,a=o.parent().find("span").index(o),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(a),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(n(i,a,r))):(r=1,a=0,i=parseInt(o.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(i,a,r))),this.showMode(-1),this.fill());break;case"td":o.is(".day")&&!o.is(".disabled")&&(r=parseInt(o.text(),10)||1,i=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),o.is(".old")?0===a?(a=11,i-=1):a-=1:o.is(".new")&&(11===a?(a=0,i+=1):a+=1),this._setDate(n(i,a,r)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e?-1!==t?this.dates.remove(t):this.dates.push(e):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),!this.o.autoclose||t&&"date"!==t||this.hide()},moveMonth:function(e,t){if(e){if(!t)return e;var n,i,a=new Date(e.valueOf()),r=a.getUTCDate(),o=a.getUTCMonth(),s=Math.abs(t);if(t=t>0?1:-1,1===s)i=-1===t?function(){return a.getUTCMonth()===o}:function(){return a.getUTCMonth()!==n},n=o+t,a.setUTCMonth(n),(n<0||n>11)&&(n=(n+12)%12);else{for(var l=0;l<s;l++)a=this.moveMonth(a,t);n=a.getUTCMonth(),a.setUTCDate(r),i=function(){return n!==a.getUTCMonth()}}for(;i();)a.setUTCDate(--r),a.setUTCMonth(n);return a}},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27===e.keyCode&&this.show());var t,n,a,r=!1,o=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37===e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),t),a=this.moveYear(o,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),t),a=this.moveMonth(o,t),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+t),a=new Date(o),a.setUTCDate(o.getUTCDate()+t)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=a,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38===e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),t),a=this.moveYear(o,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),t),a=this.moveMonth(o,t),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+7*t),a=new Date(o),a.setUTCDate(o.getUTCDate()+7*t)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=a,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:o=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(o),r=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(r){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var d=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,e(this.inputs).datepicker(n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};d.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var n=e(t.target).data("datepicker"),i=n.getUTCDate(),a=e.inArray(t.target,this.inputs),r=this.inputs.length;if(-1!==a){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(i)}),i<this.dates[a])for(;a>=0&&i<this.dates[a];)this.pickers[a--].setUTCDate(i);else if(i>this.dates[a])for(;a<r&&i>this.dates[a];)this.pickers[a++].setUTCDate(i);this.updateDates(),delete this.updating}}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var h=e.fn.datepicker;e.fn.datepicker=function(t){var n=Array.apply(null,arguments);n.shift();var i;return this.each(function(){var a=e(this),s=a.data("datepicker"),l="object"==typeof t&&t;if(!s){var h=r(this,"date"),f=e.extend({},u,h,l),p=o(f.language),m=e.extend({},u,p,h,l);if(a.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||a.find("input").toArray()};a.data("datepicker",s=new d(this,e.extend(m,g)))}else a.data("datepicker",s=new c(this,m))}if("string"==typeof t&&"function"==typeof s[t]&&void 0!==(i=s[t].apply(s,n)))return!1}),void 0!==i?i:this};var u=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},f=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=c;var p=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getDaysInMonth:function(e,t){return[31,m.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(t,i,a){function r(){var e=this.slice(0,h[l].length);return e===h[l].slice(0,e.length)}if(t){if(t instanceof Date)return t;"string"==typeof i&&(i=m.parseFormat(i));var o,s,l,d=/([\-+]\d+)([dmwy])/,h=t.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(t)){for(t=new Date,l=0;l<h.length;l++)switch(o=d.exec(h[l]),s=parseInt(o[1]),o[2]){case"d":t.setUTCDate(t.getUTCDate()+s);break;case"m":t=c.prototype.moveMonth.call(c.prototype,t,s);break;case"w":t.setUTCDate(t.getUTCDate()+7*s);break;case"y":t=c.prototype.moveYear.call(c.prototype,t,s)}return n(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0)}h=t&&t.match(this.nonpunctuation)||[],t=new Date;var u,f,g={},y=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,t=n(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0);var b=i.parts.slice();if(h.length!==b.length&&(b=e(b).filter(function(t,n){return-1!==e.inArray(n,y)}).toArray()),h.length===b.length){var w;for(l=0,w=b.length;l<w;l++){if(u=parseInt(h[l],10),o=b[l],isNaN(u))switch(o){case"MM":f=e(p[a].months).filter(r),u=e.inArray(f[0],p[a].months)+1;break;case"M":f=e(p[a].monthsShort).filter(r),u=e.inArray(f[0],p[a].monthsShort)+1}g[o]=u}var C,x;for(l=0;l<y.length;l++)(x=y[l])in g&&!isNaN(g[x])&&(C=new Date(t),v[x](C,g[x]),isNaN(C)||(t=C))}return t}},formatDate:function(t,n,i){if(!t)return"";"string"==typeof n&&(n=m.parseFormat(n));var a={d:t.getUTCDate(),D:p[i].daysShort[t.getUTCDay()],DD:p[i].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:p[i].monthsShort[t.getUTCMonth()],MM:p[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m,t=[];for(var r=e.extend([],n.separators),o=0,s=n.parts.length;o<=s;o++)r.length&&t.push(r.shift()),t.push(a[n.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class="table table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+'</table></div><div class="datepicker-months"><table class="table table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-years"><table class="table table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=m,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=h,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);n.data("datepicker")||(t.preventDefault(),n.datepicker("show"))}),e(function(){e('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),function(e){"use strict";"object"==typeof exports?module.exports=e(window.jQuery):"function"==typeof define&&define.amd?define(["jquery"],e):window.jQuery&&!window.jQuery.fn.colorpicker&&e(window.jQuery)}(function(e){"use strict";var t=function(t,n){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,n&&e.extend(this.colors,n),t&&(void 0!==t.toLowerCase?(t+="",this.setColor(t)):void 0!==t.h&&(this.value=t))};t.prototype={constructor:t,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"},_sanitizeNumber:function(e){return"number"==typeof e?e:isNaN(e)||null===e||""===e||void 0===e?1:void 0!==e.toLowerCase?parseFloat(e):1},isTransparent:function(e){return!!e&&("transparent"===(e=e.toLowerCase().trim())||e.match(/#?00000000/)||e.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(e){return 0===e.r&&0===e.g&&0===e.b&&0===e.a},setColor:function(e){(e=e.toLowerCase().trim())&&(this.isTransparent(e)?this.value={h:0,s:0,b:0,a:0}:this.value=this.stringToHSB(e)||{h:0,s:0,b:0,a:1})},stringToHSB:function(t){t=t.toLowerCase();var n;void 0!==this.colors[t]&&(t=this.colors[t],n="alias");var i=this,a=!1;return e.each(this.stringParsers,function(e,r){var o=r.re.exec(t),s=o&&r.parse.apply(i,[o]),l=n||r.format||"rgba";return!s||(a=l.match(/hsla?/)?i.RGBtoHSB.apply(i,i.HSLtoRGB.apply(i,s)):i.RGBtoHSB.apply(i,s),i.origFormat=l,!1)}),a},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setBrightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,n,i){e||(e=this.value.h,t=this.value.s,n=this.value.b),e*=360;var a,r,o,s,l;return e=e%360/60,l=n*t,s=l*(1-Math.abs(e%2-1)),a=r=o=n-l,e=~~e,a+=[l,s,0,0,s,l][e],r+=[s,l,l,s,0,0][e],o+=[0,0,s,l,l,s][e],{r:Math.round(255*a),g:Math.round(255*r),b:Math.round(255*o),a:i||this.value.a}},toHex:function(e,t,n,i){var a=this.toRGB(e,t,n,i);return this.rgbaIsTransparent(a)?"transparent":"#"+(1<<24|parseInt(a.r)<<16|parseInt(a.g)<<8|parseInt(a.b)).toString(16).substr(1)},toHSL:function(e,t,n,i){e=e||this.value.h,t=t||this.value.s,n=n||this.value.b,i=i||this.value.a;var a=e,r=(2-t)*n,o=t*n;return o/=r>0&&1>=r?r:2-r,r/=2,o>1&&(o=1),{h:isNaN(a)?0:a,s:isNaN(o)?0:o,l:isNaN(r)?0:r,a:isNaN(i)?0:i}},toAlias:function(e,t,n,i){var a=this.toHex(e,t,n,i);for(var r in this.colors)if(this.colors[r]===a)return r;return!1},RGBtoHSB:function(e,t,n,i){e/=255,t/=255,n/=255;var a,r,o,s;return o=Math.max(e,t,n),s=o-Math.min(e,t,n),a=0===s?null:o===e?(t-n)/s:o===t?(n-e)/s+2:(e-t)/s+4,a=(a+360)%6*60/360,r=0===s?0:s/o,{h:this._sanitizeNumber(a),s:r,b:o,a:this._sanitizeNumber(i)}},HueToRGB:function(e,t,n){return 0>n?n+=1:n>1&&(n-=1),1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e},HSLtoRGB:function(e,t,n,i){0>t&&(t=0);var a;a=.5>=n?n*(1+t):n+t-n*t;var r=2*n-a,o=e+1/3,s=e,l=e-1/3;return[Math.round(255*this.HueToRGB(r,a,o)),Math.round(255*this.HueToRGB(r,a,s)),Math.round(255*this.HueToRGB(r,a,l)),this._sanitizeNumber(i)]},toString:function(e){e=e||"rgba";var t=!1;switch(e){case"rgb":return t=this.toRGB(),this.rgbaIsTransparent(t)?"transparent":"rgb("+t.r+","+t.g+","+t.b+")";case"rgba":return t=this.toRGB(),"rgba("+t.r+","+t.g+","+t.b+","+t.a+")";case"hsl":return t=this.toHSL(),"hsl("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%)";case"hsla":return t=this.toHSL(),"hsla("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%,"+t.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return t}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(e){return[e[1],e[2],e[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1]}}],colorNameToHex:function(e){return void 0!==this.colors[e.toLowerCase()]&&this.colors[e.toLowerCase()]}};var n={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null},i=function(i,a){if(this.element=e(i).addClass("colorpicker-element"),this.options=e.extend(!0,{},n,this.element.data(),a),this.component=this.options.component,this.component=!1!==this.component&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=!0===this.options.container?this.element:this.options.container,this.container=!1!==this.container&&e(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=new t(!1!==this.options.color?this.options.color:this.getValue(),this.options.colorSelectors),this.format=!1!==this.options.format?this.options.format:this.color.origFormat,this.picker=e(this.options.template),this.options.customClass&&this.picker.addClass(this.options.customClass),this.options.inline?this.picker.addClass("colorpicker-inline colorpicker-visible"):this.picker.addClass("colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),("rgba"===this.format||"hsla"===this.format||!1===this.options.format)&&this.picker.addClass("colorpicker-with-alpha"),"right"===this.options.align&&this.picker.addClass("colorpicker-right"),this.options.colorSelectors){var r=this;e.each(this.options.colorSelectors,function(t,n){var i=e("<i />").css("background-color",n).data("class",t);i.click(function(){r.setValue(e(this).css("background-color"))}),r.picker.find(".colorpicker-selectors").append(i)}),this.picker.find(".colorpicker-selectors").show()}this.picker.on("mousedown.colorpicker touchstart.colorpicker",e.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:e("body")),!1!==this.input&&(this.input.on({"keyup.colorpicker":e.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":e.proxy(this.change,this)}),!1===this.component&&this.element.on({"focus.colorpicker":e.proxy(this.show,this)}),!1===this.options.inline&&this.element.on({"focusout.colorpicker":e.proxy(this.hide,this)})),!1!==this.component&&this.component.on({"click.colorpicker":e.proxy(this.show,this)}),!1===this.input&&!1===this.component&&this.element.on({"click.colorpicker":e.proxy(this.show,this)}),!1!==this.input&&!1!==this.component&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":e.proxy(this.show,this),"focus.colorpicker":e.proxy(this.show,this)}),this.update(),e(e.proxy(function(){this.element.trigger("create")},this))};i.Color=t,i.prototype={constructor:i,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),!1!==this.input&&this.input.off(".colorpicker"),!1!==this.component&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(!1!==this.options.inline||this.options.container)return!1;var e=this.container&&this.container[0]!==document.body?"position":"offset",t=this.component||this.element,n=t[e]();"right"===this.options.align&&(n.left-=this.picker.outerWidth()-t.outerWidth()),this.picker.css({top:n.top+t.outerHeight(),left:n.left})},show:function(t){return!this.isDisabled()&&(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),e(window).on("resize.colorpicker",e.proxy(this.reposition,this)),!t||this.hasInput()&&"color"!==this.input.attr("type")||t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),!1===this.options.inline&&e(window.document).on({"mousedown.colorpicker":e.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),e(window).off("resize.colorpicker",this.reposition),e(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(e){return e=e||this.color.toString(this.format),this.element.data("color",e),e},updateInput:function(e){if(e=e||this.color.toString(this.format),!1!==this.input){if(this.options.colorSelectors){var n=new t(e,this.options.colorSelectors),i=n.toAlias();void 0!==this.options.colorSelectors[i]&&(e=i)}this.input.prop("value",e)}return e},updatePicker:function(e){void 0!==e&&(this.color=new t(e,this.options.colorSelectors));var n=!1===this.options.horizontal?this.options.sliders:this.options.slidersHorz,i=this.picker.find("i");return 0!==i.length?(!1===this.options.horizontal?(n=this.options.sliders,i.eq(1).css("top",n.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",n.alpha.maxTop*(1-this.color.value.a))):(n=this.options.slidersHorz,i.eq(1).css("left",n.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",n.alpha.maxLeft*(1-this.color.value.a))),i.eq(0).css({top:n.saturation.maxTop-this.color.value.b*n.saturation.maxTop,left:this.color.value.s*n.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),e):void 0},updateComponent:function(e){if(e=e||this.color.toString(this.format),!1!==this.component){var t=this.component.find("i").eq(0);t.length>0?t.css({backgroundColor:e}):this.component.css({backgroundColor:e})}return e},update:function(e){var t;return(!1!==this.getValue(!1)||!0===e)&&(t=this.updateComponent(),this.updateInput(t),this.updateData(t),this.updatePicker()),t},setValue:function(e){this.color=new t(e,this.options.colorSelectors),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:e})},getValue:function(e){e=void 0===e?"#000000":e;var t;return t=this.hasInput()?this.input.val():this.element.data("color"),(void 0===t||""===t||null===t)&&(t=e),t},hasInput:function(){return!1!==this.input},isDisabled:function(){return!!this.hasInput()&&!0===this.input.prop("disabled")},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(t){t.pageX||t.pageY||!t.originalEvent||(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var n=e(t.target),i=n.closest("div"),a=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!i.is(".colorpicker")){if(i.is(".colorpicker-saturation"))this.currentSlider=e.extend({},a.saturation);else if(i.is(".colorpicker-hue"))this.currentSlider=e.extend({},a.hue);else{if(!i.is(".colorpicker-alpha"))return!1;this.currentSlider=e.extend({},a.alpha)}var r=i.offset();this.currentSlider.guide=i.find("i")[0].style,this.currentSlider.left=t.pageX-r.left,this.currentSlider.top=t.pageY-r.top,this.mousePointer={left:t.pageX,top:t.pageY},e(document).on({"mousemove.colorpicker":e.proxy(this.mousemove,this),"touchmove.colorpicker":e.proxy(this.mousemove,this),"mouseup.colorpicker":e.proxy(this.mouseup,this),"touchend.colorpicker":e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){e.pageX||e.pageY||!e.originalEvent||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((e.pageX||this.mousePointer.left)-this.mousePointer.left))),n=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=t+"px",this.currentSlider.guide.top=n+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,t/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,n/this.currentSlider.maxTop),"setAlpha"===this.currentSlider.callTop&&!1===this.options.format&&(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),e(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(e){this.keyup(e)},keyup:function(e){38===e.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===e.keyCode?(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=new t(this.input.val(),this.options.colorSelectors),this.color.origFormat&&!1===this.options.format&&(this.format=this.color.origFormat),!1!==this.getValue(!1)&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},e.colorpicker=i,e.fn.colorpicker=function(t){var n,a=arguments,r=this.each(function(){var r=e(this),o=r.data("colorpicker"),s="object"==typeof t?t:{};o||"string"==typeof t?"string"==typeof t&&(n=o[t].apply(o,Array.prototype.slice.call(a,1))):r.data("colorpicker",new i(this,s))});return"getValue"===t?n:r},e.fn.colorpicker.constructor=i}),function(e,t,n,i){"use strict";var a=function(t,n){this.widget="",this.$element=e(t),this.defaultTime=n.defaultTime,this.disableFocus=n.disableFocus,this.isOpen=n.isOpen,this.minuteStep=n.minuteStep,this.modalBackdrop=n.modalBackdrop,this.secondStep=n.secondStep,this.showInputs=n.showInputs,this.showMeridian=n.showMeridian,this.showSeconds=n.showSeconds,this.template=n.template,this.appendWidgetTo=n.appendWidgetTo,this.upArrowStyle=n.upArrowStyle,this.downArrowStyle=n.downArrowStyle,this.containerClass=n.containerClass,this._init()};a.prototype={constructor:a,_init:function(){var t=this;this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")?(this.$element.parent(".input-append, .input-prepend").find(".add-on").length?this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":e.proxy(this.showWidget,this)}):this.$element.closest(this.containerClass).find(".add-on").on({"click.timepicker":e.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this)})):this.template?this.$element.on({"focus.timepicker":e.proxy(this.showWidget,this),"click.timepicker":e.proxy(this.showWidget,this),"blur.timepicker":e.proxy(this.blurElement,this)}):this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this)}),!1!==this.template?this.$widget=e(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",e.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&!1!==this.$widget&&this.$widget.find("input").each(function(){e(this).on({"click.timepicker":function(){e(this).select()},"keydown.timepicker":e.proxy(t.widgetKeydown,t)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=void 0,this.updateFromElementVal()},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else 0===this.hour?this.hour=23:this.hour--;this.update()},decrementMinute:function(e){var t;t=e?this.minute-e:this.minute-this.minuteStep,t<0?(this.decrementHour(),this.minute=t+60):this.minute=t,this.update()},decrementSecond:function(){var e=this.second-this.secondStep;e<0?(this.decrementMinute(!0),this.second=e+60):this.second=e,this.update()},elementKeydown:function(e){switch(e.keyCode){case 9:switch(this.updateFromElementVal(),this.highlightedUnit){
case"hour":e.preventDefault(),this.highlightNextUnit();break;case"minute":(this.showMeridian||this.showSeconds)&&(e.preventDefault(),this.highlightNextUnit());break;case"second":this.showMeridian&&(e.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:e.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(e.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:e.preventDefault(),this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(e.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(e,t,n,i){return e=e<10?"0"+e:e,t=t<10?"0"+t:t,n=n<10?"0"+n:n,e+":"+t+(this.showSeconds?":"+n:"")+(this.showMeridian?" "+i:"")},getCursorPosition:function(){var e=this.$element.get(0);if("selectionStart"in e)return e.selectionStart;if(n.selection){e.focus();var t=n.selection.createRange(),i=n.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-i}},getTemplate:function(){var e,t,n,i,a,r;switch(this.showInputs?(t='<input type="text" name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"/>',n='<input type="text" name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"/>',i='<input type="text" name="second" class="bootstrap-timepicker-second form-control" maxlength="2"/>',a='<input type="text" name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"/>'):(t='<span class="bootstrap-timepicker-hour"></span>',n='<span class="bootstrap-timepicker-minute"></span>',i='<span class="bootstrap-timepicker-second"></span>',a='<span class="bootstrap-timepicker-meridian"></span>'),r='<table><tr><td><a href="#" data-action="incrementHour"><i class="'+this.upArrowStyle+'"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="'+this.upArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="'+this.upArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="'+this.upArrowStyle+'"></i></a></td>':"")+"</tr><tr><td>"+t+'</td> <td class="separator">:</td><td>'+n+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+i+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+a+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="'+this.downArrowStyle+'"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="'+this.downArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+"</tr></table>",this.template){case"modal":e='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">×</a><h3>Pick a Time</h3></div><div class="modal-content">'+r+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":e='<div class="bootstrap-timepicker-widget dropdown-menu">'+r+"</div>"}return e},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){!1!==this.isOpen&&(this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),e(n).off("mousedown.timepicker"),this.isOpen=!1)},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var e=this.$element.get(0);this.highlightedUnit="hour",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(0,2)},0)},highlightMinute:function(){var e=this.$element.get(0);this.highlightedUnit="minute",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(3,5)},0)},highlightSecond:function(){var e=this.$element.get(0);this.highlightedUnit="second",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(6,8)},0)},highlightMeridian:function(){var e=this.$element.get(0);this.highlightedUnit="meridian",e.setSelectionRange&&(this.showSeconds?setTimeout(function(){e.setSelectionRange(9,11)},0):setTimeout(function(){e.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}if(23===this.hour)return void(this.hour=0);this.hour++,this.update()},incrementMinute:function(e){var t;t=e?this.minute+e:this.minute+this.minuteStep-this.minute%this.minuteStep,t>59?(this.incrementHour(),this.minute=t-60):this.minute=t,this.update()},incrementSecond:function(){var e=this.second+this.secondStep-this.second%this.secondStep;e>59?(this.incrementMinute(!0),this.second=e-60):this.second=e,this.update()},remove:function(){e("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(e){if(this.$element.val())this.updateFromElementVal();else if("current"===e){var t=new Date,n=t.getHours(),i=Math.floor(t.getMinutes()/this.minuteStep)*this.minuteStep,a=Math.floor(t.getSeconds()/this.secondStep)*this.secondStep,r="AM";this.showMeridian&&(0===n?n=12:n>=12?(n>12&&(n-=12),r="PM"):r="AM"),this.hour=n,this.minute=i,this.second=a,this.meridian=r,this.update()}else!1===e?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(e)},setTime:function(e){var t,n;this.showMeridian?(t=e.split(" "),n=t[0].split(":"),this.meridian=t[1]):n=e.split(":"),this.hour=parseInt(n[0],10),this.minute=parseInt(n[1],10),this.second=parseInt(n[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.showMeridian?(this.hour>12?this.hour=12:this.hour<1&&(this.hour=12),"am"===this.meridian||"a"===this.meridian?this.meridian="AM":"pm"!==this.meridian&&"p"!==this.meridian||(this.meridian="PM"),"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")):this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0),this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59)),this.update()},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){var t=this;e(n).on("mousedown.timepicker",function(n){0===e(n.target).closest(".bootstrap-timepicker-widget").length&&t.hideWidget()}),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.disableFocus&&this.$element.blur(),this.updateFromElementVal(),"modal"===this.template&&this.$widget.modal?this.$widget.modal("show").on("hidden",e.proxy(this.hideWidget,this)):!1===this.isOpen&&this.$widget.addClass("open"),this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM",this.update()},update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.updateElement(),this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var e=this.$element.val();e&&this.setTime(e)},updateWidget:function(){if(!1!==this.$widget){var e=this.hour<10?"0"+this.hour:this.hour,t=this.minute<10?"0"+this.minute:this.minute,n=this.second<10?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(e),this.$widget.find("input.bootstrap-timepicker-minute").val(t),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(n),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(e),this.$widget.find("span.bootstrap-timepicker-minute").text(t),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(n),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(!1!==this.$widget){var t=e("input.bootstrap-timepicker-hour",this.$widget).val()+":"+e("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+e("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+e("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setTime(t)}},widgetClick:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target).closest("a").data("action");n&&this[n]()},widgetKeydown:function(t){var n=e(t.target).closest("input"),i=n.attr("name");switch(t.keyCode){case 9:if(this.showMeridian){if("meridian"===i)return this.hideWidget()}else if(this.showSeconds){if("second"===i)return this.hideWidget()}else if("minute"===i)return this.hideWidget();this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:switch(t.preventDefault(),i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}break;case 40:switch(t.preventDefault(),i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}}}},e.fn.timepicker=function(t){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var i=e(this),r=i.data("timepicker"),o="object"==typeof t&&t;r||i.data("timepicker",r=new a(this,e.extend({},e.fn.timepicker.defaults,o,e(this).data()))),"string"==typeof t&&r[t].apply(r,n)})},e.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:".bootstrap-timepicker",upArrowStyle:"glyphicon glyphicon-chevron-up",downArrowStyle:"glyphicon glyphicon-chevron-down",containerClass:"bootstrap-timepicker"},e.fn.timepicker.Constructor=a}(jQuery,window,document),function(e){e.fn.extend({slimScroll:function(n){var i={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},a=e.extend(i,n);return this.each(function(){function i(t){if(c){var t=t||window.event,n=0;t.wheelDelta&&(n=-t.wheelDelta/120),t.detail&&(n=t.detail/3);var i=t.target||t.srcTarget||t.srcElement;e(i).closest("."+a.wrapperClass).is(w.parent())&&r(n,!0),t.preventDefault&&!b&&t.preventDefault(),b||(t.returnValue=!1)}}function r(e,t,n){b=!1;var i=e,r=w.outerHeight()-_.outerHeight();if(t&&(i=parseInt(_.css("top"))+e*parseInt(a.wheelStep)/100*_.outerHeight(),i=Math.min(Math.max(i,0),r),i=e>0?Math.ceil(i):Math.floor(i),_.css({top:i+"px"})),m=parseInt(_.css("top"))/(w.outerHeight()-_.outerHeight()),i=m*(w[0].scrollHeight-w.outerHeight()),n){i=e;var o=i/w[0].scrollHeight*w.outerHeight();o=Math.min(Math.max(o,0),r),_.css({top:o+"px"})}w.scrollTop(i),w.trigger("slimscrolling",~~i),s(),l()}function o(){p=Math.max(w.outerHeight()/w[0].scrollHeight*w.outerHeight(),v),_.css({height:p+"px"});var e=p==w.outerHeight()?"none":"block";_.css({display:e})}function s(){if(o(),clearTimeout(u),m==~~m){if(b=a.allowPageScroll,g!=m){var e=0==~~m?"top":"bottom";w.trigger("slimscroll",e)}}else b=!1;if(g=m,p>=w.outerHeight())return void(b=!0);_.stop(!0,!0).fadeIn("fast"),a.railVisible&&D.stop(!0,!0).fadeIn("fast")}function l(){a.alwaysVisible||(u=setTimeout(function(){a.disableFadeOut&&c||d||h||(_.fadeOut("slow"),D.fadeOut("slow"))},1e3))}var c,d,h,u,f,p,m,g,y="<div></div>",v=30,b=!1,w=e(this);if(w.parent().hasClass(a.wrapperClass)){var C=w.scrollTop();if(_=w.siblings("."+a.barClass),D=w.siblings("."+a.railClass),o(),e.isPlainObject(n)){if("height"in n&&"auto"==n.height){w.parent().css("height","auto"),w.css("height","auto");var x=w.parent().parent().height();w.parent().css("height",x),w.css("height",x)}else if("height"in n){var k=n.height;w.parent().css("height",k),w.css("height",k)}if("scrollTo"in n)C=parseInt(a.scrollTo);else if("scrollBy"in n)C+=parseInt(a.scrollBy);else if("destroy"in n)return _.remove(),D.remove(),void w.unwrap();r(C,!1,!0)}}else if(!(e.isPlainObject(n)&&"destroy"in n)){a.height="auto"==a.height?w.parent().height():a.height;var S=e(y).addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,height:a.height});w.css({overflow:"hidden",width:a.width,height:a.height});var D=e(y).addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),_=e(y).addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),T="right"==a.position?{right:a.distance}:{left:a.distance};D.css(T),_.css(T),w.wrap(S),w.parent().append(_),w.parent().append(D),a.railDraggable&&_.bind("mousedown",function(n){var i=e(document);return h=!0,t=parseFloat(_.css("top")),pageY=n.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,_.css("top",currTop),r(0,_.position().top,!1)}),i.bind("mouseup.slimscroll",function(e){h=!1,l(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),D.hover(function(){s()},function(){l()}),_.hover(function(){d=!0},function(){d=!1}),w.hover(function(){c=!0,s(),l()},function(){c=!1,l()}),w.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(f=e.originalEvent.touches[0].pageY)}),w.bind("touchmove",function(e){if(b||e.originalEvent.preventDefault(),e.originalEvent.touches.length){r((f-e.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),f=e.originalEvent.touches[0].pageY}}),o(),"bottom"===a.start?(_.css({top:w.outerHeight()-_.outerHeight()}),r(0,!0)):"top"!==a.start&&(r(e(a.start).position().top,null,!0),a.alwaysVisible||_.hide()),function(e){window.addEventListener?(e.addEventListener("DOMMouseScroll",i,!1),e.addEventListener("mousewheel",i,!1)):document.attachEvent("onmousewheel",i)}(this)}}),this}}),e.fn.extend({slimscroll:e.fn.slimScroll})}(jQuery),function(e){function t(e,t,a){var r=e[0],o=/er/.test(a)?m:/bl/.test(a)?f:h,s=a==g?{checked:r[h],disabled:r[f],indeterminate:"true"==e.attr(m)||"false"==e.attr(p)}:r[o];if(/^(ch|di|in)/.test(a)&&!s)n(e,o);else if(/^(un|en|de)/.test(a)&&s)i(e,o);else if(a==g)for(o in s)s[o]?n(e,o,!0):i(e,o,!0);else t&&"toggle"!=a||(t||e[w]("ifClicked"),s?r[y]!==d&&i(e,o):n(e,o))}function n(t,n,a){var g=t[0],w=t.parent(),C=n==h,k=n==m,S=n==f,D=k?p:C?u:"enabled",_=r(t,D+o(g[y])),T=r(t,n+o(g[y]));if(!0!==g[n]){if(!a&&n==h&&g[y]==d&&g.name){var E=t.closest("form"),A='input[name="'+g.name+'"]',A=E.length?E.find(A):e(A);A.each(function(){this!==g&&e(this).data(l)&&i(e(this),n)})}k?(g[n]=!0,g[h]&&i(t,h,"force")):(a||(g[n]=!0),C&&g[m]&&i(t,m,!1)),s(t,C,n,a)}g[f]&&r(t,x,!0)&&w.find("."+c).css(x,"default"),w[v](T||r(t,n)||""),S?w.attr("aria-disabled","true"):w.attr("aria-checked",k?"mixed":"true"),w[b](_||r(t,D)||"")}function i(e,t,n){var i=e[0],a=e.parent(),l=t==h,d=t==m,g=t==f,w=d?p:l?u:"enabled",C=r(e,w+o(i[y])),k=r(e,t+o(i[y]));!1!==i[t]&&(!d&&n&&"force"!=n||(i[t]=!1),s(e,l,w,n)),!i[f]&&r(e,x,!0)&&a.find("."+c).css(x,"pointer"),a[b](k||r(e,t)||""),g?a.attr("aria-disabled","false"):a.attr("aria-checked","false"),a[v](C||r(e,w)||"")}function a(t,n){t.data(l)&&(t.parent().html(t.attr("style",t.data(l).s||"")),n&&t[w](n),t.off(".i").unwrap(),e(C+'[for="'+t[0].id+'"]').add(t.closest(C)).off(".i"))}function r(e,t,n){if(e.data(l))return e.data(l).o[t+(n?"":"Class")]}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e,t,n,i){i||(t&&e[w]("ifToggled"),e[w]("ifChanged")[w]("if"+o(n)))}var l="iCheck",c=l+"-helper",d="radio",h="checked",u="un"+h,f="disabled",p="determinate",m="in"+p,g="update",y="type",v="addClass",b="removeClass",w="trigger",C="label",x="cursor",k=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);e.fn[l]=function(r,o){var s='input[type="checkbox"], input[type="'+d+'"]',u=e(),p=function(t){t.each(function(){var t=e(this);u=t.is(s)?u.add(t):u.add(t.find(s))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(r))return r=r.toLowerCase(),p(this),u.each(function(){var n=e(this);"destroy"==r?a(n,"ifDestroyed"):t(n,!0,r),e.isFunction(o)&&o()});if("object"!=typeof r&&r)return this;var x=e.extend({checkedClass:h,disabledClass:f,indeterminateClass:m,labelHover:!0,aria:!1},r),S=x.handle,D=x.hoverClass||"hover",_=x.focusClass||"focus",T=x.activeClass||"active",E=!!x.labelHover,A=x.labelHoverClass||"hover",N=0|(""+x.increaseArea).replace("%","");return"checkbox"!=S&&S!=d||(s='input[type="'+S+'"]'),-50>N&&(N=-50),p(this),u.each(function(){var r=e(this);a(r);var o=this,s=o.id,u=-N+"%",p=100+2*N+"%",p={position:"absolute",top:u,left:u,display:"block",width:p,height:p,margin:0,padding:0,background:"#fff",border:0,opacity:0},u=k?{position:"absolute",visibility:"hidden"}:N?p:{position:"absolute",opacity:0},m="checkbox"==o[y]?x.checkboxClass||"icheckbox":x.radioClass||"i"+d,S=e(C+'[for="'+s+'"]').add(r.closest(C)),R=!!x.aria,I=l+"-"+Math.random().toString(36).replace("0.",""),M='<div class="'+m+'" '+(R?'role="'+o[y]+'" ':"");S.length&&R&&S.each(function(){M+='aria-labelledby="',this.id?M+=this.id:(this.id=I,M+=I),M+='"'}),M=r.wrap(M+"/>")[w]("ifCreated").parent().append(x.insert),p=e('<ins class="'+c+'"/>').css(p).appendTo(M),r.data(l,{o:x,s:r.attr("style")}).css(u),x.inheritClass&&M[v](o.className||""),x.inheritID&&s&&M.attr("id",l+"-"+s),"static"==M.css("position")&&M.css("position","relative"),t(r,!0,g),S.length&&S.on("click.i mouseover.i mouseout.i touchbegin.i touchend.i",function(n){var i=n[y],a=e(this);if(!o[f]){if("click"==i){if(e(n.target).is("a"))return;t(r,!1,!0)}else E&&(/ut|nd/.test(i)?(M[b](D),a[b](A)):(M[v](D),a[v](A)));if(!k)return!1;n.stopPropagation()}}),r.on("click.i focus.i blur.i keyup.i keydown.i keypress.i",function(e){var t=e[y];return e=e.keyCode,"click"!=t&&("keydown"==t&&32==e?(o[y]==d&&o[h]||(o[h]?i(r,h):n(r,h)),!1):void("keyup"==t&&o[y]==d?!o[h]&&n(r,h):/us|ur/.test(t)&&M["blur"==t?b:v](_)))}),p.on("click mousedown mouseup mouseover mouseout touchbegin.i touchend.i",function(e){var n=e[y],i=/wn|up/.test(n)?T:D;if(!o[f]){if("click"==n?t(r,!1,!0):(/wn|er|in/.test(n)?M[v](i):M[b](i+" "+T),S.length&&E&&i==D&&S[/ut|nd/.test(n)?b:v](A)),!k)return!1;e.stopPropagation()}})})}}(window.jQuery||window.Zepto),function(){"use strict";function e(t,i){var a;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=this,s=0,l=r.length;s<l;s++)o[r[s]]=function(e,t){return function(){return e.apply(t,arguments)}}(o[r[s]],o);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var a=Node.prototype.removeEventListener;"click"===e?a.call(t,e,n.hijacked||n,i):a.call(t,e,n,i)},t.addEventListener=function(e,n,i){var a=Node.prototype.addEventListener;"click"===e?a.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):a.call(t,e,n,i)}),"function"==typeof t.onclick&&(a=t.onclick,t.addEventListener("click",function(e){a(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,a=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=i&&/OS [6-7]_\d/.test(navigator.userAgent),o=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!a){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,o,s,l,c,d=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(c=e.changedTouches[0],d=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||d,d.fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(s=d.tagName.toLowerCase())){if(t=this.findControl(d)){if(this.focus(d),n)return!1;d=t}}else if(this.needsFocus(d))return e.timeStamp-o>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(d),this.sendClick(d,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return!(!i||a||!(l=d.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(d)||(e.preventDefault(),this.sendClick(d,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,a;if(void 0===window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(o&&(a=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),a[1]>=10&&a[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}();var wysihtml5,Base,Handlebars;if(Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get&&function(){var e=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return e.get.call(this)},set:function(t){return e.set.call(this,t)}})}(),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),wysihtml5={version:"0.4.15",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\ufeff",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46},function(e,t){"function"==typeof define&&define.amd?define(e):t.rangy=e()}(function(){function e(e,t){var n=typeof e[t];return n==k||!(n!=x||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=x||!e[t])}function n(e,t){return typeof e[t]!=S}function i(e){return function(t,n){for(var i=n.length;i--;)if(!e(t,n[i]))return!1;return!0}}function a(e){return e&&A(e,E)&&R(e,T)}function r(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function o(n){t(window,"console")&&e(window.console,"log")&&window.console.log(n)}function s(e,t){t?window.alert(e):o(e)}function l(e){M.initialized=!0,M.supported=!1,s("Rangy is not supported on this page in your browser. Reason: "+e,M.config.alertOnFail)}function c(e){s("Rangy warning: "+e,M.config.alertOnWarn)}function d(e){return e.message||e.description||e+""}function h(){var t,n,i,s,c,h,u,p,m;if(!M.initialized){if(n=!1,i=!1,e(document,"createRange")&&(t=document.createRange(),A(t,_)&&R(t,D)&&(n=!0)),!(s=r(document))||"body"!=s.nodeName.toLowerCase())return void l("No body element found");if(s&&e(s,"createTextRange")&&(t=s.createTextRange(),a(t)&&(i=!0)),!n&&!i)return void l("Neither Range nor TextRange are available");M.initialized=!0,M.features={implementsDomRange:n,implementsTextRange:i};for(u in I)(c=I[u])instanceof f&&c.init(c,M);for(p=0,m=v.length;m>p;++p)try{v[p](M)}catch(e){h="Rangy init listener threw an exception. Continuing. Detail: "+d(e),o(h)}}}function u(e){e=e||window,h();for(var t=0,n=b.length;n>t;++t)b[t](e)}function f(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function p(e,t,n,i){var a=new f(t,n,function(e){if(!e.initialized){e.initialized=!0;try{i(M,e),e.supported=!0}catch(e){var n="Module '"+t+"' failed to load: "+d(e);o(n)}}});I[t]=a}function m(){}function g(){}var y,v,b,w,C,x="object",k="function",S="undefined",D=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],_=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],T=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],E=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],A=i(e),N=i(t),R=i(n),I={},M={version:"1.3alpha.20140804",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:A,areHostObjects:N,
areHostProperties:R,isTextRange:a,getBody:r},features:{},modules:I,config:{alertOnFail:!0,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==S||rangyAutoInitialize}};return M.fail=l,M.warn=c,{}.hasOwnProperty?M.util.extend=function(e,t,n){var i,a,r;for(r in t)t.hasOwnProperty(r)&&(i=e[r],a=t[r],n&&null!==i&&"object"==typeof i&&null!==a&&"object"==typeof a&&M.util.extend(i,a,!0),e[r]=a);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e}:l("hasOwnProperty not supported"),function(){var e,t,n=document.createElement("div");n.appendChild(document.createElement("span")),e=[].slice;try{1==e.call(n.childNodes,0)[0].nodeType&&(t=function(t){return e.call(t,0)})}catch(e){}t||(t=function(e){var t,n,i=[];for(t=0,n=e.length;n>t;++t)i[t]=e[t];return i}),M.util.toArray=t}(),e(document,"addEventListener")?y=function(e,t,n){e.addEventListener(t,n,!1)}:e(document,"attachEvent")?y=function(e,t,n){e.attachEvent("on"+t,n)}:l("Document does not have required addEventListener or attachEvent method"),M.util.addListener=y,v=[],M.init=h,M.addInitListener=function(e){M.initialized?e(M):v.push(e)},b=[],M.addShimListener=function(e){b.push(e)},M.shim=M.createMissingNativeApi=u,f.prototype={init:function(){var e,t,n,i,a=this.dependencies||[];for(e=0,t=a.length;t>e;++e){if(i=a[e],!((n=I[i])&&n instanceof f))throw Error("required module '"+i+"' not found");if(n.init(),!n.supported)throw Error("required module '"+i+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+e)},warn:function(e){M.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){M.warn("DEPRECATED: "+e+" in module "+this.name+"is deprecated. Please use "+t+" instead")},createError:function(e){return Error("Error in Rangy "+this.name+" module: "+e)}},M.createModule=function(e){var t,n,i;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]),i=p(!1,e,n,t),M.initialized&&i.init()},M.createCoreModule=function(e,t,n){p(!0,e,t,n)},M.RangePrototype=m,M.rangePrototype=new m,M.selectionPrototype=new g,w=!1,C=function(){w||(w=!0,!M.initialized&&M.config.autoInitialize&&h())},typeof window==S?void l("No window found"):typeof document==S?void l("No document found"):(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",C,!1),y(window,"load",C),M.createCoreModule("DomUtil",[],function(e,t){function n(e){var t;return typeof e.namespaceURI==L||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function i(e){var t=e.parentNode;return 1==t.nodeType?t:null}function a(e){for(var t=0;e=e.previousSibling;)++t;return t}function r(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function o(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(R(i,n))return n;return null}function s(e,t,n){for(var i=n?t:t.parentNode;i;){if(i===e)return!0;i=i.parentNode}return!1}function l(e,t){return s(e,t,!0)}function c(e,t,n){for(var i,a=n?e:e.parentNode;a;){if((i=a.parentNode)===t)return a;a=i}return null}function d(e){var t=e.nodeType;return 3==t||4==t||8==t}function h(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function u(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function f(e,t,n){var i,r,o=e.cloneNode(!1);if(o.deleteData(0,t),e.deleteData(t,e.length-t),u(o,e),n)for(i=0;r=n[i++];)r.node==e&&r.offset>t?(r.node=o,r.offset-=t):r.node==e.parentNode&&r.offset>a(e)&&++r.offset;return o}function p(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=L)return e.ownerDocument;if(typeof e.document!=L)return e.document;if(e.parentNode)return p(e.parentNode);throw t.createError("getDocument: no document found for node")}function m(e){var n=p(e);if(typeof n.defaultView!=L)return n.defaultView;if(typeof n.parentWindow!=L)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function g(e){if(typeof e.contentDocument!=L)return e.contentDocument;if(typeof e.contentWindow!=L)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function y(e){if(typeof e.contentWindow!=L)return e.contentWindow;if(typeof e.contentDocument!=L)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function v(e){return e&&P.isHostMethod(e,"setTimeout")&&P.isHostObject(e,"document")}function b(e,t,n){var i;if(e?P.isHostProperty(e,"nodeType")?i=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?g(e):p(e):v(e)&&(i=e.document):i=document,!i)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return i}function w(e){for(var t;t=e.parentNode;)e=t;return e}function C(e,n,i,r){var s,l,d,h,u;if(e==i)return n===r?0:r>n?-1:1;if(s=c(i,e,!0))return n<=a(s)?-1:1;if(s=c(e,i,!0))return a(s)<r?-1:1;if(!(l=o(e,i)))throw Error("comparePoints error: nodes have no common ancestor");if(d=e===l?l:c(e,l,!0),h=i===l?l:c(i,l,!0),d===h)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(u=l.firstChild;u;){if(u===d)return-1;if(u===h)return 1;u=u.nextSibling}}function x(e){try{return e.parentNode,!1}catch(e){return!0}}function k(e){if(!e)return"[No node]";if(I&&x(e))return"[Broken node]";if(d(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+a(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function S(e){for(var t,n=p(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function D(e){this.root=e,this._next=e}function _(e){return new D(e)}function T(e,t){this.node=e,this.offset=t}function E(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var A,N,R,I,M,L="undefined",P=e.util;P.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),P.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method"),A=document.createElement("div"),P.areHostMethods(A,["insertBefore","appendChild","cloneNode"]||!P.areHostObjects(A,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),P.isHostProperty(A,"innerHTML")||t.fail("Element is missing innerHTML property"),N=document.createTextNode("test"),P.areHostMethods(N,["splitText","deleteData","insertData","appendData","cloneNode"]||!P.areHostObjects(A,["previousSibling","nextSibling","childNodes","parentNode"])||!P.areHostProperties(N,["data"]))||t.fail("Incomplete Text Node implementation"),R=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},I=!1,function(){var t,n=document.createElement("b");n.innerHTML="1",t=n.firstChild,n.innerHTML="<br>",I=x(t),e.features.crashyTextNodes=I}(),typeof window.getComputedStyle!=L?M=function(e,t){return m(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=L?M=function(e,t){return e.currentStyle[t]}:t.fail("No means of obtaining computed style properties found"),D.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},T.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+k(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},E.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},E.prototype.toString=function(){return this.message},e.dom={arrayContains:R,isHtmlNamespace:n,parentElement:i,getNodeIndex:a,getNodeLength:r,getCommonAncestor:o,isAncestorOf:s,isOrIsAncestorOf:l,getClosestAncestorIn:c,isCharacterDataNode:d,isTextOrCommentNode:h,insertAfter:u,splitDataNode:f,getDocument:p,getWindow:m,getIframeWindow:y,getIframeDocument:g,getBody:P.getBody,isWindow:v,getContentDocument:b,getRootContainer:w,comparePoints:C,isBrokenNode:x,inspectNode:k,getComputedStyleProperty:M,fragmentFromNodeChildren:S,createIterator:_,DomPosition:T},e.DOMException=E}),M.createCoreModule("DomRange",["DomUtil"],function(e){function t(e,t){return 3!=e.nodeType&&(oe(e,t.startContainer)||oe(e,t.endContainer))}function n(e){return e.document||se(e.startContainer)}function i(e){return new ne(e.parentNode,re(e))}function a(e){return new ne(e.parentNode,re(e)+1)}function r(e,t,n){var i=11==e.nodeType?e.firstChild:e;return ae(t)?n==t.length?ee.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:ce(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),i}function o(e,t,i){if(S(e),S(t),n(t)!=n(e))throw new ie("WRONG_DOCUMENT_ERR");var a=le(e.startContainer,e.startOffset,t.endContainer,t.endOffset),r=le(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return i?0>=a&&r>=0:0>a&&r>0}function s(e){var t,i,a,r;for(a=n(e.range).createDocumentFragment();i=e.next();){if(t=e.isPartiallySelectedSubtree(),i=i.cloneNode(!t),t&&(r=e.getSubtreeIterator(),i.appendChild(s(r)),r.detach()),10==i.nodeType)throw new ie("HIERARCHY_REQUEST_ERR");a.appendChild(i)}return a}function l(e,t,n){var i,a,r,o;for(n=n||{stop:!1};r=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(r))return void(n.stop=!0);if(o=e.getSubtreeIterator(),l(o,t,n),o.detach(),n.stop)return}else for(i=ee.createIterator(r);a=i.next();)if(!1===t(a))return void(n.stop=!0)}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach()):e.remove()}function d(e){for(var t,i,a=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=e.getSubtreeIterator(),t.appendChild(d(i)),i.detach()):e.remove(),10==t.nodeType)throw new ie("HIERARCHY_REQUEST_ERR");a.appendChild(t)}return a}function h(e,t,n){var i,a,r=!(!t||!t.length),o=!!n;return r&&(i=RegExp("^("+t.join("|")+")$")),a=[],l(new f(e,!1),function(t){var s,l;(!r||i.test(t.nodeType))&&(!o||n(t))&&(s=e.startContainer,t==s&&ae(s)&&e.startOffset==s.length||(l=e.endContainer,t==l&&ae(l)&&0==e.endOffset||a.push(t)))}),a}function u(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+ee.inspectNode(e.startContainer)+":"+e.startOffset+", "+ee.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function f(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&ae(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||ae(this.sc)?de(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||ae(this.ec)?de(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function p(e){return function(t,n){for(var i,a=n?t:t.parentNode;a;){if(i=a.nodeType,ue(e,i))return a;a=a.parentNode}return null}}function m(e,t){if(F(e,t))throw new ie("INVALID_NODE_TYPE_ERR")}function g(e,t){if(!ue(t,e.nodeType))throw new ie("INVALID_NODE_TYPE_ERR")}function y(e,t){if(0>t||t>(ae(e)?e.length:e.childNodes.length))throw new ie("INDEX_SIZE_ERR")}function v(e,t){if(B(e,!0)!==B(t,!0))throw new ie("WRONG_DOCUMENT_ERR")}function b(e){if(j(e,!0))throw new ie("NO_MODIFICATION_ALLOWED_ERR")}function w(e,t){if(!e)throw new ie(t)}function C(e){return pe&&ee.isBrokenNode(e)||!ue(P,e.nodeType)&&!B(e,!0)}function x(e,t){return t<=(ae(e)?e.length:e.childNodes.length)}function k(e){return!!e.startContainer&&!!e.endContainer&&!C(e.startContainer)&&!C(e.endContainer)&&x(e.startContainer,e.startOffset)&&x(e.endContainer,e.endOffset)}function S(e){if(!k(e))throw Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function D(e,t){var n,i,a,r,o;S(e),n=e.startContainer,i=e.startOffset,a=e.endContainer,r=e.endOffset,o=n===a,ae(a)&&r>0&&r<a.length&&ce(a,r,t),ae(n)&&i>0&&i<n.length&&(n=ce(n,i,t),o?(r-=i,a=n):a==n.parentNode&&r>=re(n)&&r++,i=0),e.setStartAndEnd(n,i,a,r)}function _(e){S(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function T(e){e.START_TO_START=V,e.START_TO_END=z,e.END_TO_END=G,e.END_TO_START=K,e.NODE_BEFORE=X,e.NODE_AFTER=J,e.NODE_BEFORE_AND_AFTER=Q,e.NODE_INSIDE=Z}function E(e){T(e),T(e.prototype)}function A(e,t){return function(){var n,i,r,o,s,c,d;return S(this),n=this.startContainer,i=this.startOffset,r=this.commonAncestorContainer,o=new f(this,!0),n!==r&&(s=de(n,r,!0),c=a(s),n=c.node,i=c.offset),l(o,b),o.reset(),d=e(o),o.detach(),t(this,n,i,n,i),d}}function N(n,r){function o(e,t){return function(n){g(n,L),g(fe(n),P);var r=(e?i:a)(n);(t?s:l)(this,r.node,r.offset)}}function s(e,t,n){var i=e.endContainer,a=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((fe(t)!=fe(i)||1==le(t,n,i,a))&&(i=t,a=n),r(e,t,n,i,a))}function l(e,t,n){var i=e.startContainer,a=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((fe(t)!=fe(i)||-1==le(t,n,i,a))&&(i=t,a=n),r(e,i,a,t,n))}var h=function(){};h.prototype=e.rangePrototype,n.prototype=new h,te.extend(n.prototype,{setStart:function(e,t){m(e,!0),y(e,t),s(this,e,t)},setEnd:function(e,t){m(e,!0),y(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],i=t,a=n;switch(e.length){case 3:a=e[2];break;case 4:i=e[2],a=e[3]}r(this,t,n,i,a)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(e){S(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){m(e,!0),r(this,e,0,e,he(e))},selectNode:function(e){m(e,!1),g(e,L);var t=i(e),n=a(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:A(d,r),deleteContents:A(c,r),canSurroundContents:function(){var e,n;return S(this),b(this.startContainer),b(this.endContainer),e=new f(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this),e.detach(),!n},splitBoundaries:function(){D(this)},splitBoundariesPreservingPositions:function(e){D(this,e)},normalizeBoundaries:function(){var e,t,n,i,a,o,s,l,c;S(this),e=this.startContainer,t=this.startOffset,n=this.endContainer,i=this.endOffset,a=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(n=e,i=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},o=function(a){var r,o,s=a.previousSibling;s&&s.nodeType==a.nodeType&&(e=a,r=a.length,t=s.length,a.insertData(0,s.data),s.parentNode.removeChild(s),e==n?(i+=t,n=e):n==a.parentNode&&(o=re(a),i==o?(n=a,i=r):i>o&&i--))},s=!0,ae(n)?n.length==i&&a(n):(i>0&&(l=n.childNodes[i-1])&&ae(l)&&a(l),s=!this.collapsed),s?ae(e)?0==t&&o(e):t<e.childNodes.length&&(c=e.childNodes[t])&&ae(c)&&o(c):(e=n,t=i),r(this,e,t,n,i)},collapseToPoint:function(e,t){m(e,!0),y(e,t),this.setStartAndEnd(e,t)}}),E(n)}function R(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:ee.getCommonAncestor(e.startContainer,e.endContainer)}function I(e,t,n,i,a){e.startContainer=t,e.startOffset=n,e.endContainer=i,e.endOffset=a,e.document=ee.getDocument(t),R(e)}function M(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,R(this)}var L,P,O,H,$,B,j,F,U,W,Y,q,V,z,G,K,X,J,Q,Z,ee=e.dom,te=e.util,ne=ee.DomPosition,ie=e.DOMException,ae=ee.isCharacterDataNode,re=ee.getNodeIndex,oe=ee.isOrIsAncestorOf,se=ee.getDocument,le=ee.comparePoints,ce=ee.splitDataNode,de=ee.getClosestAncestorIn,he=ee.getNodeLength,ue=ee.arrayContains,fe=ee.getRootContainer,pe=e.features.crashyTextNodes;f.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,ae(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!ae(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){return t(this._current,this.range)},getSubtreeIterator:function(){var e,t,i,a,r,o;return this.isSingleCharacterDataNode?(e=this.range.cloneRange(),e.collapse(!1)):(e=new M(n(this.range)),t=this._current,i=t,a=0,r=t,o=he(t),oe(t,this.sc)&&(i=this.sc,a=this.so),oe(t,this.ec)&&(r=this.ec,o=this.eo),I(e,i,a,r,o)),new f(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},L=[1,3,4,5,7,8,10],P=[2,9,11],O=[5,6,10,12],H=[1,3,4,5,7,8,10,11],$=[1,3,4,5,7,8],B=p([9,11]),j=p(O),F=p([6,10,12]),U=document.createElement("style"),W=!1;try{U.innerHTML="<b>x</b>",W=3==U.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=W,Y=W?function(e){var t,n=this.startContainer,i=se(n);if(!n)throw new ie("INVALID_STATE_ERR");return t=null,1==n.nodeType?t=n:ae(n)&&(t=ee.parentElement(n)),t=null===t||"HTML"==t.nodeName&&ee.isHtmlNamespace(se(t).documentElement)&&ee.isHtmlNamespace(t)?i.createElement("body"):t.cloneNode(!1),t.innerHTML=e,ee.fragmentFromNodeChildren(t)}:function(e){var t=n(this),i=t.createElement("body");return i.innerHTML=e,ee.fragmentFromNodeChildren(i)},q=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],V=0,z=1,G=2,K=3,X=0,J=1,Q=2,Z=3,te.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){var n,i,a,r,o,s;return S(this),v(this.startContainer,t.startContainer),o=e==K||e==V?"start":"end",s=e==z||e==V?"start":"end",n=this[o+"Container"],i=this[o+"Offset"],a=t[s+"Container"],r=t[s+"Offset"],le(n,i,a,r)},insertNode:function(e){if(S(this),g(e,H),b(this.startContainer),oe(e,this.startContainer))throw new ie("HIERARCHY_REQUEST_ERR");var t=r(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t,i;return S(this),this.collapsed?n(this).createDocumentFragment():this.startContainer===this.endContainer&&ae(this.startContainer)?(e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t):(i=new f(this,!0),e=s(i),i.detach(),e)},canSurroundContents:function(){var e,n;return S(this),b(this.startContainer),b(this.endContainer),e=new f(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this),e.detach(),!n},surroundContents:function(e){if(g(e,$),!this.canSurroundContents())throw new ie("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);r(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){var e,t,i;for(S(this),e=new M(n(this)),t=q.length;t--;)i=q[t],e[i]=this[i];return e},toString:function(){var e,t,n;return S(this),e=this.startContainer,e===this.endContainer&&ae(e)?3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"":(t=[],n=new f(this,!0),l(n,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),n.detach(),t.join(""))},compareNode:function(e){var t,n,i,a;if(S(this),t=e.parentNode,n=re(e),!t)throw new ie("NOT_FOUND_ERR");return i=this.comparePoint(t,n),a=this.comparePoint(t,n+1),0>i?a>0?Q:X:a>0?J:Z},comparePoint:function(e,t){return S(this),w(e,"HIERARCHY_REQUEST_ERR"),v(e,this.startContainer),le(e,t,this.startContainer,this.startOffset)<0?-1:le(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Y,toHtml:function(){return _(this)},intersectsNode:function(e,t){var i,a,r,o;return S(this),w(e,"NOT_FOUND_ERR"),se(e)===n(this)&&(i=e.parentNode,a=re(e),w(i,"NOT_FOUND_ERR"),r=le(i,a,this.endContainer,this.endOffset),o=le(i,a+1,this.startContainer,this.startOffset),t?0>=r&&o>=0:0>r&&o>0)},isPointInRange:function(e,t){return S(this),w(e,"HIERARCHY_REQUEST_ERR"),v(e,this.startContainer),le(e,t,this.startContainer,this.startOffset)>=0&&le(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return o(this,e,!1)},intersectsOrTouchesRange:function(e){return o(this,e,!0)},intersection:function(e){var t,n,i;return this.intersectsRange(e)?(t=le(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=le(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange(),-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i):null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==le(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==le(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new ie("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==Z},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,he(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t,n,i=this.cloneRange();return i.selectNode(e),t=i.getNodes([3]),t.length>0?(i.setStart(t[0],0),n=t.pop(),i.setEnd(n,n.length),this.containsRange(i)):this.containsNodeContents(e)},getNodes:function(e,t){return S(this),h(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var i,a,r,o=n(this),s=e.createRange(o);return t=t||ee.getBody(o),s.selectNodeContents(t),i=this.intersection(s),a=0,r=0,i&&(s.setEnd(i.startContainer,i.startOffset),a=(""+s).length,r=a+(""+i).length),{start:a,end:r,containerNode:t}},moveToBookmark:function(e){var t,n,i,a,r,o,s,l=e.containerNode,c=0;for(this.setStart(l,0),this.collapse(!0),t=[l],i=!1,a=!1;!a&&(n=t.pop());)if(3==n.nodeType)r=c+n.length,!i&&e.start>=c&&e.start<=r&&(this.setStart(n,e.start-c),i=!0),i&&e.end>=c&&e.end<=r&&(this.setEnd(n,e.end-c),a=!0),c=r;else for(s=n.childNodes,o=s.length;o--;)t.push(s[o])},getName:function(){return"DomRange"},equals:function(e){return M.rangesEqual(this,e)},isValid:function(){return k(this)},inspect:function(){return u(this)},detach:function(){}}),N(M,I),te.extend(M,{rangeProperties:q,RangeIterator:f,copyComparisonConstants:E,createPrototypeRange:N,inspect:u,toHtml:_,getRangeDocument:n,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=M}),M.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,i,a,r,o,s,l,c,d=e.dom,h=e.util,u=d.DomPosition,f=e.DomRange,p=d.getBody,m=d.getContentDocument,g=d.isCharacterDataNode;e.features.implementsDomRange&&function(){function i(e){for(var t,n=v.length;n--;)t=v[n],e[t]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function a(e,t,n,i,a){var r=e.startContainer!==t||e.startOffset!=n,o=e.endContainer!==i||e.endOffset!=a,s=!e.equals(e.nativeRange);(r||o||s)&&(e.setEnd(i,a),e.setStart(t,n))}var r,o,s,l,c,u,g,y,v=f.rangeProperties;n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,i(this)},f.createPrototypeRange(n,a),r=n.prototype,r.selectNode=function(e){this.nativeRange.selectNode(e),i(this)},r.cloneContents=function(){return this.nativeRange.cloneContents()},r.surroundContents=function(e){this.nativeRange.surroundContents(e),i(this)},r.collapse=function(e){this.nativeRange.collapse(e),i(this)},r.cloneRange=function(){return new n(this.nativeRange.cloneRange())},r.refresh=function(){i(this)},r.toString=function(){return""+this.nativeRange},s=document.createTextNode("test"),p(document).appendChild(s),l=document.createRange(),l.setStart(s,0),l.setEnd(s,0);try{l.setStart(s,1),r.setStart=function(e,t){this.nativeRange.setStart(e,t),i(this)},r.setEnd=function(e,t){this.nativeRange.setEnd(e,t),i(this)},o=function(e){return function(t){this.nativeRange[e](t),i(this)}}}catch(e){r.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}i(this)},r.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}i(this)},o=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(i){this.nativeRange[t](n),this.nativeRange[e](n)}i(this)}}}r.setStartBefore=o("setStartBefore","setEndBefore"),r.setStartAfter=o("setStartAfter","setEndAfter"),r.setEndBefore=o("setEndBefore","setStartBefore"),r.setEndAfter=o("setEndAfter","setStartAfter"),r.selectNodeContents=function(e){this.setStartAndEnd(e,0,d.getNodeLength(e))},l.selectNodeContents(s),l.setEnd(s,3),c=document.createRange(),c.selectNodeContents(s),c.setEnd(s,4),c.setStart(s,2),r.compareBoundaryPoints=-1==l.compareBoundaryPoints(l.START_TO_END,c)&&1==l.compareBoundaryPoints(l.END_TO_START,c)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},u=document.createElement("div"),u.innerHTML="123",g=u.firstChild,y=p(document),y.appendChild(u),l.setStart(g,1),l.setEnd(g,2),l.deleteContents(),"13"==g.data&&(r.deleteContents=function(){this.nativeRange.deleteContents(),i(this)},r.extractContents=function(){var e=this.nativeRange.extractContents();return i(this),e}),y.removeChild(u),y=null,h.isHostMethod(l,"createContextualFragment")&&(r.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),p(document).removeChild(s),r.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return e=m(e,t,"createNativeRange"),e.createRange()}}(),e.features.implementsTextRange&&(a=function(e){var t,n,i,a=e.parentElement(),r=e.duplicate();return r.collapse(!0),t=r.parentElement(),r=e.duplicate(),r.collapse(!1),n=r.parentElement(),i=t==n?t:d.getCommonAncestor(t,n),i==a?i:d.getCommonAncestor(a,i)},r=function(e){return 0==e.compareEndPoints("StartToEnd",e)},o=function(e,t,n,i,a){var r,o,s,l,c,h,f,p,m,y,v,b,w,C,x,k,S=e.duplicate();if(S.collapse(n),r=S.parentElement(),d.isOrIsAncestorOf(t,r)||(r=t),!r.canHaveHTML)return o=new u(r.parentNode,d.getNodeIndex(r)),{boundaryPosition:o,nodeInfo:{nodeIndex:o.offset,containerElement:o.node}};for(s=d.getDocument(r).createElement("span"),s.parentNode&&s.parentNode.removeChild(s),c=n?"StartToStart":"StartToEnd",y=a&&a.containerElement==r?a.nodeIndex:0,v=r.childNodes.length,b=v,w=b;w==v?r.appendChild(s):r.insertBefore(s,r.childNodes[w]),S.moveToElementText(s),0!=(l=S.compareEndPoints(c,e))&&y!=b;){if(-1==l){if(b==y+1)break;y=w}else b=b==y+1?y:w;w=Math.floor((y+b)/2),r.removeChild(s)}if(m=s.nextSibling,-1==l&&m&&g(m)){if(S.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(m.data))for(x=S.duplicate(),k=x.text.replace(/\r\n/g,"\r").length,C=x.moveStart("character",k);-1==(l=x.compareEndPoints("StartToEnd",x));)C++,x.moveStart("character",1);else C=S.text.length;p=new u(m,C)}else h=(i||!n)&&s.previousSibling,f=(i||n)&&s.nextSibling,p=f&&g(f)?new u(f,0):h&&g(h)?new u(h,h.data.length):new u(r,d.getNodeIndex(s));return s.parentNode.removeChild(s),{boundaryPosition:p,nodeInfo:{nodeIndex:w,containerElement:r}}},s=function(e,t){var n,i,a,r,o=e.offset,s=d.getDocument(e.node),l=p(s).createTextRange(),c=g(e.node);return c?(n=e.node,i=n.parentNode):(r=e.node.childNodes,n=o<r.length?r[o]:null,i=e.node),a=s.createElement("span"),a.innerHTML="&#feff;",n?i.insertBefore(a,n):i.appendChild(a),l.moveToElementText(a),l.collapse(!t),i.removeChild(a),c&&l[t?"moveStart":"moveEnd"]("character",o),l},i=function(e){this.textRange=e,this.refresh()},i.prototype=new f(document),i.prototype.refresh=function(){var e,t,n,i=a(this.textRange);r(this.textRange)?t=e=o(this.textRange,i,!0,!0).boundaryPosition:(n=o(this.textRange,i,!0,!1),e=n.boundaryPosition,t=o(this.textRange,i,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},i.prototype.getName=function(){return"WrappedTextRange"},f.copyComparisonConstants(i),l=function(e){var t,n,i;return e.collapsed?s(new u(e.startContainer,e.startOffset),!0):(t=s(new u(e.startContainer,e.startOffset),!0),n=s(new u(e.endContainer,e.endOffset),!1),i=p(f.getRangeDocument(e)).createTextRange(),i.setEndPoint("StartToStart",t),i.setEndPoint("EndToEnd",n),i)},i.rangeToTextRange=l,i.prototype.toTextRange=function(){return l(this)},e.WrappedTextRange=i,(!e.features.implementsDomRange||e.config.preferTextRange)&&(c=function(){return this}(),void 0===c.Range&&(c.Range=i),e.createNativeRange=function(e){return e=m(e,t,"createNativeRange"),p(e).createTextRange()},e.WrappedRange=i)),e.createRange=function(n){return n=m(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=m(e,t,"createRangyRange"),new f(e)},e.createIframeRange=function(n){return t.deprecationNotice("createIframeRange()","createRange(iframeEl)"),e.createRange(n)},e.createIframeRangyRange=function(n){return t.deprecationNotice("createIframeRangyRange()","createRangyRange(iframeEl)"),e.createRangyRange(n)},e.addShimListener(function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),M.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){function n(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function i(e,n){if(e){if(_.isWindow(e))return e;if(e instanceof y)return e.win;var i=_.getContentDocument(e,t,n);return _.getWindow(i)}return window}function a(e){return i(e,"getWinSelection").getSelection()}function r(e){return i(e,"getDocSelection").document.selection}function o(e){var t=!1;return e.anchorNode&&(t=1==_.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function s(e,t,n){var i=n?"end":"start",a=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[a+"Container"],e.focusOffset=t[a+"Offset"]}function l(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function c(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function d(t){var n;return t instanceof A?(n=e.createNativeRange(t.getDocument()),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof N?n=t.nativeRange:P.implementsDomRange&&t instanceof _.getWindow(t.startContainer).Range&&(n=t),n}function h(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!_.isAncestorOf(e[0],e[t]))return!1;return!0}function u(e){var n=e.getNodes();if(!h(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function f(e){return!!e&&void 0!==e.text}function p(e,t){var n=new N(t);e._ranges=[n],s(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function m(t){var n,i,a,r;if(t._ranges.length=0,"None"==t.docSelection.type)c(t);else if(n=t.docSelection.createRange(),f(n))p(t,n);else{for(t.rangeCount=n.length,a=H(n.item(0)),r=0;r<t.rangeCount;++r)i=e.createRange(a),
i.selectNode(n.item(r)),t._ranges.push(i);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,s(t,t._ranges[t.rangeCount-1],!1)}}function g(e,n){var i,a,r=e.docSelection.createRange(),o=u(n),s=H(r.item(0)),l=$(s).createControlRange();for(i=0,a=r.length;a>i;++i)l.add(r.item(i));try{l.add(o)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}l.select(),m(e)}function y(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function v(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function b(e,t){for(var n,i,a=te.length;a--;)if(n=te[a],i=n.selection,"deleteAll"==t)v(i);else if(n.win==e)return"delete"==t?(te.splice(a,1),!0):i;return"deleteAll"==t&&(te.length=0),null}function w(e,n){var i,a,r,o=H(n[0].startContainer),s=$(o).createControlRange();for(i=0,r=n.length;r>i;++i){a=u(n[i]);try{s.add(a)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}s.select(),m(e)}function C(e,t){if(e.win.document!=H(t))throw new R("WRONG_DOCUMENT_ERR")}function x(t){return function(n,i){var a;this.rangeCount?(a=this.getRangeAt(0),a["set"+(t?"Start":"End")](n,i)):(a=e.createRange(this.win.document),a.setStartAndEnd(n,i)),this.setSingleRange(a,this.isBackward())}}function k(e){var t,n,i=[],a=new I(e.anchorNode,e.anchorOffset),r=new I(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(t=0,n=e.rangeCount;n>t;++t)i[t]=A.inspect(e.getRangeAt(t));return"["+o+"(Ranges: "+i.join(", ")+")(anchor: "+a.inspect()+", focus: "+r.inspect()+"]"}var S,D,_,T,E,A,N,R,I,M,L,P,O,H,$,B,j,F,U,W,Y,q,V,z,G,K,X,J,Q,Z,ee,te,ne,ie,ae,re,oe,se;if(e.config.checkSelectionRanges=!0,S="boolean",D="number",_=e.dom,T=e.util,E=T.isHostMethod,A=e.DomRange,N=e.WrappedRange,R=e.DOMException,I=_.DomPosition,P=e.features,O="Control",H=_.getDocument,$=_.getBody,B=A.rangesEqual,j=E(window,"getSelection"),F=T.isHostObject(document,"selection"),P.implementsWinGetSelection=j,P.implementsDocSelection=F,U=F&&(!j||e.config.preferTextRange),U?(M=r,e.isSelectionValid=function(e){var t=i(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||H(n.createRange().parentElement())==t}):j?(M=a,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=M,W=M(),Y=e.createNativeRange(document),q=$(document),V=T.areHostProperties(W,["anchorNode","focusNode","anchorOffset","focusOffset"]),P.selectionHasAnchorAndFocus=V,z=E(W,"extend"),P.selectionHasExtend=z,G=typeof W.rangeCount==D,P.selectionHasRangeCount=G,K=!1,X=!0,J=z?function(t,n){var i=A.getRangeDocument(n),a=e.createRange(i);a.collapseToPoint(n.endContainer,n.endOffset),t.addRange(d(a)),t.extend(n.startContainer,n.startOffset)}:null,T.areHostMethods(W,["addRange","getRangeAt","removeAllRanges"])&&typeof W.rangeCount==D&&P.implementsDomRange&&function(){var t,n,i,a,r,s,l,c,d,h,u,f=window.getSelection();if(f){for(t=f.rangeCount,n=t>1,i=[],a=o(f),r=0;t>r;++r)i[r]=f.getRangeAt(r);for(s=$(document),l=s.appendChild(document.createElement("div")),l.contentEditable="false",c=l.appendChild(document.createTextNode("   ")),d=document.createRange(),d.setStart(c,1),d.collapse(!0),f.addRange(d),X=1==f.rangeCount,f.removeAllRanges(),n||(h=window.navigator.appVersion.match(/Chrome\/(.*?) /),h&&parseInt(h[1])>=36?K=!1:(u=d.cloneRange(),d.setStart(c,0),u.setEnd(c,3),u.setStart(c,2),f.addRange(d),f.addRange(u),K=2==f.rangeCount)),s.removeChild(l),f.removeAllRanges(),r=0;t>r;++r)0==r&&a?J?J(f,i[r]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),f.addRange(i[r])):f.addRange(i[r])}}(),P.selectionSupportsMultipleRanges=K,P.collapsedNonEditableSelectionsSupported=X,Q=!1,q&&E(q,"createControlRange")&&(Z=q.createControlRange(),T.areHostProperties(Z,["item","add"])&&(Q=!0)),P.implementsControlRange=Q,L=V?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},E(W,"getRangeAt")?ee=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:V&&(ee=function(t){var n=H(t.anchorNode),i=e.createRange(n);return i.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),i}),y.prototype=e.selectionPrototype,te=[],ne=function(e){var t,n,a;return e&&e instanceof y?(e.refresh(),e):(e=i(e,"getNativeSelection"),t=b(e),n=M(e),a=F?r(e):null,t?(t.nativeSelection=n,t.docSelection=a,t.refresh()):(t=new y(n,a,e),te.push({win:e,selection:t})),t)},e.getSelection=ne,e.getIframeSelection=function(n){return t.deprecationNotice("getIframeSelection()","getSelection(iframeEl)"),e.getSelection(_.getIframeWindow(n))},ie=y.prototype,!U&&V&&T.areHostMethods(W,["removeAllRanges","addRange"]))ie.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),c(this)},ae=function(e,t){J(e.nativeSelection,t),e.refresh()},ie.addRange=G?function(t,i){var a,r;Q&&F&&this.docSelection.type==O?g(this,t):n(i)&&z?ae(this,t):(K?a=this.rangeCount:(this.removeAllRanges(),a=0),this.nativeSelection.addRange(d(t).cloneRange()),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==a+1?(e.config.checkSelectionRanges&&(r=ee(this.nativeSelection,this.rangeCount-1))&&!B(r,t)&&(t=new N(r)),this._ranges[this.rangeCount-1]=t,s(this,t,se(this.nativeSelection)),this.isCollapsed=L(this)):this.refresh())}:function(e,t){n(t)&&z?ae(this,e):(this.nativeSelection.addRange(d(e)),this.refresh())},ie.setRanges=function(e){if(Q&&F&&e.length>1)w(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}};else{if(!(E(W,"empty")&&E(Y,"select")&&Q&&U))return t.fail("No means of selecting a Range or TextRange was found"),!1;ie.removeAllRanges=function(){var e,t,n;try{this.docSelection.empty(),"None"!=this.docSelection.type&&(this.anchorNode?e=H(this.anchorNode):this.docSelection.type==O&&(t=this.docSelection.createRange(),t.length&&(e=H(t.item(0)))),e&&(n=$(e).createTextRange(),n.select(),this.docSelection.empty()))}catch(e){}c(this)},ie.addRange=function(t){this.docSelection.type==O?g(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,t,!1))},ie.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?w(this,e):t&&this.addRange(e[0])}}if(ie.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new R("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},U)re=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=$(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==O?m(t):f(n)?p(t,n):c(t)};else if(E(W,"getRangeAt")&&typeof W.rangeCount==D)re=function(t){if(Q&&F&&t.docSelection.type==O)m(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;i>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));s(t,t._ranges[t.rangeCount-1],se(t.nativeSelection)),t.isCollapsed=L(t)}else c(t)};else{if(!V||typeof W.isCollapsed!=S||typeof Y.collapsed!=S||!P.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;re=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=ee(n,0),e._ranges=[t],e.rangeCount=1,l(e),e.isCollapsed=L(e)):c(e)}}ie.refresh=function(e){var t,n=e?this._ranges.slice(0):null,i=this.anchorNode,a=this.anchorOffset;if(re(this),e){if((t=n.length)!=this._ranges.length)return!0;if(this.anchorNode!=i||this.anchorOffset!=a)return!0;for(;t--;)if(!B(n[t],this._ranges[t]))return!0;return!1}},oe=function(e,t){var n,i,a=e.getAllRanges();for(e.removeAllRanges(),n=0,i=a.length;i>n;++n)B(t,a[n])||e.addRange(a[n]);e.rangeCount||c(e)},ie.removeRange=Q&&F?function(e){var t,n,i,a,r,o,s,l;if(this.docSelection.type==O){for(t=this.docSelection.createRange(),n=u(e),i=H(t.item(0)),a=$(i).createControlRange(),o=!1,s=0,l=t.length;l>s;++s)r=t.item(s),r!==n||o?a.add(t.item(s)):o=!0;a.select(),m(this)}else oe(this,e)}:function(e){oe(this,e)},!U&&V&&P.implementsDomRange?(se=o,ie.isBackward=function(){return se(this)}):se=ie.isBackward=function(){return!1},ie.isBackwards=ie.isBackward,ie.toString=function(){var e,t,n=[];for(e=0,t=this.rangeCount;t>e;++e)n[e]=""+this._ranges[e];return n.join("")},ie.collapse=function(t,n){C(this,t);var i=e.createRange(t);i.collapseToPoint(t,n),this.setSingleRange(i),this.isCollapsed=!0},ie.collapseToStart=function(){if(!this.rangeCount)throw new R("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},ie.collapseToEnd=function(){if(!this.rangeCount)throw new R("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},ie.selectAllChildren=function(t){C(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},ie.deleteFromDocument=function(){var e,t,n,i,a;if(Q&&F&&this.docSelection.type==O){for(e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount&&(n=this.getAllRanges(),n.length)){for(this.removeAllRanges(),i=0,a=n.length;a>i;++i)n[i].deleteContents();this.addRange(n[a-1])}},ie.eachRange=function(e,t){for(var n=0,i=this._ranges.length;i>n;++n)if(e(this.getRangeAt(n)))return t},ie.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},ie.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},ie.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(i){n.push(i[e].apply(i,t))}),n},ie.setStart=x(!0),ie.setEnd=x(!1),e.rangePrototype.select=function(e){ne(this.getDocument()).setSingleRange(this,e)},ie.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},ie.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},ie.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},ie.moveToBookmark=function(t){var n,i,a,r=[];for(n=0;i=t.rangeBookmarks[n++];)a=e.createRange(this.win),a.moveToBookmark(i),r.push(a);t.backward?this.setSingleRange(r[0],"backward"):this.setRanges(r)},ie.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(A.toHtml(t))}),e.join("")},P.implementsTextRange&&(ie.getNativeTextRange=function(){var n,i;if(n=this.docSelection){if(i=n.createRange(),f(i))return i;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),ie.getName=function(){return"WrappedSelection"},ie.inspect=function(){return k(this)},ie.detach=function(){b(this.win,"delete"),v(this)},y.detachAll=function(){b(null,"deleteAll")},y.inspect=k,y.isDirectionBackward=n,e.Selection=y,e.selectionPrototype=ie,e.addShimListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return ne(e)}),e=null})}),M)},this),function(e,t){"function"==typeof define&&define.amd?define(["rangy"],e):e(t.rangy)}(function(e){e.createModule("SaveRestore",["WrappedRange"],function(e,t){function n(e,t){return(t||document).getElementById(e)}function i(e,t){var n,i="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),a=p.getDocument(e.startContainer),r=e.cloneRange();return r.collapse(t),n=a.createElement("span"),n.id=i,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(a.createTextNode(m)),r.insertNode(n),n}function a(e,i,a,r){var o=n(a,e);o?(i[r?"setStartBefore":"setEndBefore"](o),o.parentNode.removeChild(o)):t.warn("Marker element has been removed. Cannot restore selection.")}function r(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function o(t,n){var a,r,o=e.DomRange.getRangeDocument(t),s=""+t;return t.collapsed?(r=i(t,!1),{document:o,markerId:r.id,collapsed:!0}):(r=i(t,!1),a=i(t,!0),{document:o,startMarkerId:a.id,endMarkerId:r.id,collapsed:!1,backward:n,toString:function(){return"original text: '"+s+"', new text: '"+t+"'"}})}function s(i,r){var o,s,l,c=i.document;return void 0===r&&(r=!0),o=e.createRange(c),i.collapsed?(s=n(i.markerId,c),s?(s.style.display="inline",l=s.previousSibling,l&&3==l.nodeType?(s.parentNode.removeChild(s),o.collapseToPoint(l,l.length)):(o.collapseBefore(s),s.parentNode.removeChild(s))):t.warn("Marker element has been removed. Cannot restore selection.")):(a(c,o,i.startMarkerId,!0),a(c,o,i.endMarkerId,!1)),r&&o.normalizeBoundaries(),o}function l(t,i){var a,s,l,c,d=[];for(t=t.slice(0),t.sort(r),l=0,c=t.length;c>l;++l)d[l]=o(t[l],i);for(l=c-1;l>=0;--l)a=t[l],s=e.DomRange.getRangeDocument(a),a.collapsed?a.collapseAfter(n(d[l].markerId,s)):(a.setEndBefore(n(d[l].endMarkerId,s)),a.setStartAfter(n(d[l].startMarkerId,s)));return d}function c(n){var i,a,r,o;return e.isSelectionValid(n)?(i=e.getSelection(n),a=i.getAllRanges(),r=1==a.length&&i.isBackward(),o=l(a,r),r?i.setSingleRange(a[0],"backward"):i.setRanges(a),{win:n,rangeInfos:o,restored:!1}):(t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null)}function d(e){var t,n=[],i=e.length;for(t=i-1;t>=0;t--)n[t]=s(e[t],!0);return n}function h(t,n){var i,a,r,o;t.restored||(i=t.rangeInfos,a=e.getSelection(t.win),r=d(i),o=i.length,1==o&&n&&e.features.selectionHasExtend&&i[0].backward?(a.removeAllRanges(),a.addRange(r[0],!0)):a.setRanges(r),t.restored=!0)}function u(e,t){var i=n(t,e);i&&i.parentNode.removeChild(i)}function f(e){var t,n,i,a=e.rangeInfos;for(t=0,n=a.length;n>t;++t)i=a[t],i.collapsed?u(e.doc,i.markerId):(u(e.doc,i.startMarkerId),u(e.doc,i.endMarkerId))}var p=e.dom,m="\ufeff";e.util.extend(e,{saveRange:o,restoreRange:s,saveRanges:l,restoreRanges:d,saveSelection:c,restoreSelection:h,removeMarkerElement:u,removeMarkers:f})})},this),Base=function(){},Base.extend=function(e,t){var n,i,a,r=Base.prototype.extend;return Base._prototyping=!0,n=new this,r.call(n,e),n.base=function(){},delete Base._prototyping,i=n.constructor,a=n.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==a)this._constructing=!0,i.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||r).call(arguments[0],n)},a.ancestor=this,a.extend=this.extend,a.forEach=this.forEach,a.implement=this.implement,a.prototype=n,a.toString=this.toString,a.valueOf=function(e){return"object"==e?a:i.valueOf()},r.call(a,t),"function"==typeof a.init&&a.init(),a},Base.prototype={extend:function(e,t){var n,i,a,r,o,s,l;if(arguments.length>1)n=this[e],!n||"function"!=typeof t||n.valueOf&&n.valueOf()==t.valueOf()||!/\bbase\b/.test(t)||(i=t.valueOf(),t=function(){var e,t=this.base||Base.prototype.base;return this.base=n,e=i.apply(this,arguments),this.base=t,e},t.valueOf=function(e){return"object"==e?t:i},t.toString=Base.toString),this[e]=t;else if(e){for(a=Base.prototype.extend,Base._prototyping||"function"==typeof this||(a=this.extend||a),r={toSource:null},o=["constructor","toString","valueOf"],s=Base._prototyping?0:1;l=o[s++];)e[l]!=r[l]&&a.call(this,l,e[l]);for(l in e)r[l]||a.call(this,l,e[l])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var i in e)void 0===this.prototype[i]&&t.call(n,e[i],i,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return this.valueOf()+""}}),wysihtml5.browser=function(){function e(e){return+(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[void 0,0])[1]}function t(e){return+(e.match(/android (\d+)/)||[void 0,0])[1]}function n(e,t){var n,i=-1;return"Microsoft Internet Explorer"==navigator.appName?n=RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"):"Netscape"==navigator.appName&&(n=RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})")),n&&null!=n.exec(navigator.userAgent)&&(i=parseFloat(RegExp.$1)),-1!==i&&(!e||(t?"<"===t?i>e:">"===t?e>i:"<="===t?i>=e:">="===t?e>=i:void 0:e===i))}var i=navigator.userAgent,a=document.createElement("div"),r=-1!==i.indexOf("Gecko")&&-1===i.indexOf("KHTML"),o=-1!==i.indexOf("AppleWebKit/"),s=-1!==i.indexOf("Chrome/"),l=-1!==i.indexOf("Opera/");return{USER_AGENT:i,supported:function(){var n=this.USER_AGENT.toLowerCase(),i="contentEditable"in a,r=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,o=document.querySelector&&document.querySelectorAll,s=this.isIos()&&e(n)<5||this.isAndroid()&&t(n)<4||-1!==n.indexOf("opera mobi")||-1!==n.indexOf("hpwos/");return i&&r&&o&&!s},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){return/ipad|iphone|ipod/i.test(this.USER_AGENT)},isAndroid:function(){return-1!==this.USER_AGENT.indexOf("Android")},supportsSandboxedIframes:function(){return n()},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return n()},hasCurrentStyleProperty:function(){return"currentStyle"in a},hasHistoryIssue:function(){return r&&"Mac"===navigator.platform.substr(0,3)},insertsLineBreaksOnReturn:function(){return r},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){return"on"+e in a||function(){return a.setAttribute("on"+e,"return;"),"function"==typeof a["on"+e]}()},supportsEventsInIframeCorrectly:function(){return!l},supportsHTML5Tags:function(e){var t=e.createElement("div"),n="<article>foo</article>";return t.innerHTML=n,t.innerHTML.toLowerCase()===n},supportsCommand:function(){var e={formatBlock:n(10,"<="),insertUnorderedList:n(),insertOrderedList:n()},t={insertHTML:r};return function(n,i){if(!e[i]){try{return n.queryCommandSupported(i)}catch(e){}try{return n.queryCommandEnabled(i)}catch(e){return!!t[i]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return n()},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return r||l||o},supportsGetAttributeCorrectly:function(){return"1"!=document.createElement("td").getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return r||n()||l},autoScrollsToCaret:function(){return!o},autoClosesUnclosedTags:function(){var e,t,n=a.cloneNode(!1);return n.innerHTML="<p><div></div>",t=n.innerHTML.toLowerCase(),e="<p></p><div></div>"===t||"<p><div></div></p>"===t,this.autoClosesUnclosedTags=function(){return e},e},supportsNativeGetElementsByClassName:function(){return-1!==(document.getElementsByClassName+"").indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},needsSpaceAfterLineBreak:function(){return l},supportsSpeechApiOn:function(e){return(i.match(/Chrome\/(\d+)/)||[void 0,0])[1]>=11&&("onwebkitspeechchange"in e||"speech"in e)},crashesWhenDefineProperty:function(e){return n(9)&&("XMLHttpRequest"===e||"XDomainRequest"===e)},doesAsyncFocus:function(){return n()},hasProblemsSettingCaretAfterImg:function(){return n()},hasUndoInContextMenu:function(){return r||s||l},hasInsertNodeIssue:function(){return l},hasIframeFocusIssue:function(){return n()},createsNestedInvalidMarkupAfterPaste:function(){return o},supportsMutationEvents:function(){return"MutationEvent"in window},supportsModenPaste:function(){return!("clipboardData"in window)}}}(),wysihtml5.lang.array=function(e){return{contains:function(t){if(Array.isArray(t)){for(var n=t.length;n--;)if(-1!==wysihtml5.lang.array(e).indexOf(t[n]))return!0;return!1}return-1!==wysihtml5.lang.array(e).indexOf(t)},indexOf:function(t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},without:function(t){t=wysihtml5.lang.array(t);for(var n=[],i=0,a=e.length;a>i;i++)t.contains(e[i])||n.push(e[i]);return n},get:function(){for(var t=0,n=e.length,i=[];n>t;t++)i.push(e[t]);return i},map:function(t,n){if(Array.prototype.map)return e.map(t,n);for(var i=e.length>>>0,a=Array(i),r=0;i>r;r++)a[r]=t.call(n,e[r],r,e);return a},unique:function(){for(var t=[],n=e.length,i=0;n>i;)wysihtml5.lang.array(t).contains(e[i])||t.push(e[i]),i++;return t}}},wysihtml5.lang.Dispatcher=Base.extend({on:function(e,t){return this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t),this},off:function(e,t){this.events=this.events||{};var n,i,a=0;if(e){for(n=this.events[e]||[],i=[];a<n.length;a++)n[a]!==t&&t&&i.push(n[a]);this.events[e]=i}else this.events={};return this},fire:function(e,t){this.events=this.events||{};for(var n=this.events[e]||[],i=0;i<n.length;i++)n[i].call(this,t);return this},observe:function(){return this.on.apply(this,arguments)},stopObserving:function(){return this.off.apply(this,arguments)}}),wysihtml5.lang.object=function(e){return{merge:function(t){for(var n in t)e[n]=t[n];return this},get:function(){return e},clone:function(t){var n,i={};if(null===e||!wysihtml5.lang.object(e).isPlainObject())return e;for(n in e)e.hasOwnProperty(n)&&(i[n]=t?wysihtml5.lang.object(e[n]).clone(t):e[n]);return i},isArray:function(){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(){return"[object Function]"===Object.prototype.toString.call(e)},isPlainObject:function(){return"[object Object]"===Object.prototype.toString.call(e)}}},function(){var e=/^\s+/,t=/\s+$/,n=/[&<>\t"]/g,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","\t":"&nbsp; "};wysihtml5.lang.string=function(a){return a+="",{trim:function(){return a.replace(e,"").replace(t,"")},interpolate:function(e){for(var t in e)a=this.replace("#{"+t+"}").by(e[t]);return a},replace:function(e){return{by:function(t){return a.split(e).join(t)}}},escapeHTML:function(e,t){var r=a.replace(n,function(e){return i[e]});return e&&(r=r.replace(/(?:\r\n|\r|\n)/g,"<br />")),t&&(r=r.replace(/  /gi,"&nbsp; ")),r}}}}(),function(e){function t(e,t){return r(e,t)?e:(e===e.ownerDocument.documentElement&&(e=e.ownerDocument.body),o(e,t))}function n(e){return e.replace(l,function(e,t){var n,i,a=(t.match(c)||[])[1]||"",r=h[a];return t=t.replace(c,""),t.split(r).length>t.split(a).length&&(t+=a,a=""),n=t,i=t,t.length>d&&(i=i.substr(0,d)+"..."),"www."===n.substr(0,4)&&(n="http://"+n),'<a href="'+n+'">'+i+"</a>"+a})}function i(e){var t=e._wysihtml5_tempElement;return t||(t=e._wysihtml5_tempElement=e.createElement("div")),t}function a(t){var a=t.parentNode,r=e.lang.string(t.data).escapeHTML(),o=i(a.ownerDocument);for(o.innerHTML="<span></span>"+n(r),o.removeChild(o.firstChild);o.firstChild;)a.insertBefore(o.firstChild,t);a.removeChild(t)}function r(t,n){for(var i;t.parentNode;){if(t=t.parentNode,i=t.nodeName,t.className&&e.lang.array(t.className.split(" ")).contains(n))return!0;if(s.contains(i))return!0;if("body"===i)return!1}return!1}function o(t,n){if(!(s.contains(t.nodeName)||t.className&&e.lang.array(t.className.split(" ")).contains(n))){if(t.nodeType===e.TEXT_NODE&&t.data.match(l))return void a(t);for(var i=e.lang.array(t.childNodes).get(),r=i.length,c=0;r>c;c++)o(i[c],n);return t}}var s=e.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),l=/((https?:\/\/|www\.)[^\s<]{3,})/gi,c=/([^\w\/\-](,?))$/i,d=100,h={")":"(","]":"[","}":"{"};e.dom.autoLink=t,e.dom.autoLink.URL_REG_EXP=l}(wysihtml5),function(e){var t=e.dom;t.addClass=function(e,n){var i=e.classList;return i?i.add(n):void(t.hasClass(e,n)||(e.className+=" "+n))},t.removeClass=function(e,t){var n=e.classList;return n?n.remove(t):void(e.className=e.className.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)")," "))},t.hasClass=function(e,t){var n,i=e.classList;return i?i.contains(t):(n=e.className,n.length>0&&(n==t||RegExp("(^|\\s)"+t+"(\\s|$)").test(n)))}}(wysihtml5),wysihtml5.dom.contains=function(){var e=document.documentElement;return e.contains?function(e,t){return t.nodeType!==wysihtml5.ELEMENT_NODE&&(t=t.parentNode),e!==t&&e.contains(t)}:e.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:void 0}(),wysihtml5.dom.convertToList=function(){function e(e,t){var n=e.createElement("li");return t.appendChild(n),n}function t(e,t){return e.createElement(t)}function n(n,i,a){if("UL"===n.nodeName||"OL"===n.nodeName||"MENU"===n.nodeName)return n;var r,o,s,l,c,d,h,u,f,p=n.ownerDocument,m=t(p,i),g=n.querySelectorAll("br"),y=g.length;for(f=0;y>f;f++)for(l=g[f];(c=l.parentNode)&&c!==n&&c.lastChild===l;){if("block"===wysihtml5.dom.getStyle("display").from(c)){c.removeChild(l);break}wysihtml5.dom.insert(l).after(l.parentNode)}for(r=wysihtml5.lang.array(n.childNodes).get(),o=r.length,f=0;o>f;f++)u=u||e(p,m),s=r[f],d="block"===wysihtml5.dom.getStyle("display").from(s),h="BR"===s.nodeName,!d||a&&wysihtml5.dom.hasClass(s,a)?h?u=u.firstChild?null:u:u.appendChild(s):(u=u.firstChild?e(p,m):u,u.appendChild(s),u=null);return 0===r.length&&e(p,m),n.parentNode.replaceChild(m,n),m}return n}(),wysihtml5.dom.copyAttributes=function(e){return{from:function(t){return{to:function(n){for(var i,a=0,r=e.length;r>a;a++)i=e[a],void 0!==t[i]&&""!==t[i]&&(n[i]=t[i]);return{andTo:arguments.callee}}}}}},function(e){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],n=function(t){return!!i(t)&&parseInt(e.getStyle("width").from(t),10)<t.offsetWidth},i=function(n){for(var i=0,a=t.length;a>i;i++)if("border-box"===e.getStyle(t[i]).from(n))return t[i]};e.copyStyles=function(i){return{from:function(a){n(a)&&(i=wysihtml5.lang.array(i).without(t));for(var r,o="",s=i.length,l=0;s>l;l++)r=i[l],o+=r+":"+e.getStyle(r).from(a)+";";return{to:function(t){return e.setStyles(o).on(t),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(e){e.dom.delegate=function(t,n,i,a){return e.dom.observe(t,i,function(i){for(var r=i.target,o=e.lang.array(t.querySelectorAll(n));r&&r!==t;){if(o.contains(r)){a.call(r,i);break}r=r.parentNode}})}}(wysihtml5),function(e){e.dom.domNode=function(t){var n=[e.ELEMENT_NODE,e.TEXT_NODE],i=function(t){return t.nodeType===e.TEXT_NODE&&/^\s*$/g.test(t.data)};return{prev:function(a){var r=t.previousSibling,o=a&&a.nodeTypes?a.nodeTypes:n;return r?!e.lang.array(o).contains(r.nodeType)||a&&a.ignoreBlankTexts&&i(r)?e.dom.domNode(r).prev(a):r:null},next:function(a){var r=t.nextSibling,o=a&&a.nodeTypes?a.nodeTypes:n;return r?!e.lang.array(o).contains(r.nodeType)||a&&a.ignoreBlankTexts&&i(r)?e.dom.domNode(r).next(a):r:null}}}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var e=function(e,t){var n=t.createElement("div");n.style.display="none",t.body.appendChild(n);try{n.innerHTML=e}catch(e){}return t.body.removeChild(n),n},t=function(e){if(!e._wysihtml5_supportsHTML5Tags){for(var t=0,i=n.length;i>t;t++)e.createElement(n[t]);e._wysihtml5_supportsHTML5Tags=!0}},n=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(n,i){i=i||document;var a;return"object"==typeof n&&n.nodeType?(a=i.createElement("div"),a.appendChild(n)):wysihtml5.browser.supportsHTML5Tags(i)?(a=i.createElement("div"),a.innerHTML=n):(t(i),a=e(n,i)),a}}(),wysihtml5.dom.getParentElement=function(){function e(e,t){return!t||!t.length||("string"==typeof t?e===t:wysihtml5.lang.array(t).contains(e))}function t(e){return e.nodeType===wysihtml5.ELEMENT_NODE}function n(e,t,n){var i=(e.className||"").match(n)||[];return t?i[i.length-1]===t:!!i.length}function i(e,t,n){var i=(e.getAttribute("style")||"").match(n)||[];return t?i[i.length-1]===t:!!i.length}return function(a,r,o,s){var l=r.cssStyle||r.styleRegExp,c=r.className||r.classRegExp;for(o=o||50;o--&&a&&"BODY"!==a.nodeName&&(!s||a!==s);){if(t(a)&&e(a.nodeName,r.nodeName)&&(!l||i(a,r.cssStyle,r.styleRegExp))&&(!c||n(a,r.className,r.classRegExp)))return a;a=a.parentNode}return null}}(),wysihtml5.dom.getStyle=function(){function e(e){return e.replace(n,function(e){return e.charAt(1).toUpperCase()})}var t={float:"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},n=/\-[a-z]/g;return function(n){return{from:function(i){var a,r,o,s,l,c,d,h,u;if(i.nodeType===wysihtml5.ELEMENT_NODE){if(a=i.ownerDocument,r=t[n]||e(n),o=i.style,s=i.currentStyle,l=o[r])return l;if(s)try{return s[r]}catch(e){}return c=a.defaultView||a.parentWindow,d=("height"===n||"width"===n)&&"TEXTAREA"===i.nodeName,c.getComputedStyle?(d&&(h=o.overflow,o.overflow="hidden"),u=c.getComputedStyle(i,null).getPropertyValue(n),d&&(o.overflow=h||""),u):void 0}}}}}(),wysihtml5.dom.getTextNodes=function(e,t){var n=[];for(e=e.firstChild;e;e=e.nextSibling)3==e.nodeType?t&&/^\s*$/.test(e.innerText||e.textContent)||n.push(e):n=n.concat(wysihtml5.dom.getTextNodes(e,t));return n},wysihtml5.dom.hasElementWithTagName=function(){function e(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=n++)}var t={},n=1;return function(n,i){var a=e(n)+":"+i,r=t[a];return r||(r=t[a]=n.getElementsByTagName(i)),r.length>0}}(),function(e){function t(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=i++)}var n={},i=1;e.dom.hasElementWithClassName=function(i,a){if(!e.browser.supportsNativeGetElementsByClassName())return!!i.querySelector("."+a);var r=t(i)+":"+a,o=n[r];return o||(o=n[r]=i.getElementsByClassName(a)),o.length>0}}(wysihtml5),wysihtml5.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}},wysihtml5.dom.insertCSS=function(e){return e=e.join("\n"),{into:function(t){var n,i,a=t.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),n=t.querySelector("head link"),n?void n.parentNode.insertBefore(a,n):void((i=t.querySelector("head"))&&i.appendChild(a))}}},function(e){e.dom.lineBreaks=function(t){function n(e){return"BR"===e.nodeName}function i(t){return!!n(t)||"block"===e.dom.getStyle("display").from(t)}return{add:function(){var n=t.ownerDocument,a=e.dom.domNode(t).next({ignoreBlankTexts:!0}),r=e.dom.domNode(t).prev({ignoreBlankTexts:!0});a&&!i(a)&&e.dom.insert(n.createElement("br")).after(t),r&&!i(r)&&e.dom.insert(n.createElement("br")).before(t)},remove:function(){var i=e.dom.domNode(t).next({ignoreBlankTexts:!0}),a=e.dom.domNode(t).prev({ignoreBlankTexts:!0});i&&n(i)&&i.parentNode.removeChild(i),a&&n(a)&&a.parentNode.removeChild(a)}}}}(wysihtml5),wysihtml5.dom.observe=function(e,t,n){t="string"==typeof t?[t]:t;for(var i,a,r=0,o=t.length;o>r;r++)a=t[r],e.addEventListener?e.addEventListener(a,n,!1):(i=function(t){"target"in t||(t.target=t.srcElement),t.preventDefault=t.preventDefault||function(){this.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0},n.call(e,t)},e.attachEvent("on"+a,i));return{stop:function(){for(var a,r=0,o=t.length;o>r;r++)a=t[r],e.removeEventListener?e.removeEventListener(a,n,!1):e.detachEvent("on"+a,i)}}},wysihtml5.dom.parse=function(e,t){function n(e,t,i,a){var r,o,s,l=e.nodeType,c=e.childNodes,d=c.length,h=p[l],u=0;if(a&&1===l&&wysihtml5.dom.hasClass(e,a))return e;if(!(o=h&&h(e,i))){if(!1===o){for(r=e.ownerDocument.createDocumentFragment(),u=d;u--;)c[u]&&(s=n(c[u],t,i,a))&&(c[u]===s&&u--,r.insertBefore(s,r.firstChild));return"block"===wysihtml5.dom.getStyle("display").from(e)&&r.appendChild(e.ownerDocument.createElement("br")),
wysihtml5.lang.array(["div","pre","p","table","td","th","ul","ol","li","dd","dl","footer","header","section","h1","h2","h3","h4","h5","h6"]).contains(e.nodeName.toLowerCase())&&e.parentNode.lastChild!==e&&(e.nextSibling&&3===e.nextSibling.nodeType&&/^\s/.test(e.nextSibling.nodeValue)||r.appendChild(e.ownerDocument.createTextNode(" "))),r.normalize&&r.normalize(),r}return null}for(u=0;d>u;u++)c[u]&&(s=n(c[u],t,i,a))&&(c[u]===s&&u--,o.appendChild(s));if(t&&o.nodeName.toLowerCase()===m&&(!o.childNodes.length||/^\s*$/gi.test(o.innerHTML)&&(i||"_wysihtml5-temp-placeholder"!==e.className&&"rangySelectionBoundary"!==e.className)||!o.attributes.length)){for(r=o.ownerDocument.createDocumentFragment();o.firstChild;)r.appendChild(o.firstChild);return r.normalize&&r.normalize(),r}return o.normalize&&o.normalize(),o}function i(e,t){var n,i,a,r;for(n in t)if(t.hasOwnProperty(n))for(wysihtml5.lang.object(t[n]).isFunction()?i=t[n]:"string"==typeof t[n]&&S[t[n]]&&(i=S[t[n]]),a=e.querySelectorAll(n),r=a.length;r--;)i(a[r])}function a(e,t){var n,i,a,o=v.tags,l=e.nodeName.toLowerCase(),c=e.scopeName;if(e._wysihtml5)return null;if(e._wysihtml5=1,"wysihtml5-temp"===e.className)return null;if(c&&"HTML"!=c&&(l=c+":"+l),"outerHTML"in e&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==e.nodeName||"</p>"===e.outerHTML.slice(-4).toLowerCase()||(l="div")),l in o){if(!(n=o[l])||n.remove)return null;if(n.unwrap)return!1;n="string"==typeof n?{rename_tag:n}:n}else{if(!e.firstChild)return null;n={rename_tag:m}}if(n.one_of_type&&!r(e,v,n.one_of_type,t)){if(!n.remove_action)return null;if("unwrap"===n.remove_action)return!1;if("rename"!==n.remove_action)return null;a=n.remove_action_rename_to||m}return i=e.ownerDocument.createElement(a||n.rename_tag||l),h(e,i,n,t),s(e,i,n),e=null,i.normalize&&i.normalize(),i}function r(e,t,n,i){var a,r;if("SPAN"===e.nodeName&&!i&&("_wysihtml5-temp-placeholder"===e.className||"rangySelectionBoundary"===e.className))return!0;for(r in n)if(n.hasOwnProperty(r)&&t.type_definitions&&t.type_definitions[r]&&(a=t.type_definitions[r],o(e,a)))return!0;return!1}function o(e,t){var n,i,a,r,o,s,l,c,d=e.getAttribute("class"),h=e.getAttribute("style");if(t.methods)for(s in t.methods)if(t.methods.hasOwnProperty(s)&&k[s]&&k[s](e))return!0;if(d&&t.classes)for(d=d.replace(/^\s+/g,"").replace(/\s+$/g,"").split(g),n=d.length,l=0;n>l;l++)if(t.classes[d[l]])return!0;if(h&&t.styles){h=h.split(";");for(i in t.styles)if(t.styles.hasOwnProperty(i))for(c=h.length;c--;)if(o=h[c].split(":"),o[0].replace(/\s/g,"").toLowerCase()===i&&(!0===t.styles[i]||1===t.styles[i]||wysihtml5.lang.array(t.styles[i]).contains(o[1].replace(/\s/g,"").toLowerCase())))return!0}if(t.attrs)for(a in t.attrs)if(t.attrs.hasOwnProperty(a)&&"string"==typeof(r=wysihtml5.dom.getAttribute(e,a))&&r.search(t.attrs[a])>-1)return!0;return!1}function s(e,t,n){var i,a;if(n&&n.keep_styles)for(i in n.keep_styles)if(n.keep_styles.hasOwnProperty(i)){if(a="float"===i?e.style.styleFloat||e.style.cssFloat:e.style[i],n.keep_styles[i]instanceof RegExp&&!n.keep_styles[i].test(a))continue;"float"===i?t.style[e.style.styleFloat?"styleFloat":"cssFloat"]=a:e.style[i]&&(t.style[i]=a)}}function l(e,t){var n,i=[];for(n in t)t.hasOwnProperty(n)&&0===n.indexOf(e)&&i.push(n);return i}function c(e,t,n,i){var a,r=w[n];return!(!r||!(t||"alt"===e&&"IMG"==i)||"string"!=typeof(a=r(t)))&&a}function d(e,t){var n,i,a,r,o,s=wysihtml5.lang.object(v.attributes||{}).clone(),d=wysihtml5.lang.object(s).merge(wysihtml5.lang.object(t||{}).clone()).get(),h={},u=wysihtml5.dom.getAttributes(e);for(n in d)if(/\*$/.test(n))for(a=l(n.slice(0,-1),u),r=0,o=a.length;o>r;r++)!1!==(i=c(a[r],u[a[r]],d[n],e.nodeName))&&(h[a[r]]=i);else!1!==(i=c(n,u[n],d[n],e.nodeName))&&(h[n]=i);return h}function h(e,t,n,i){var a,r,o,s,l,c={},h=n.set_class,u=n.add_class,f=n.add_style,p=n.set_attributes,m=v.classes,y=0,b=[],w=[],k=[],S=[];if(p&&(c=wysihtml5.lang.object(p).clone()),c=wysihtml5.lang.object(c).merge(d(e,n.check_attributes)).get(),h&&b.push(h),u)for(s in u)(l=x[u[s]])&&"string"==typeof(o=l(wysihtml5.dom.getAttribute(e,s)))&&b.push(o);if(f)for(s in f)(l=C[f[s]])&&(newStyle=l(wysihtml5.dom.getAttribute(e,s)),"string"==typeof newStyle&&w.push(newStyle));if("string"==typeof m&&"any"===m&&e.getAttribute("class"))if(v.classes_blacklist){for(S=e.getAttribute("class"),S&&(b=b.concat(S.split(g))),a=b.length;a>y;y++)r=b[y],v.classes_blacklist[r]||k.push(r);k.length&&(c.class=wysihtml5.lang.array(k).unique().join(" "))}else c.class=e.getAttribute("class");else{for(i||(m["_wysihtml5-temp-placeholder"]=1,m._rangySelectionBoundary=1,m["wysiwyg-tmp-selected-cell"]=1),S=e.getAttribute("class"),S&&(b=b.concat(S.split(g))),a=b.length;a>y;y++)r=b[y],m[r]&&k.push(r);k.length&&(c.class=wysihtml5.lang.array(k).unique().join(" "))}c.class&&i&&(c.class=c.class.replace("wysiwyg-tmp-selected-cell",""),/^\s*$/g.test(c.class)&&delete c.class),w.length&&(c.style=wysihtml5.lang.array(w).unique().join(" "));for(s in c)try{t.setAttribute(s,c[s])}catch(e){}c.src&&(void 0!==c.width&&t.setAttribute("width",c.width),void 0!==c.height&&t.setAttribute("height",c.height))}function u(e){var t,n=e.nextSibling;return n&&n.nodeType===wysihtml5.TEXT_NODE?void(n.data=e.data.replace(b,"")+n.data.replace(b,"")):(t=e.data.replace(b,""),e.ownerDocument.createTextNode(t))}function f(e){return v.comments?e.ownerDocument.createComment(e.nodeValue):void 0}var p={1:a,3:u,8:f},m="span",g=/\s+/,y={tags:{},classes:{}},v={},b=/\uFEFF/g,w={url:function(){var e=/^https?:\/\//i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),src:function(){var e=/^(\/|https?:\/\/)/i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),href:function(){var e=/^(#|\/|https?:\/\/|mailto:)/i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t){return t?t.replace(e,""):""}}(),numbers:function(){var e=/\D/g;return function(t){return(t=(t||"").replace(e,""))||null}}(),any:function(){return function(e){return e}}()},C={align_text:function(){var e={left:"text-align: left;",right:"text-align: right;",center:"text-align: center;"};return function(t){return e[(t+"").toLowerCase()]}}()},x={align_img:function(){var e={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return e[(t+"").toLowerCase()]}}(),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[(t+"").toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[(t+"").toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[(t+"").charAt(0)]}}()},k={has_visible_contet:function(){var e,t=["img","video","picture","br","script","noscript","style","table","iframe","object","embed","audio","svg","input","button","select","textarea","canvas"];return function(n){if((e=(n.innerText||n.textContent).replace(/\s/g,""))&&e.length>0)return!0;for(var i=t.length;i--;)if(n.querySelector(t[i]))return!0;return!!(n.offsetWidth&&n.offsetWidth>0&&n.offsetHeight&&n.offsetHeight>0)}}()},S={unwrap:function(e){wysihtml5.dom.unwrap(e)},remove:function(e){e.parentNode.removeChild(e)}};return function(e,t){var a,r,o,s,l,c,d,h,u;for(wysihtml5.lang.object(v).merge(y).merge(t.rules).get(),a=t.context||e.ownerDocument||document,r=a.createDocumentFragment(),o="string"==typeof e,s=!1,!0===t.clearInternals&&(s=!0),l=o?wysihtml5.dom.getAsDom(e,a):e,v.selectors&&i(l,v.selectors);l.firstChild;)d=l.firstChild,c=n(d,t.cleanUp,s,t.uneditableClass),c&&r.appendChild(c),d!==c&&l.removeChild(d);if(t.unjoinNbsps)for(h=wysihtml5.dom.getTextNodes(r),u=h.length;u--;)h[u].nodeValue=h[u].nodeValue.replace(/([\S\u00A0])\u00A0/gi,"$1 ");return l.innerHTML="",l.appendChild(r),o?wysihtml5.quirks.getCorrectInnerHTML(l):l}(e,t)},wysihtml5.dom.removeEmptyTextNodes=function(e){for(var t,n=wysihtml5.lang.array(e.childNodes).get(),i=n.length,a=0;i>a;a++)t=n[a],t.nodeType===wysihtml5.TEXT_NODE&&""===t.data&&t.parentNode.removeChild(t)},wysihtml5.dom.renameElement=function(e,t){for(var n,i=e.ownerDocument.createElement(t);n=e.firstChild;)i.appendChild(n);return wysihtml5.dom.copyAttributes(["align","className"]).from(e).to(i),e.parentNode.replaceChild(i,e),i},wysihtml5.dom.replaceWithChildNodes=function(e){if(e.parentNode){if(!e.firstChild)return void e.parentNode.removeChild(e);for(var t=e.ownerDocument.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e),e=t=null}},function(e){function t(t){return"block"===e.getStyle("display").from(t)}function n(e){return"BR"===e.nodeName}function i(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}function a(e,a){if(e.nodeName.match(/^(MENU|UL|OL)$/)){var r,o,s,l,c,d,h=e.ownerDocument,u=h.createDocumentFragment(),f=wysihtml5.dom.domNode(e).prev({ignoreBlankTexts:!0});if(a)for(!f||t(f)||n(f)||i(u);d=e.firstElementChild||e.firstChild;){for(o=d.lastChild;r=d.firstChild;)s=r===o,l=s&&!t(r)&&!n(r),u.appendChild(r),l&&i(u);d.parentNode.removeChild(d)}else for(;d=e.firstElementChild||e.firstChild;){if(d.querySelector&&d.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))for(;r=d.firstChild;)u.appendChild(r);else{for(c=h.createElement("p");r=d.firstChild;)c.appendChild(r);u.appendChild(c)}d.parentNode.removeChild(d)}e.parentNode.replaceChild(u,e)}}e.resolveList=a}(wysihtml5.dom),function(e){var t=document,n=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],i=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],a=["referrer","write","open","close"];e.dom.Sandbox=Base.extend({constructor:function(t,n){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(n).get(),this.editableArea=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=t.getElementById(e)),e.appendChild(this.editableArea)},getIframe:function(){return this.editableArea},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,i=t.createElement("iframe");return i.className="wysihtml5-sandbox",e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html></html>'"),i.onload=function(){i.onreadystatechange=i.onload=null,n._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,n._onLoadIframe(i))},i},_onLoadIframe:function(r){var o,s,l,c,d,h,u;if(e.dom.contains(t.documentElement,r)){if(o=this,s=r.contentWindow,l=r.contentWindow.document,c=t.characterSet||t.charset||"utf-8",d=this._getHtml({charset:c,stylesheets:this.config.stylesheets}),l.open("text/html","replace"),l.write(d),l.close(),this.getWindow=function(){return r.contentWindow},this.getDocument=function(){return r.contentWindow.document},s.onerror=function(e,t,n){throw Error("wysihtml5.Sandbox: "+e,t,n)},!e.browser.supportsSandboxedIframes()){for(h=0,u=n.length;u>h;h++)this._unset(s,n[h]);for(h=0,u=i.length;u>h;h++)this._unset(s,i[h],e.EMPTY_FUNCTION);for(h=0,u=a.length;u>h;h++)this._unset(l,a[h]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){o.callback(o)},0)}},_getHtml:function(t){var n,i=t.stylesheets,a="",r=0;if(i="string"==typeof i?[i]:i)for(n=i.length;n>r;r++)a+='<link rel="stylesheet" href="'+i[r]+'">';return t.stylesheets=a,e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)},_unset:function(t,n,i,a){try{t[n]=i}catch(e){}try{t.__defineGetter__(n,function(){return i})}catch(e){}if(a)try{t.__defineSetter__(n,function(){})}catch(e){}if(!e.browser.crashesWhenDefineProperty(n))try{var r={get:function(){return i}};a&&(r.set=function(){}),Object.defineProperty(t,n,r)}catch(e){}}})}(wysihtml5),function(e){var t=document;e.dom.ContentEditableArea=Base.extend({getContentEditable:function(){return this.element},getWindow:function(){return this.element.ownerDocument.defaultView},getDocument:function(){return this.element.ownerDocument},constructor:function(t,n,i){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(n).get(),this.element=i?this._bindElement(i):this._createElement()},_createElement:function(){var e=t.createElement("div");return e.className="wysihtml5-sandbox",this._loadElement(e),e},_bindElement:function(e){return e.className=e.className&&""!=e.className?e.className+" wysihtml5-sandbox":"wysihtml5-sandbox",this._loadElement(e,!0),e},_loadElement:function(e,t){var n,i=this;t||(n=this._getHtml(),e.innerHTML=n),this.getWindow=function(){return e.ownerDocument.defaultView},this.getDocument=function(){return e.ownerDocument},this.loaded=!0,setTimeout(function(){i.callback(i)},0)},_getHtml:function(){return""}})}(wysihtml5),function(){var e={className:"class"};wysihtml5.dom.setAttributes=function(t){return{on:function(n){for(var i in t)n.setAttribute(e[i]||i,t[i])}}}}(),wysihtml5.dom.setStyles=function(e){return{on:function(t){var n,i=t.style;if("string"==typeof e)return void(i.cssText+=";"+e);for(n in e)"float"===n?(i.cssFloat=e[n],i.styleFloat=e[n]):i[n]=e[n]}}},function(e){e.simulatePlaceholder=function(t,n,i){var a="placeholder",r=function(){var t=n.element.offsetWidth>0&&n.element.offsetHeight>0;n.hasPlaceholderSet()&&(n.clear(),n.element.focus(),t&&setTimeout(function(){var e=n.selection.getSelection();e.focusNode&&e.anchorNode||n.selection.selectNode(n.element.firstChild||n.element)},0)),n.placeholderSet=!1,e.removeClass(n.element,a)},o=function(){n.isEmpty()&&(n.placeholderSet=!0,n.setValue(i),e.addClass(n.element,a))};t.on("set_placeholder",o).on("unset_placeholder",r).on("focus:composer",r).on("paste:composer",r).on("blur:composer",o),o()}}(wysihtml5.dom),function(e){var t=document.documentElement;"textContent"in t?(e.setTextContent=function(e,t){e.textContent=t},e.getTextContent=function(e){return e.textContent}):"innerText"in t?(e.setTextContent=function(e,t){e.innerText=t},e.getTextContent=function(e){return e.innerText}):(e.setTextContent=function(e,t){e.nodeValue=t},e.getTextContent=function(e){return e.nodeValue})}(wysihtml5.dom),wysihtml5.dom.getAttribute=function(e,t){var n,i,a,r=!wysihtml5.browser.supportsGetAttributeCorrectly();return t=t.toLowerCase(),n=e.nodeName,"IMG"==n&&"src"==t&&!0===wysihtml5.dom.isLoadedImage(e)?e.src:r&&"outerHTML"in e?(i=e.outerHTML.toLowerCase(),a=-1!=i.indexOf(" "+t+"="),a?e.getAttribute(t):null):e.getAttribute(t)},wysihtml5.dom.getAttributes=function(e){var t,n=!wysihtml5.browser.supportsGetAttributeCorrectly(),i=e.nodeName,a=[];for(t in e.attributes)(e.attributes.hasOwnProperty&&e.attributes.hasOwnProperty(t)||!e.attributes.hasOwnProperty&&Object.prototype.hasOwnProperty.call(e.attributes,t))&&e.attributes[t].specified&&("IMG"==i&&"src"==e.attributes[t].name.toLowerCase()&&!0===wysihtml5.dom.isLoadedImage(e)?a.src=e.src:wysihtml5.lang.array(["rowspan","colspan"]).contains(e.attributes[t].name.toLowerCase())&&n?1!==e.attributes[t].value&&(a[e.attributes[t].name]=e.attributes[t].value):a[e.attributes[t].name]=e.attributes[t].value);return a},wysihtml5.dom.isLoadedImage=function(e){try{return e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){if(e.complete&&"complete"===e.readyState)return!0}},function(e){function t(e,t){var n,i,a,r,o=[];for(i=0,a=e.length;a>i;i++)if(n=e[i].querySelectorAll(t))for(r=n.length;r--;o.unshift(n[r]));return o}function n(e){e.parentNode.removeChild(e)}function i(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function a(e,t){for(var n=e.nextSibling;1!=n.nodeType;)if(n=n.nextSibling,!t||t==n.tagName.toLowerCase())return n;return null}var r=e.dom,o=function(e){this.el=e,this.isColspan=!1,this.isRowspan=!1,this.firstCol=!0,this.lastCol=!0,this.firstRow=!0,this.lastRow=!0,this.isReal=!0,this.spanCollection=[],this.modified=!1},s=function(e,t){e?(this.cell=e,this.table=r.getParentElement(e,{nodeName:["TABLE"]})):t&&(this.table=t,this.cell=this.table.querySelectorAll("th, td")[0])};s.prototype={addSpannedCellToMap:function(e,t,n,i,a,r){var s,l,c=[],d=n+(r?parseInt(r,10)-1:0),h=i+(a?parseInt(a,10)-1:0);for(s=n;d>=s;s++)for(void 0===t[s]&&(t[s]=[]),l=i;h>=l;l++)t[s][l]=new o(e),t[s][l].isColspan=a&&parseInt(a,10)>1,t[s][l].isRowspan=r&&parseInt(r,10)>1,t[s][l].firstCol=l==i,t[s][l].lastCol=l==h,t[s][l].firstRow=s==n,t[s][l].lastRow=s==d,t[s][l].isReal=l==i&&s==n,t[s][l].spanCollection=c,c.push(t[s][l])},setCellAsModified:function(e){if(e.modified=!0,e.spanCollection.length>0)for(var t=0,n=e.spanCollection.length;n>t;t++)e.spanCollection[t].modified=!0},setTableMap:function(){var e,t,n,i,a,s,l,c,d=[],h=this.getTableRows();for(e=0;e<h.length;e++)for(t=h[e],n=this.getRowCells(t),s=0,void 0===d[e]&&(d[e]=[]),i=0;i<n.length;i++){for(a=n[i];void 0!==d[e][s];)s++;l=r.getAttribute(a,"colspan"),c=r.getAttribute(a,"rowspan"),l||c?(this.addSpannedCellToMap(a,d,e,s,l,c),s+=l?parseInt(l,10):1):(d[e][s]=new o(a),s++)}return this.map=d,d},getRowCells:function(n){var i=this.table.querySelectorAll("table"),a=i?t(i,"th, td"):[],r=n.querySelectorAll("th, td");return a.length>0?e.lang.array(r).without(a):r},getTableRows:function(){var n=this.table.querySelectorAll("table"),i=n?t(n,"tr"):[],a=this.table.querySelectorAll("tr");return i.length>0?e.lang.array(a).without(i):a},getMapIndex:function(e){var t,n,i=this.map.length,a=this.map&&this.map[0]?this.map[0].length:0;for(t=0;i>t;t++)for(n=0;a>n;n++)if(this.map[t][n].el===e)return{row:t,col:n};return!1},getElementAtIndex:function(e){return this.setTableMap(),this.map[e.row]&&this.map[e.row][e.col]&&this.map[e.row][e.col].el?this.map[e.row][e.col].el:null},getMapElsTo:function(e){var t,n,i,a,r,o,s=[];if(this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(e),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(t=this.idx_start,this.idx_start=this.idx_end,this.idx_end=t),this.idx_start.col>this.idx_end.col&&(n=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=n),null!=this.idx_start&&null!=this.idx_end)for(i=this.idx_start.row,a=this.idx_end.row;a>=i;i++)for(r=this.idx_start.col,o=this.idx_end.col;o>=r;r++)s.push(this.map[i][r].el);return s},orderSelectionEnds:function(e){var t,n;return this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(e),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(t=this.idx_start,this.idx_start=this.idx_end,this.idx_end=t),this.idx_start.col>this.idx_end.col&&(n=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=n),{start:this.map[this.idx_start.row][this.idx_start.col].el,end:this.map[this.idx_end.row][this.idx_end.col].el}},createCells:function(e,t,n){var i,a,r,o=this.table.ownerDocument,s=o.createDocumentFragment();for(a=0;t>a;a++){if(i=o.createElement(e),n)for(r in n)n.hasOwnProperty(r)&&i.setAttribute(r,n[r]);i.appendChild(document.createTextNode(" ")),s.appendChild(i)}return s},correctColIndexForUnreals:function(e,t){var n,i=this.map[t],a=-1;for(n=0,e;e>n;n++)i[n].isReal&&a++;return a},getLastNewCellOnRow:function(e,t){var n,i,a,r,o=this.getRowCells(e);for(a=0,r=o.length;r>a;a++)if(n=o[a],!1===(i=this.getMapIndex(n))||void 0!==t&&i.row!=t)return n;return null},removeEmptyTable:function(){var e=this.table.querySelectorAll("td, th");return(!e||0==e.length)&&(n(this.table),!0)},splitRowToCells:function(e){var t,n,a;e.isColspan&&(t=parseInt(r.getAttribute(e.el,"colspan")||1,10),n=e.el.tagName.toLowerCase(),t>1&&(a=this.createCells(n,t-1),i(e.el,a)),e.el.removeAttribute("colspan"))},getRealRowEl:function(e,t){var n,i,a=null,o=null;for(t=t||this.idx,n=0,i=this.map[t.row].length;i>n;n++)if(o=this.map[t.row][n],o.isReal&&(a=r.getParentElement(o.el,{nodeName:["TR"]})))return a;return null===a&&e&&(a=r.getParentElement(this.map[t.row][t.col].el,{nodeName:["TR"]})||null),a},injectRowAt:function(e,t,n,a,o){var s,l,c=this.getRealRowEl(!1,{row:e,col:t}),d=this.createCells(a,n);c?(s=this.correctColIndexForUnreals(t,e),s>=0?i(this.getRowCells(c)[s],d):c.insertBefore(d,c.firstChild)):(l=this.table.ownerDocument.createElement("tr"),l.appendChild(d),i(r.getParentElement(o.el,{nodeName:["TR"]}),l))},canMerge:function(e){var t,n,i,a,r,o;for(this.to=e,this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(this.to),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(t=this.idx_start,this.idx_start=this.idx_end,this.idx_end=t),this.idx_start.col>this.idx_end.col&&(n=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=n),i=this.idx_start.row,a=this.idx_end.row;a>=i;i++)for(r=this.idx_start.col,o=this.idx_end.col;o>=r;r++)if(this.map[i][r].isColspan||this.map[i][r].isRowspan)return!1;return!0},decreaseCellSpan:function(e,t){var n=parseInt(r.getAttribute(e.el,t),10)-1;n>=1?e.el.setAttribute(t,n):(e.el.removeAttribute(t),"colspan"==t&&(e.isColspan=!1),"rowspan"==t&&(e.isRowspan=!1),e.firstCol=!0,e.lastCol=!0,e.firstRow=!0,e.lastRow=!0,e.isReal=!0)},removeSurplusLines:function(){var e,t,i,a,o,s,l,c;if(this.setTableMap(),this.map){for(i=0,a=this.map.length;a>i;i++){for(e=this.map[i],l=!0,o=0,s=e.length;s>o;o++)if(t=e[o],!(r.getAttribute(t.el,"rowspan")&&parseInt(r.getAttribute(t.el,"rowspan"),10)>1&&!0!==t.firstRow)){l=!1;break}if(l)for(o=0;s>o;o++)this.decreaseCellSpan(e[o],"rowspan")}for(c=this.getTableRows(),i=0,a=c.length;a>i;i++)e=c[i],0==e.childNodes.length&&/^\s*$/.test(e.textContent||e.innerText)&&n(e)}},fillMissingCells:function(){var e,t,n,a=0,r=0,s=null;if(this.setTableMap(),this.map){for(a=this.map.length,e=0;a>e;e++)this.map[e].length>r&&(r=this.map[e].length);for(t=0;a>t;t++)for(n=0;r>n;n++)this.map[t]&&!this.map[t][n]&&n>0&&(this.map[t][n]=new o(this.createCells("td",1)),(s=this.map[t][n-1])&&s.el&&s.el.parent&&i(this.map[t][n-1].el,this.map[t][n].el))}},rectify:function(){return!this.removeEmptyTable()&&(this.removeSurplusLines(),this.fillMissingCells(),!0)},unmerge:function(){var e,t,n,i,a,o;if(this.rectify()&&(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx)){if(e=this.map[this.idx.row][this.idx.col],t=r.getAttribute(e.el,"colspan")?parseInt(r.getAttribute(e.el,"colspan"),10):1,n=e.el.tagName.toLowerCase(),e.isRowspan){if((i=parseInt(r.getAttribute(e.el,"rowspan"),10))>1)for(a=1,o=i-1;o>=a;a++)this.injectRowAt(this.idx.row+a,this.idx.col,t,n,e);e.el.removeAttribute("rowspan")}this.splitRowToCells(e)}},merge:function(e){var t,i,a,r,o,s;if(this.rectify())if(this.canMerge(e)){for(t=this.idx_end.row-this.idx_start.row+1,i=this.idx_end.col-this.idx_start.col+1,a=this.idx_start.row,r=this.idx_end.row;r>=a;a++)for(o=this.idx_start.col,s=this.idx_end.col;s>=o;o++)a==this.idx_start.row&&o==this.idx_start.col?(t>1&&this.map[a][o].el.setAttribute("rowspan",t),i>1&&this.map[a][o].el.setAttribute("colspan",i)):(/^\s*<br\/?>\s*$/.test(this.map[a][o].el.innerHTML.toLowerCase())||(this.map[this.idx_start.row][this.idx_start.col].el.innerHTML+=" "+this.map[a][o].el.innerHTML),n(this.map[a][o].el));this.rectify()}else window.console},collapseCellToNextRow:function(e){var t,n,a,o=this.getMapIndex(e.el),s=o.row+1,l={row:s,col:o.col};s<this.map.length&&null!==(t=this.getRealRowEl(!1,l))&&(n=this.correctColIndexForUnreals(l.col,l.row),n>=0?i(this.getRowCells(t)[n],e.el):(a=this.getLastNewCellOnRow(t,s),null!==a?i(a,e.el):t.insertBefore(e.el,t.firstChild)),parseInt(r.getAttribute(e.el,"rowspan"),10)>2?e.el.setAttribute("rowspan",parseInt(r.getAttribute(e.el,"rowspan"),10)-1):e.el.removeAttribute("rowspan"))},removeRowCell:function(e){e.isReal?e.isRowspan?this.collapseCellToNextRow(e):n(e.el):parseInt(r.getAttribute(e.el,"rowspan"),10)>2?e.el.setAttribute("rowspan",parseInt(r.getAttribute(e.el,"rowspan"),10)-1):e.el.removeAttribute("rowspan")},getRowElementsByCell:function(){var e,t,n,i=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),!1!==this.idx)for(e=this.map[this.idx.row],t=0,n=e.length;n>t;t++)e[t].isReal&&i.push(e[t].el);return i},getColumnElementsByCell:function(){var e,t,n=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),!1!==this.idx)for(e=0,t=this.map.length;t>e;e++)this.map[e][this.idx.col]&&this.map[e][this.idx.col].isReal&&n.push(this.map[e][this.idx.col].el);return n},removeRow:function(){var e,t,i,a=r.getParentElement(this.cell,{nodeName:["TR"]});if(a){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),!1!==this.idx)for(e=this.map[this.idx.row],t=0,i=e.length;i>t;t++)e[t].modified||(this.setCellAsModified(e[t]),this.removeRowCell(e[t]));n(a)}},removeColCell:function(e){e.isColspan?parseInt(r.getAttribute(e.el,"colspan"),10)>2?e.el.setAttribute("colspan",parseInt(r.getAttribute(e.el,"colspan"),10)-1):e.el.removeAttribute("colspan"):e.isReal&&n(e.el)},removeColumn:function(){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),!1!==this.idx)for(var e=0,t=this.map.length;t>e;e++)this.map[e][this.idx.col].modified||(this.setCellAsModified(this.map[e][this.idx.col]),this.removeColCell(this.map[e][this.idx.col]))},remove:function(e){if(this.rectify()){switch(e){case"row":this.removeRow();break;case"column":this.removeColumn()}this.rectify()}},addRow:function(e){var t,n,a,o,s,l=this.table.ownerDocument;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"below"==e&&r.getAttribute(this.cell,"rowspan")&&(this.idx.row=this.idx.row+parseInt(r.getAttribute(this.cell,"rowspan"),10)-1),!1!==this.idx){for(t=this.map[this.idx.row],n=l.createElement("tr"),a=0,o=t.length;o>a;a++)t[a].modified||(this.setCellAsModified(t[a]),this.addRowCell(t[a],n,e));switch(e){case"below":i(this.getRealRowEl(!0),n);break;case"above":(s=r.getParentElement(this.map[this.idx.row][this.idx.col].el,{nodeName:["TR"]}))&&s.parentNode.insertBefore(n,s)}}},addRowCell:function(e,t,n){var i=e.isColspan?{colspan:r.getAttribute(e.el,"colspan")}:null;e.isReal?"above"!=n&&e.isRowspan?e.el.setAttribute("rowspan",parseInt(r.getAttribute(e.el,"rowspan"),10)+1):t.appendChild(this.createCells("td",1,i)):"above"!=n&&e.isRowspan&&e.lastRow?t.appendChild(this.createCells("td",1,i)):c.isRowspan&&e.el.attr("rowspan",parseInt(r.getAttribute(e.el,"rowspan"),10)+1)},add:function(e){this.rectify()&&(("below"==e||"above"==e)&&this.addRow(e),("before"==e||"after"==e)&&this.addColumn(e))},addColCell:function(e,t,n){var a,o=e.el.tagName.toLowerCase();switch(n){case"before":a=!e.isColspan||e.firstCol;break;case"after":a=!e.isColspan||e.lastCol||e.isColspan&&c.el==this.cell}if(a){switch(n){case"before":e.el.parentNode.insertBefore(this.createCells(o,1),e.el);break;case"after":i(e.el,this.createCells(o,1))}e.isRowspan&&this.handleCellAddWithRowspan(e,t+1,n)}else e.el.setAttribute("colspan",parseInt(r.getAttribute(e.el,"colspan"),10)+1)},addColumn:function(e){var t,n,i,a;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"after"==e&&r.getAttribute(this.cell,"colspan")&&(this.idx.col=this.idx.col+parseInt(r.getAttribute(this.cell,"colspan"),10)-1),!1!==this.idx)for(i=0,a=this.map.length;a>i;i++)t=this.map[i],t[this.idx.col]&&(n=t[this.idx.col],n.modified||(this.setCellAsModified(n),this.addColCell(n,i,e)))},handleCellAddWithRowspan:function(e,t,n){var o,s,l,c,d=parseInt(r.getAttribute(this.cell,"rowspan"),10)-1,h=r.getParentElement(e.el,{nodeName:["TR"]}),u=e.el.tagName.toLowerCase(),f=this.table.ownerDocument;for(c=0;d>c;c++)if(o=this.correctColIndexForUnreals(this.idx.col,t+c),h=a(h,"tr"))if(o>0)switch(n){case"before":s=this.getRowCells(h),o>0&&this.map[t+c][this.idx.col].el!=s[o]&&o==s.length-1?i(s[o],this.createCells(u,1)):s[o].parentNode.insertBefore(this.createCells(u,1),s[o]);break;case"after":i(this.getRowCells(h)[o],this.createCells(u,1))}else h.insertBefore(this.createCells(u,1),h.firstChild);else l=f.createElement("tr"),l.appendChild(this.createCells(u,1)),this.table.appendChild(l)}},r.table={getCellsBetween:function(e,t){return new s(e).getMapElsTo(t)},addCells:function(e,t){new s(e).add(t)},removeCells:function(e,t){new s(e).remove(t)},mergeCellsBetween:function(e,t){new s(e).merge(t)},unmergeCell:function(e){new s(e).unmerge()},orderSelectionEnds:function(e,t){return new s(e).orderSelectionEnds(t)},indexOf:function(e){var t=new s(e);return t.setTableMap(),t.getMapIndex(e)},findCell:function(e,t){return new s(null,e).getElementAtIndex(t)},findRowByCell:function(e){return new s(e).getRowElementsByCell()},findColumnByCell:function(e){return new s(e).getColumnElementsByCell()},canMerge:function(e,t){return new s(e).canMerge(t)}}}(wysihtml5),wysihtml5.dom.query=function(e,t){var n,i,a,r,o=[];for(e.nodeType&&(e=[e]),i=0,a=e.length;a>i;i++)if(n=e[i].querySelectorAll(t))for(r=n.length;r--;o.unshift(n[r]));return o},wysihtml5.dom.compareDocumentPosition=function(){return document.documentElement.compareDocumentPosition?function(e,t){return e.compareDocumentPosition(t)}:function(e,t){var n,i,a,r,o,s,l,c,d;if(n=9===e.nodeType?e:e.ownerDocument,i=9===t.nodeType?t:t.ownerDocument,e===t)return 0;if(e===t.ownerDocument)return 20;if(e.ownerDocument===t)return 10;if(n!==i)return 1;if(2===e.nodeType&&e.childNodes&&-1!==wysihtml5.lang.array(e.childNodes).indexOf(t))return 20;if(2===t.nodeType&&t.childNodes&&-1!==wysihtml5.lang.array(t.childNodes).indexOf(e))return 10;for(a=e,r=[],o=null;a;){if(a==t)return 10;r.push(a),a=a.parentNode}for(a=t,o=null;a;){if(a==e)return 20;if(-1!==(s=wysihtml5.lang.array(r).indexOf(a)))return l=r[s],c=wysihtml5.lang.array(l.childNodes).indexOf(r[s-1]),d=wysihtml5.lang.array(l.childNodes).indexOf(o),c>d?2:4;o=a,a=a.parentNode}return 1}}(),wysihtml5.dom.unwrap=function(e){if(e.parentNode){for(;e.lastChild;)wysihtml5.dom.insert(e.lastChild).after(e);e.parentNode.removeChild(e)}},wysihtml5.dom.getPastedHtml=function(e){var t;return e.clipboardData&&(wysihtml5.lang.array(e.clipboardData.types).contains("text/html")?t=e.clipboardData.getData("text/html"):wysihtml5.lang.array(e.clipboardData.types).contains("text/plain")&&(t=wysihtml5.lang.string(e.clipboardData.getData("text/plain")).escapeHTML(!0,!0))),t},wysihtml5.dom.getPastedHtmlWithDiv=function(e,t){var n=e.selection.getBookmark(),i=e.element.ownerDocument,a=i.createElement("DIV");i.body.appendChild(a),a.style.width="1px",a.style.height="1px",a.style.overflow="hidden",a.setAttribute("contenteditable","true"),a.focus(),setTimeout(function(){e.selection.setBookmark(n),t(a.innerHTML),a.parentNode.removeChild(a)},0)},wysihtml5.quirks.cleanPastedHTML=function(){var e=function(e){var t=wysihtml5.lang.string(e).trim(),n=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return RegExp("^((?!^"+n+"$).)*$","i")},t=function(t,n){var i,a,r=wysihtml5.lang.object(t).clone(!0);for(i in r.tags)if(r.tags.hasOwnProperty(i)&&r.tags[i].keep_styles)for(a in r.tags[i].keep_styles)r.tags[i].keep_styles.hasOwnProperty(a)&&n[a]&&(r.tags[i].keep_styles[a]=e(n[a]));return r},n=function(e,t){var n,i,a;if(!e)return null;for(i=0,a=e.length;a>i;i++)if(e[i].condition||(n=e[i].set),e[i].condition&&e[i].condition.test(t))return e[i].set;return n}
;return function(e,i){var a={color:wysihtml5.dom.getStyle("color").from(i.referenceNode),fontSize:wysihtml5.dom.getStyle("font-size").from(i.referenceNode)},r=t(n(i.rules,e)||{},a);return wysihtml5.dom.parse(e,{rules:r,cleanUp:!0,context:i.referenceNode.ownerDocument,uneditableClass:i.uneditableClass,clearInternals:!0,unjoinNbsps:!0})}}(),wysihtml5.quirks.ensureProperClearing=function(){var e=function(){var e=this;setTimeout(function(){var t=e.innerHTML.toLowerCase();("<p>&nbsp;</p>"==t||"<p>&nbsp;</p><p>&nbsp;</p>"==t)&&(e.innerHTML="")},0)};return function(t){wysihtml5.dom.observe(t.element,["cut","keydown"],e)}}(),function(e){e.quirks.getCorrectInnerHTML=function(t){var n,i,a,r,o,s=t.innerHTML;if(-1===s.indexOf("%7E"))return s;for(n=t.querySelectorAll("[href*='~'], [src*='~']"),o=0,r=n.length;r>o;o++)i=n[o].href||n[o].src,a=e.lang.string(i).replace("~").by("%7E"),s=e.lang.string(s).replace(a).by(i);return s}}(wysihtml5),function(e){var t="wysihtml5-quirks-redraw";e.quirks.redraw=function(n){e.dom.addClass(n,t),e.dom.removeClass(n,t);try{var i=n.ownerDocument;i.execCommand("italic",!1,null),i.execCommand("italic",!1,null)}catch(e){}}}(wysihtml5),wysihtml5.quirks.tableCellsSelection=function(e,t){function n(n){d.start=n,d.end=n,d.cells=[n],d.table=c.getParentElement(d.start,{nodeName:["TABLE"]}),d.table&&(i(),c.addClass(n,h),u=c.observe(e,"mousemove",r),f=c.observe(e,"mouseup",o),t.fire("tableselectstart").fire("tableselectstart:composer"))}function i(){var t,n;if(e&&(t=e.querySelectorAll("."+h),t.length>0))for(n=0;n<t.length;n++)c.removeClass(t[n],h)}function a(e){for(var t=0;t<e.length;t++)c.addClass(e[t],h)}function r(e){var n,r=null,o=c.getParentElement(e.target,{nodeName:["TD","TH"]});o&&d.table&&d.start&&(r=c.getParentElement(o,{nodeName:["TABLE"]}))&&r===d.table&&(i(),n=d.end,d.end=o,d.cells=c.table.getCellsBetween(d.start,o),d.cells.length>1&&t.composer.selection.deselect(),a(d.cells),d.end!==n&&t.fire("tableselectchange").fire("tableselectchange:composer"))}function o(){u.stop(),f.stop(),t.fire("tableselect").fire("tableselect:composer"),setTimeout(function(){s()},0)}function s(){var n=c.observe(e.ownerDocument,"click",function(e){n.stop(),c.getParentElement(e.target,{nodeName:["TABLE"]})!=d.table&&(i(),d.table=null,d.start=null,d.end=null,t.fire("tableunselect").fire("tableunselect:composer"))})}function l(e,n){d.start=e,d.end=n,d.table=c.getParentElement(d.start,{nodeName:["TABLE"]}),selectedCells=c.table.getCellsBetween(d.start,d.end),a(selectedCells),s(),t.fire("tableselect").fire("tableselect:composer")}var c=wysihtml5.dom,d={table:null,start:null,end:null,cells:null,select:l},h="wysiwyg-tmp-selected-cell",u=null,f=null;return function(){return c.observe(e,"mousedown",function(e){var t=wysihtml5.dom.getParentElement(e.target,{nodeName:["TD","TH"]});t&&n(t)}),d}()},function(e){var t=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]+)\s*\)/i,n=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,i=/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,a=/^#([0-9a-f])([0-9a-f])([0-9a-f])/i,r=function(e){return RegExp("(^|\\s|;)"+e+"\\s*:\\s*[^;$]+","gi")};e.quirks.styleParser={parseColor:function(o,s){var l,c,d,h=r(s),u=o.match(h),f=10;if(u){for(d=u.length;d--;)u[d]=e.lang.string(u[d].split(":")[1]).trim();if(l=u[u.length-1],t.test(l))c=l.match(t);else if(n.test(l))c=l.match(n);else if(i.test(l))c=l.match(i),f=16;else if(a.test(l))return c=l.match(a),c.shift(),c.push(1),e.lang.array(c).map(function(e,t){return 3>t?16*parseInt(e,16)+parseInt(e,16):parseFloat(e)});if(c)return c.shift(),c[3]||c.push(1),e.lang.array(c).map(function(e,t){return 3>t?parseInt(e,f):parseFloat(e)})}return!1},unparseColor:function(e,t){if(t){if("hex"==t)return e[0].toString(16).toUpperCase()+e[1].toString(16).toUpperCase()+e[2].toString(16).toUpperCase();if("hash"==t)return"#"+e[0].toString(16).toUpperCase()+e[1].toString(16).toUpperCase()+e[2].toString(16).toUpperCase();if("rgb"==t)return"rgb("+e[0]+","+e[1]+","+e[2]+")";if("rgba"==t)return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")";if("csv"==t)return e[0]+","+e[1]+","+e[2]+","+e[3]}return e[3]&&1!==e[3]?"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")":"rgb("+e[0]+","+e[1]+","+e[2]+")"},parseFontSize:function(t){var n=t.match(r("font-size"));return!!n&&e.lang.string(n[n.length-1].split(":")[1]).trim()}}}(wysihtml5),function(e){function t(e){var t=0;if(e.parentNode)do{t+=e.offsetTop||0,e=e.offsetParent}while(e);return t}function n(e,t){for(var n=0;t!==e;)if(n++,!(t=t.parentNode))throw Error("not a descendant of ancestor!");return n}function i(e){if(!e.canSurroundContents())for(var t=e.commonAncestorContainer,i=n(t,e.startContainer),a=n(t,e.endContainer);!e.canSurroundContents();)i>a?(e.setStartBefore(e.startContainer),i=n(t,e.startContainer)):(e.setEndAfter(e.endContainer),a=n(t,e.endContainer))}var a=e.dom;e.Selection=Base.extend({constructor:function(e,t,n){window.rangy.init(),this.editor=e,this.composer=e.composer,this.doc=this.composer.doc,this.contain=t,this.unselectableClass=n||!1},getBookmark:function(){var e=this.getRange();return e&&i(e),e&&e.cloneRange()},setBookmark:function(e){e&&this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);return t.setStartBefore(e),t.setEndBefore(e),this.setSelection(t)},setAfter:function(e){var t=rangy.createRange(this.doc);return t.setStartAfter(e),t.setEndAfter(e),this.setSelection(t)},selectNode:function(t,n){var i=rangy.createRange(this.doc),r=t.nodeType===e.ELEMENT_NODE,o="canHaveHTML"in t?t.canHaveHTML:"IMG"!==t.nodeName,s=r?t.innerHTML:t.data,l=""===s||s===e.INVISIBLE_SPACE,c=a.getStyle("display").from(t),d="block"===c||"list-item"===c;if(l&&r&&o&&!n)try{t.innerHTML=e.INVISIBLE_SPACE}catch(e){}o?i.selectNodeContents(t):i.selectNode(t),o&&l&&r?i.collapse(d):o&&l&&(i.setStartAfter(t),i.setEndAfter(t)),this.setSelection(i)},getSelectedNode:function(e){var t,n;return e&&this.doc.selection&&"Control"===this.doc.selection.type&&(n=this.doc.selection.createRange())&&n.length?n.item(0):(t=this.getSelection(this.doc),t.focusNode===t.anchorNode?t.focusNode:(n=this.getRange(this.doc),n?n.commonAncestorContainer:this.doc.body))},fixSelBorders:function(){var e=this.getRange();i(e),this.setSelection(e)},getSelectedOwnNodes:function(){var e,t,n=this.getOwnRanges(),i=[];for(e=0,t=n.length;t>e;e++)i.push(n[e].commonAncestorContainer||this.doc.body);return i},findNodesInSelection:function(t){var n,i,a,r=this.getOwnRanges(),o=[];for(i=0,a=r.length;a>i;i++)n=r[i].getNodes([1],function(n){return e.lang.array(t).contains(n.nodeName)}),o=o.concat(n);return o},containsUneditable:function(){var e,t,n=this.getOwnUneditables(),i=this.getSelection();for(e=0,t=n.length;t>e;e++)if(i.containsNode(n[e]))return!0;return!1},deleteContents:function(){var e,t=this.getOwnRanges();for(e=t.length;e--;)t[e].deleteContents();this.setSelection(t[0])},getPreviousNode:function(t,n){var i,a,r;return t||(i=this.getSelection(),t=i.anchorNode),t!==this.contain&&((a=t.previousSibling)!==this.contain&&(a&&3!==a.nodeType&&1!==a.nodeType?a=this.getPreviousNode(a,n):a&&3===a.nodeType&&/^\s*$/.test(a.textContent)?a=this.getPreviousNode(a,n):n&&a&&1===a.nodeType&&!e.lang.array(["BR","HR","IMG"]).contains(a.nodeName)&&/^[\s]*$/.test(a.innerHTML)?a=this.getPreviousNode(a,n):a||t===this.contain||(r=t.parentNode)!==this.contain&&(a=this.getPreviousNode(r,n)),a!==this.contain&&a))},getSelectionParentsByTag:function(){var t,n,i,a=this.getSelectedOwnNodes(),r=[];for(n=0,i=a.length;i>n;n++)(t=a[n].nodeName&&"LI"===a[n].nodeName?a[n]:e.dom.getParentElement(a[n],{nodeName:["LI"]},!1,this.contain))&&r.push(t);return r.length?r:null},getRangeToNodeEnd:function(){if(this.isCollapsed()){var e=this.getRange(),t=e.startContainer,n=e.startOffset,i=rangy.createRange(this.doc);return i.selectNodeContents(t),i.setStart(t,n),i}},caretIsLastInSelection:function(){return/^\s*$/.test((rangy.createRange(this.doc),this.getSelection(),this.getRangeToNodeEnd().cloneContents()).textContent)},caretIsFirstInSelection:function(){var t=rangy.createRange(this.doc),n=this.getSelection(),i=this.getRange(),a=i.startContainer;return a.nodeType===e.TEXT_NODE?this.isCollapsed()&&a.nodeType===e.TEXT_NODE&&/^\s*$/.test(a.data.substr(0,i.startOffset)):(t.selectNodeContents(this.getRange().commonAncestorContainer),t.collapse(!0),this.isCollapsed()&&(t.startContainer===n.anchorNode||t.endContainer===n.anchorNode)&&t.startOffset===n.anchorOffset)},caretIsInTheBeginnig:function(t){var n=this.getSelection(),i=n.anchorNode,a=n.anchorOffset;return t?0===a&&(i.nodeName&&i.nodeName===t.toUpperCase()||e.dom.getParentElement(i.parentNode,{nodeName:t},1)):0===a&&!this.getPreviousNode(i,!0)},caretIsBeforeUneditable:function(){var e,t,n,i,a=this.getSelection(),r=a.anchorNode;if(0===a.anchorOffset&&(e=this.getPreviousNode(r,!0)))for(t=this.getOwnUneditables(),n=0,i=t.length;i>n;n++)if(e===t[n])return t[n];return!1},executeAndRestoreRangy:function(e){var t=this.doc.defaultView||this.doc.parentWindow,n=rangy.saveSelection(t);if(n)try{e()}catch(e){setTimeout(function(){throw e},0)}else e();rangy.restoreSelection(n)},executeAndRestore:function(t,n){var i,r,o,s,l,c,d,h,u,f=this.doc.body,p=n&&f.scrollTop,m=n&&f.scrollLeft,g="_wysihtml5-temp-placeholder",y='<span class="'+g+'">'+e.INVISIBLE_SPACE+"</span>",v=this.getRange(!0);if(!v)return void t(f,f);v.collapsed||(d=v.cloneRange(),c=d.createContextualFragment(y),d.collapse(!1),d.insertNode(c),d.detach()),l=v.createContextualFragment(y),v.insertNode(l),c&&(i=this.contain.querySelectorAll("."+g),v.setStartBefore(i[0]),v.setEndAfter(i[i.length-1])),this.setSelection(v);try{t(v.startContainer,v.endContainer)}catch(e){setTimeout(function(){throw e},0)}if((i=this.contain.querySelectorAll("."+g))&&i.length)for(h=rangy.createRange(this.doc),o=i[0].nextSibling,i.length>1&&(s=i[i.length-1].previousSibling),s&&o?(h.setStartBefore(o),h.setEndAfter(s)):(r=this.doc.createTextNode(e.INVISIBLE_SPACE),a.insert(r).after(i[0]),h.setStartBefore(r),h.setEndAfter(r)),this.setSelection(h),u=i.length;u--;)i[u].parentNode.removeChild(i[u]);else this.contain.focus();n&&(f.scrollTop=p,f.scrollLeft=m);try{i.parentNode.removeChild(i)}catch(e){}},set:function(e,t){var n=rangy.createRange(this.doc);n.setStart(e,t||0),this.setSelection(n)},insertHTML:function(e){var t,n=(rangy.createRange(this.doc),this.doc.createElement("DIV")),i=this.doc.createDocumentFragment();for(n.innerHTML=e,t=n.lastChild;n.firstChild;)i.appendChild(n.firstChild);this.insertNode(i),t&&this.setAfter(t)},insertNode:function(e){var t=this.getRange();t&&t.insertNode(e)},surround:function(e){var t,n,i=this.getOwnRanges(),a=[];if(0==i.length)return a;for(n=i.length;n--;){t=this.doc.createElement(e.nodeName),a.push(t),e.className&&(t.className=e.className),e.cssStyle&&t.setAttribute("style",e.cssStyle);try{i[n].surroundContents(t),this.selectNode(t)}catch(e){t.appendChild(i[n].extractContents()),i[n].insertNode(t)}}return a},deblockAndSurround:function(t){var n,i,a,r=this.doc.createElement("div"),o=rangy.createRange(this.doc);if(r.className=t.className,this.composer.commands.exec("formatBlock",t.nodeName,t.className),n=this.contain.querySelectorAll("."+t.className),n[0])for(n[0].parentNode.insertBefore(r,n[0]),o.setStartBefore(n[0]),o.setEndAfter(n[n.length-1]),i=o.extractContents();i.firstChild;)if(a=i.firstChild,1==a.nodeType&&e.dom.hasClass(a,t.className)){for(;a.firstChild;)r.appendChild(a.firstChild);"BR"!==a.nodeName&&r.appendChild(this.doc.createElement("br")),i.removeChild(a)}else r.appendChild(a);else r=null;return r},scrollIntoView:function(){var n,i=this.doc,a=i.documentElement.scrollHeight>i.documentElement.offsetHeight,r=i._wysihtml5ScrollIntoViewElement=i._wysihtml5ScrollIntoViewElement||function(){var t=i.createElement("span");return t.innerHTML=e.INVISIBLE_SPACE,t}();a&&(this.insertNode(r),n=t(r),r.parentNode.removeChild(r),n>=i.body.scrollTop+i.documentElement.offsetHeight-5&&(i.body.scrollTop=n))},selectLine:function(){e.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var e=this.doc.defaultView,t=e.getSelection();t.modify("move","left","lineboundary"),t.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e,t,n,i,a,r=this.doc.selection.createRange(),o=r.boundingTop,s=this.doc.body.scrollWidth;if(r.moveToPoint){for(0===o&&(n=this.doc.createElement("span"),this.insertNode(n),o=n.offsetTop,n.parentNode.removeChild(n)),o+=1,i=-10;s>i;i+=2)try{r.moveToPoint(i,o);break}catch(e){}for(e=o,t=this.doc.selection.createRange(),a=s;a>=0;a--)try{t.moveToPoint(a,e);break}catch(e){}r.setEndPoint("EndToEnd",t),r.select()}},getText:function(){var e=this.getSelection();return e?""+e:""},getNodes:function(e,t){var n=this.getRange();return n?n.getNodes([e],t):[]},fixRangeOverflow:function(e){var t,n;this.contain&&this.contain.firstChild&&e&&(t=e.compareNode(this.contain),2!==t?(1===t&&e.setStartBefore(this.contain.firstChild),0===t&&e.setEndAfter(this.contain.lastChild),3===t&&(e.setStartBefore(this.contain.firstChild),e.setEndAfter(this.contain.lastChild))):this._detectInlineRangeProblems(e)&&(n=e.endContainer.previousElementSibling)&&e.setEnd(n,this._endOffsetForNode(n)))},_endOffsetForNode:function(e){var t=document.createRange();return t.selectNodeContents(e),t.endOffset},_detectInlineRangeProblems:function(e){var t=a.compareDocumentPosition(e.startContainer,e.endContainer);return 0==e.endOffset&&4&t},getRange:function(e){var t=this.getSelection(),n=t&&t.rangeCount&&t.getRangeAt(0);return!0!==e&&this.fixRangeOverflow(n),n},getOwnUneditables:function(){var t=a.query(this.contain,"."+this.unselectableClass),n=a.query(t,"."+this.unselectableClass);return e.lang.array(t).without(n)},getOwnRanges:function(){var e,t,n,i,a,r,o,s=[],l=this.getRange();if(l&&s.push(l),this.unselectableClass&&this.contain&&l&&(t=this.getOwnUneditables(),t.length>0))for(i=0,a=t.length;a>i;i++)for(e=[],r=0,o=s.length;o>r;r++){if(s[r])switch(s[r].compareNode(t[i])){case 2:break;case 3:n=s[r].cloneRange(),n.setEndBefore(t[i]),e.push(n),n=s[r].cloneRange(),n.setStartAfter(t[i]),e.push(n);break;default:e.push(s[r])}s=e}return s},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){var t=this.doc.defaultView||this.doc.parentWindow;return rangy.getSelection(t).setSingleRange(e)},createRange:function(){return rangy.createRange(this.doc)},isCollapsed:function(){return this.getSelection().isCollapsed},getHtml:function(){return this.getSelection().toHtml()},isEndToEndInNode:function(t){var n=this.getRange(),i=n.commonAncestorContainer,a=n.startContainer,r=n.endContainer;if(i.nodeType===e.TEXT_NODE&&(i=i.parentNode),a.nodeType===e.TEXT_NODE&&!/^\s*$/.test(a.data.substr(n.startOffset)))return!1;if(r.nodeType===e.TEXT_NODE&&!/^\s*$/.test(r.data.substr(n.endOffset)))return!1;for(;a&&a!==i;){if(a.nodeType!==e.TEXT_NODE&&!e.dom.contains(i,a))return!1;if(e.dom.domNode(a).prev({ignoreBlankTexts:!0}))return!1;a=a.parentNode}for(;r&&r!==i;){if(r.nodeType!==e.TEXT_NODE&&!e.dom.contains(i,r))return!1;if(e.dom.domNode(r).next({ignoreBlankTexts:!0}))return!1;r=r.parentNode}return!!e.lang.array(t).contains(i.nodeName)&&i},deselect:function(){var e=this.getSelection();e&&e.removeAllRanges()}})}(wysihtml5),function(e,t){function n(e,t,n){if(!e.className)return!1;var i=e.className.match(n)||[];return i[i.length-1]===t}function i(e,t){return!(!e.getAttribute||!e.getAttribute("style"))&&(e.getAttribute("style").match(t),!!e.getAttribute("style").match(t))}function a(e,t,n){e.getAttribute("style")?(s(e,n),e.getAttribute("style")&&!/^\s*$/.test(e.getAttribute("style"))?e.setAttribute("style",t+";"+e.getAttribute("style")):e.setAttribute("style",t)):e.setAttribute("style",t)}function r(e,t,n){e.className?(o(e,n),e.className+=" "+t):e.className=t}function o(e,t){e.className&&(e.className=e.className.replace(t,""))}function s(e,t){var n,i,a=[];if(e.getAttribute("style")){for(n=e.getAttribute("style").split(";"),i=n.length;i--;)n[i].match(t)||/^\s*$/.test(n[i])||a.push(n[i]);a.length?e.setAttribute("style",a.join(";")):e.removeAttribute("style")}}function l(e,t){var n,i,a,r=[],o=t.split(";"),s=e.getAttribute("style");if(s){for(s=s.replace(/\s/gi,"").toLowerCase(),r.push(RegExp("(^|\\s|;)"+t.replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi")),n=o.length;n-- >0;)/^\s*$/.test(o[n])||r.push(RegExp("(^|\\s|;)"+o[n].replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));for(i=0,a=r.length;a>i;i++)if(s.match(r[i]))return r[i]}return!1}function c(n,i,a,r){return a?l(n,a):r?e.dom.hasClass(n,r):t.dom.arrayContains(i,n.tagName.toLowerCase())}function d(e,t,n,i){for(var a=e.length;a--;)if(!c(e[a],t,n,i))return!1;return!!e.length}function h(e,t,n){var i=l(e,t);return i?(s(e,i),"remove"):(a(e,t,n),"change")}function u(e,t){return e.className.replace(w," ")==t.className.replace(w," ")}function f(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}function p(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,i,a,r=0,o=e.attributes.length;o>r;++r)if(n=e.attributes[r],"class"!=(a=n.name)){if(i=t.attributes.getNamedItem(a),n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function m(e,n){return t.dom.isCharacterDataNode(e)?0==n?!!e.previousSibling:n!=e.length||!!e.nextSibling:n>0&&n<e.childNodes.length}function g(e,n,i,a){var r,o;if(t.dom.isCharacterDataNode(n)&&(0==i?(i=t.dom.getNodeIndex(n),n=n.parentNode):i==n.length?(i=t.dom.getNodeIndex(n)+1,n=n.parentNode):r=t.dom.splitDataNode(n,i)),!(r||a&&n===a)){for(r=n.cloneNode(!1),r.id&&r.removeAttribute("id");o=n.childNodes[i];)r.appendChild(o);t.dom.insertAfter(r,n)}return n==e?r:g(e,r.parentNode,t.dom.getNodeIndex(r),a)}function y(t){this.isElementMerge=t.nodeType==e.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?t.lastChild:t,this.textNodes=[this.firstTextNode]}function v(e,t,n,i,a,r,o){this.tagNames=e||[b],this.cssClass=t||!1!==t&&"",this.similarClassRegExp=n,this.cssStyle=a||"",this.similarStyleRegExp=r,this.normalize=i,this.applyToAnyTagName=!1,this.container=o}var b="span",w=/\s+/g;y.prototype={doMerge:function(){var e,t,n,i,a,r=[];for(i=0,a=this.textNodes.length;a>i;++i)e=this.textNodes[i],t=e.parentNode,r[i]=e.data,i&&(t.removeChild(e),t.hasChildNodes()||t.parentNode.removeChild(t));return this.firstTextNode.data=n=r.join(""),n},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){var e,t,n=[];for(e=0,t=this.textNodes.length;t>e;++e)n[e]="'"+this.textNodes[e].data+"'";return"[Merge("+n.join(",")+")]"}},v.prototype={getAncestorWithClass:function(i){for(var a;i;){if(a=this.cssClass?n(i,this.cssClass,this.similarClassRegExp):""===this.cssStyle,i.nodeType==e.ELEMENT_NODE&&"false"!=i.getAttribute("contenteditable")&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&a)return i;i=i.parentNode}return!1},getAncestorWithStyle:function(n){for(var a;n;){if(a=!!this.cssStyle&&i(n,this.similarStyleRegExp),n.nodeType==e.ELEMENT_NODE&&"false"!=n.getAttribute("contenteditable")&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&a)return n;n=n.parentNode}return!1},getMatchingAncestor:function(e){var t=this.getAncestorWithClass(e),n=!1;return t?this.cssStyle&&(n="class"):(t=this.getAncestorWithStyle(e))&&(n="style"),{element:t,type:n}},postApply:function(e,t){var n,i,a,r,o,s,l=e[0],c=e[e.length-1],d=[],h=l,u=c,f=0,p=c.length;for(r=0,o=e.length;o>r;++r)i=e[r],a=null,i&&i.parentNode&&(a=this.getAdjacentMergeableTextNode(i.parentNode,!1)),a?(n||(n=new y(a),d.push(n)),n.textNodes.push(i),i===l&&(h=n.firstTextNode,f=h.length),i===c&&(u=n.firstTextNode,p=n.getLength())):n=null;if(c&&c.parentNode&&(s=this.getAdjacentMergeableTextNode(c.parentNode,!0))&&(n||(n=new y(c),d.push(n)),n.textNodes.push(s)),d.length){for(r=0,o=d.length;o>r;++r)d[r].doMerge();t.setStart(h,f),t.setEnd(u,p)}},getAdjacentMergeableTextNode:function(t,n){var i,a=t.nodeType==e.TEXT_NODE,r=a?t.parentNode:t,o=n?"nextSibling":"previousSibling";if(a){if((i=t[o])&&i.nodeType==e.TEXT_NODE)return i}else if((i=r[o])&&this.areElementsMergeable(t,i))return i[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(e,n){return t.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase())&&t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&u(e,n)&&p(e,n)},createContainer:function(e){var t=e.createElement(this.tagNames[0]);return this.cssClass&&(t.className=this.cssClass),this.cssStyle&&t.setAttribute("style",this.cssStyle),t},applyToTextNode:function(e){var n,i=e.parentNode;1==i.childNodes.length&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())?(this.cssClass&&r(i,this.cssClass,this.similarClassRegExp),this.cssStyle&&a(i,this.cssStyle,this.similarStyleRegExp)):(n=this.createContainer(t.dom.getDocument(e)),e.parentNode.insertBefore(n,e),n.appendChild(e))},isRemovable:function(n){return t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&""===e.lang.string(n.className).trim()&&(!n.getAttribute("style")||""===e.lang.string(n.getAttribute("style")).trim())},undoToTextNode:function(e,t,n,i){var a,r=!n,s=n||i,l=!1;t.containsNode(s)||(a=t.cloneRange(),a.selectNode(s),a.isPointInRange(t.endContainer,t.endOffset)&&m(t.endContainer,t.endOffset)&&(g(s,t.endContainer,t.endOffset,this.container),t.setEndAfter(s)),a.isPointInRange(t.startContainer,t.startOffset)&&m(t.startContainer,t.startOffset)&&(s=g(s,t.startContainer,t.startOffset,this.container))),!r&&this.similarClassRegExp&&o(s,this.similarClassRegExp),r&&this.similarStyleRegExp&&(l="change"===h(s,this.cssStyle,this.similarStyleRegExp)),this.isRemovable(s)&&!l&&f(s)},applyToRange:function(t){var n,i,a,r,o,s;for(i=t.length;i--;){if(n=t[i].getNodes([e.TEXT_NODE]),!n.length)try{return a=this.createContainer(t[i].endContainer.ownerDocument),t[i].surroundContents(a),void this.selectNode(t[i],a)}catch(e){}if(t[i].splitBoundaries(),n=t[i].getNodes([e.TEXT_NODE]),n.length){for(o=0,s=n.length;s>o;++o)r=n[o],this.getMatchingAncestor(r).element||this.applyToTextNode(r);t[i].setStart(n[0],0),r=n[n.length-1],t[i].setEnd(r,r.length),this.normalize&&this.postApply(n,t[i])}}},undoToRange:function(t){var n,i,a,r,o,s,l,c;for(r=t.length;r--;){for(n=t[r].getNodes([e.TEXT_NODE]),n.length?(t[r].splitBoundaries(),n=t[r].getNodes([e.TEXT_NODE])):(o=t[r].endContainer.ownerDocument,s=o.createTextNode(e.INVISIBLE_SPACE),t[r].insertNode(s),t[r].selectNode(s),n=[s]),l=0,c=n.length;c>l;++l)t[r].isValid()&&(i=n[l],a=this.getMatchingAncestor(i),"style"===a.type?this.undoToTextNode(i,t[r],!1,a.element):a.element&&this.undoToTextNode(i,t[r],a.element));1==c?this.selectNode(t[r],n[0]):(t[r].setStart(n[0],0),i=n[n.length-1],t[r].setEnd(i,i.length),this.normalize&&this.postApply(n,t[r]))}},selectNode:function(t,n){var i=n.nodeType===e.ELEMENT_NODE,a=!("canHaveHTML"in n)||n.canHaveHTML,r=i?n.innerHTML:n.data,o=""===r||r===e.INVISIBLE_SPACE;if(o&&i&&a)try{n.innerHTML=e.INVISIBLE_SPACE}catch(e){}t.selectNodeContents(n),o&&i?t.collapse(!1):o&&(t.setStartAfter(n),t.setEndAfter(n))},getTextSelectedByRange:function(e,t){var n,i,a=t.cloneRange();return a.selectNodeContents(e),n=a.intersection(t),i=n?""+n:"",a.detach(),i},isAppliedToRange:function(t){var n,i,a,r,o,s,l=[],c="full";for(a=t.length;a--;){if(i=t[a].getNodes([e.TEXT_NODE]),!i.length)return!!(n=this.getMatchingAncestor(t[a].startContainer).element)&&{elements:[n],coverage:c};for(r=0,o=i.length;o>r;++r)s=this.getTextSelectedByRange(i[r],t[a]),n=this.getMatchingAncestor(i[r]).element,n&&""!=s?(l.push(n),1===e.dom.getTextNodes(n,!0).length?c="full":"full"===c&&(c="inline")):n||(c="partial")}return!!l.length&&{elements:l,coverage:c}},toggleRange:function(e){var t,n=this.isAppliedToRange(e);n?"full"===n.coverage?this.undoToRange(e):"inline"===n.coverage?(t=d(n.elements,this.tagNames,this.cssStyle,this.cssClass),this.undoToRange(e),t||this.applyToRange(e)):(d(n.elements,this.tagNames,this.cssStyle,this.cssClass)||this.undoToRange(e),this.applyToRange(e)):this.applyToRange(e)}},e.selection.HTMLApplier=v}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},support:function(e){return wysihtml5.browser.supportsCommand(this.doc,e)},exec:function(e,t){var n=wysihtml5.commands[e],i=wysihtml5.lang.array(arguments).get(),a=n&&n.exec,r=null;if(this.editor.fire("beforecommand:composer"),a)i.unshift(this.composer),r=a.apply(n,i);else try{r=this.doc.execCommand(e,!1,t)}catch(e){}return this.editor.fire("aftercommand:composer"),r},state:function(e){var t=wysihtml5.commands[e],n=wysihtml5.lang.array(arguments).get(),i=t&&t.state;if(i)return n.unshift(this.composer),i.apply(t,n);try{return this.doc.queryCommandState(e)}catch(e){return!1}},stateValue:function(e){var t=wysihtml5.commands[e],n=wysihtml5.lang.array(arguments).get(),i=t&&t.stateValue;return!!i&&(n.unshift(this.composer),i.apply(t,n))}}),wysihtml5.commands.bold={exec:function(e,t){wysihtml5.commands.formatInline.execWithToggle(e,t,"b")},state:function(e,t){return wysihtml5.commands.formatInline.state(e,t,"b")}},function(e){function t(t,n){var o,s,l,c,d,h,u,f,p,m=t.doc,g="_wysihtml5-temp-"+ +new Date,y=/non-matching-class/g,v=0;for(e.commands.formatInline.exec(t,i,a,g,y,i,i,!0,!0),s=m.querySelectorAll(a+"."+g),o=s.length;o>v;v++){l=s[v],l.removeAttribute("class");for(p in n)"text"!==p&&l.setAttribute(p,n[p])}h=l,1===o&&(u=r.getTextContent(l),c=!!l.querySelector("*"),d=""===u||u===e.INVISIBLE_SPACE,!c&&d&&(r.setTextContent(l,n.text||l.href),f=m.createTextNode(" "),t.selection.setAfter(l),r.insert(f).after(l),h=f)),t.selection.setAfter(h)}function n(e,t,n){var i,a,r,o;for(a=t.length;a--;){for(i=t[a].attributes,r=i.length;r--;)t[a].removeAttribute(i.item(r).name);for(o in n)n.hasOwnProperty(o)&&t[a].setAttribute(o,n[o])}}var i,a="A",r=e.dom;e.commands.createLink={exec:function(e,i,a){var r=this.state(e,i);r?e.selection.executeAndRestore(function(){n(e,r,a)}):(a="object"==typeof a?a:{href:a},t(e,a))},state:function(t,n){return e.commands.formatInline.state(t,n,"A")}}}(wysihtml5),function(e){function t(e,t){for(var i,a,r,o=t.length,s=0;o>s;s++)i=t[s],a=n.getParentElement(i,{nodeName:"code"}),r=n.getTextContent(i),r.match(n.autoLink.URL_REG_EXP)&&!a?a=n.renameElement(i,"code"):n.replaceWithChildNodes(i)}var n=e.dom;e.commands.removeLink={exec:function(e,n){var i=this.state(e,n);i&&e.selection.executeAndRestore(function(){t(e,i)})},state:function(t,n){return e.commands.formatInline.state(t,n,"A")}}}(wysihtml5),function(e){var t=/wysiwyg-font-size-[0-9a-z\-]+/g;e.commands.fontSize={exec:function(n,i,a){e.commands.formatInline.execWithToggle(n,i,"span","wysiwyg-font-size-"+a,t)},state:function(n,i,a){return e.commands.formatInline.state(n,i,"span","wysiwyg-font-size-"+a,t)}}}(wysihtml5),function(e){var t=/(\s|^)font-size\s*:\s*[^;\s]+;?/gi;e.commands.fontSizeStyle={exec:function(n,i,a){a="object"==typeof a?a.size:a,/^\s*$/.test(a)||e.commands.formatInline.execWithToggle(n,i,"span",!1,!1,"font-size:"+a,t)},state:function(n,i){return e.commands.formatInline.state(n,i,"span",!1,!1,"font-size",t)},stateValue:function(t,n){var i,a=this.state(t,n);return a&&e.lang.object(a).isArray()&&(a=a[0]),!(!a||!(i=a.getAttribute("style")))&&e.quirks.styleParser.parseFontSize(i)}}}(wysihtml5),function(e){var t=/wysiwyg-color-[0-9a-z]+/g;e.commands.foreColor={exec:function(n,i,a){e.commands.formatInline.execWithToggle(n,i,"span","wysiwyg-color-"+a,t)},state:function(n,i,a){return e.commands.formatInline.state(n,i,"span","wysiwyg-color-"+a,t)}}}(wysihtml5),function(e){var t=/(\s|^)color\s*:\s*[^;\s]+;?/gi;e.commands.foreColorStyle={exec:function(n,i,a){var r,o=e.quirks.styleParser.parseColor("object"==typeof a?"color:"+a.color:"color:"+a,"color");o&&(r="color: rgb("+o[0]+","+o[1]+","+o[2]+");",1!==o[3]&&(r+="color: rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+");"),e.commands.formatInline.execWithToggle(n,i,"span",!1,!1,r,t))},state:function(n,i){return e.commands.formatInline.state(n,i,"span",!1,!1,"color",t)},stateValue:function(t,n,i){var a,r=this.state(t,n);return r&&e.lang.object(r).isArray()&&(r=r[0]),!!(r&&(a=r.getAttribute("style"))&&a)&&(val=e.quirks.styleParser.parseColor(a,"color"),e.quirks.styleParser.unparseColor(val,i))}}}(wysihtml5),function(e){var t=/(\s|^)background-color\s*:\s*[^;\s]+;?/gi;e.commands.bgColorStyle={exec:function(n,i,a){var r,o=e.quirks.styleParser.parseColor("object"==typeof a?"background-color:"+a.color:"background-color:"+a,"background-color");o&&(r="background-color: rgb("+o[0]+","+o[1]+","+o[2]+");",1!==o[3]&&(r+="background-color: rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+");"),e.commands.formatInline.execWithToggle(n,i,"span",!1,!1,r,t))},state:function(n,i){return e.commands.formatInline.state(n,i,"span",!1,!1,"background-color",t)},stateValue:function(t,n,i){var a,r=this.state(t,n),o=!1;return r&&e.lang.object(r).isArray()&&(r=r[0]),!(!r||!(a=r.getAttribute("style")))&&(o=e.quirks.styleParser.parseColor(a,"background-color"),e.quirks.styleParser.unparseColor(o,i))}}}(wysihtml5),function(e){function t(t,n,a){t.className?(i(t,a),t.className=e.lang.string(t.className+" "+n).trim()):t.className=n}function n(t,n,i){a(t,i),t.getAttribute("style")?t.setAttribute("style",e.lang.string(t.getAttribute("style")+" "+n).trim()):t.setAttribute("style",n)}function i(t,n){var i=n.test(t.className);return t.className=t.className.replace(n,""),""==e.lang.string(t.className).trim()&&t.removeAttribute("class"),i}function a(t,n){var i=n.test(t.getAttribute("style"));return t.setAttribute("style",(t.getAttribute("style")||"").replace(n,"")),""==e.lang.string(t.getAttribute("style")||"").trim()&&t.removeAttribute("style"),i}function r(e){var t=e.lastChild;t&&o(t)&&t.parentNode.removeChild(t)}function o(e){return"BR"===e.nodeName}function s(t,n){var i,a,o;for(t.selection.isCollapsed()&&t.selection.selectLine(),i=t.selection.surround(n),a=0,o=i.length;o>a;a++)e.dom.lineBreaks(i[a]).remove(),r(i[a])}function l(t){return!!e.lang.string(t.className).trim()}function c(t){return!!e.lang.string(t.getAttribute("style")||"").trim()}var d=e.dom,h=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"];e.commands.formatBlock={exec:function(r,o,u,f,p,m,g){var y,v,b,w,C,x=(r.doc,this.state(r,o,u,f,p,m,g)),k=r.config.useLineBreaks,S=k?"DIV":"P";return u="string"==typeof u?u.toUpperCase():u,x.length?void r.selection.executeAndRestoreRangy(function(){var t,n,r;for(t=x.length;t--;){if(p&&(v=i(x[t],p)),g&&(w=a(x[t],g)),(w||v)&&null===u&&x[t].nodeName!=S)return;n=l(x[t]),r=c(x[t]),n||r||!k&&"P"!==u?d.renameElement(x[t],"P"===u?"DIV":S):(e.dom.lineBreaks(x[t]).add(),d.replaceWithChildNodes(x[t]))}}):void((null!==u&&!e.lang.array(h).contains(u)||(y=r.selection.findNodesInSelection(h).concat(r.selection.getSelectedOwnNodes()),r.selection.executeAndRestoreRangy(function(){for(var e=y.length;e--;)C=d.getParentElement(y[e],{nodeName:h}),C==r.element&&(C=null),C&&(u&&(C=d.renameElement(C,u)),f&&t(C,f,p),m&&n(C,m,g),b=!0)}),!b))&&s(r,{nodeName:u||S,className:f||null,cssStyle:m||null}))},state:function(t,n,i,a,r,o,s){var l,c,h,u=t.selection.getSelectedOwnNodes(),f=[];for(i="string"==typeof i?i.toUpperCase():i,c=0,h=u.length;h>c;c++)(l=d.getParentElement(u[c],{nodeName:i,className:a,classRegExp:r,cssStyle:o,styleRegExp:s}))&&-1==e.lang.array(f).indexOf(l)&&f.push(l);return 0!=f.length&&f}}}(wysihtml5),wysihtml5.commands.formatCode={exec:function(e,t,n){var i,a,r,o=this.state(e);o?e.selection.executeAndRestore(function(){i=o.querySelector("code"),wysihtml5.dom.replaceWithChildNodes(o),i&&wysihtml5.dom.replaceWithChildNodes(i)}):(a=e.selection.getRange(),r=a.extractContents(),o=e.doc.createElement("pre"),i=e.doc.createElement("code"),
n&&(i.className=n),o.appendChild(i),i.appendChild(r),a.insertNode(o),e.selection.selectNode(o))},state:function(e){var t=e.selection.getSelectedNode();return t&&t.nodeName&&"PRE"==t.nodeName&&t.firstChild&&t.firstChild.nodeName&&"CODE"==t.firstChild.nodeName?t:wysihtml5.dom.getParentElement(t,{nodeName:"CODE"})&&wysihtml5.dom.getParentElement(t,{nodeName:"PRE"})}},function(e){function t(e){var t=i[e];return t?[e.toLowerCase(),t.toLowerCase()]:[e.toLowerCase()]}function n(n,i,r,o,s,l){var c=n;return i&&(c+=":"+i),o&&(c+=":"+o),a[c]||(a[c]=new e.selection.HTMLApplier(t(n),i,r,!0,o,s,l)),a[c]}var i={strong:"b",em:"i",b:"strong",i:"em"},a={};e.commands.formatInline={exec:function(e,t,i,a,r,o,s,l,c){var d=e.selection.createRange(),h=e.selection.getOwnRanges();return!(!h||0==h.length)&&(e.selection.getSelection().removeAllRanges(),n(i,a,r,o,s,e.element).toggleRange(h),void(l?c||e.cleanUp():(d.setStart(h[0].startContainer,h[0].startOffset),d.setEnd(h[h.length-1].endContainer,h[h.length-1].endOffset),e.selection.setSelection(d),e.selection.executeAndRestore(function(){c||e.cleanUp()},!0,!0))))},execWithToggle:function(t,n,i,a,r,o,s){var l,c=this;this.state(t,n,i,a,r,o,s)&&t.selection.isCollapsed()&&!t.selection.caretIsLastInSelection()&&!t.selection.caretIsFirstInSelection()?(l=c.state(t,n,i,a,r)[0],t.selection.executeAndRestoreRangy(function(){l.parentNode,t.selection.selectNode(l,!0),e.commands.formatInline.exec(t,n,i,a,r,o,s,!0,!0)})):this.state(t,n,i,a,r,o,s)&&!t.selection.isCollapsed()?t.selection.executeAndRestoreRangy(function(){e.commands.formatInline.exec(t,n,i,a,r,o,s,!0,!0)}):e.commands.formatInline.exec(t,n,i,a,r,o,s)},state:function(t,a,r,o,s,l,c){var d,h,u=t.doc,f=i[r]||r;return!(!e.dom.hasElementWithTagName(u,r)&&!e.dom.hasElementWithTagName(u,f))&&(!(o&&!e.dom.hasElementWithClassName(u,o))&&(!(!(d=t.selection.getOwnRanges())||0===d.length)&&(!(!(h=n(r,o,s,l,c,t.element).isAppliedToRange(d))||!h.elements)&&h.elements)))}}}(wysihtml5),function(e){e.commands.insertBlockQuote={exec:function(t,n){var i=this.state(t,n),a=t.selection.isEndToEndInNode(["H1","H2","H3","H4","H5","H6","P"]);t.selection.executeAndRestore(function(){if(i)t.config.useLineBreaks&&e.dom.lineBreaks(i).add(),e.dom.unwrap(i);else if(t.selection.isCollapsed()&&t.selection.selectLine(),a){var n=a.ownerDocument.createElement("blockquote");e.dom.insert(n).after(a),n.appendChild(a)}else t.selection.surround({nodeName:"blockquote"})})},state:function(t){var n=t.selection.getSelectedNode(),i=e.dom.getParentElement(n,{nodeName:"BLOCKQUOTE"},!1,t.element);return i||!1}}}(wysihtml5),wysihtml5.commands.insertHTML={exec:function(e,t,n){e.commands.support(t)?e.doc.execCommand(t,!1,n):e.selection.insertHTML(n)},state:function(){return!1}},function(e){var t="IMG";e.commands.insertImage={exec:function(n,i,a){var r,o,s,l,c;if(a="object"==typeof a?a:{src:a},r=n.doc,o=this.state(n))return n.selection.setBefore(o),l=o.parentNode,l.removeChild(o),e.dom.removeEmptyTextNodes(l),"A"!==l.nodeName||l.firstChild||(n.selection.setAfter(l),l.parentNode.removeChild(l)),void e.quirks.redraw(n.element);o=r.createElement(t);for(c in a)o.setAttribute("className"===c?"class":c,a[c]);n.selection.insertNode(o),e.browser.hasProblemsSettingCaretAfterImg()?(s=r.createTextNode(e.INVISIBLE_SPACE),n.selection.insertNode(s),n.selection.setAfter(s)):n.selection.setAfter(o)},state:function(n){var i,a,r,o=n.doc;return!!e.dom.hasElementWithTagName(o,t)&&(!!(i=n.selection.getSelectedNode())&&(i.nodeName===t?i:i.nodeType===e.ELEMENT_NODE&&(a=n.selection.getText(),!(a=e.lang.string(a).trim())&&(r=n.selection.getNodes(e.ELEMENT_NODE,function(e){return"IMG"===e.nodeName}),1===r.length&&r[0]))))}}}(wysihtml5),function(e){var t="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(n,i){n.commands.support(i)?(n.doc.execCommand(i,!1,null),e.browser.autoScrollsToCaret()||n.selection.scrollIntoView()):n.commands.exec("insertHTML",t)},state:function(){return!1}}}(wysihtml5),wysihtml5.commands.insertOrderedList={exec:function(e,t){wysihtml5.commands.insertList.exec(e,t,"OL")},state:function(e,t){return wysihtml5.commands.insertList.state(e,t,"OL")}},wysihtml5.commands.insertUnorderedList={exec:function(e,t){wysihtml5.commands.insertList.exec(e,t,"UL")},state:function(e,t){return wysihtml5.commands.insertList.state(e,t,"UL")}},wysihtml5.commands.insertList=function(e){var t=function(e,t){if(e&&e.nodeName){"string"==typeof t&&(t=[t]);for(var n=t.length;n--;)if(e.nodeName===t[n])return!0}return!1},n=function(n,i,a){var r,o,s={el:null,other:!1};return n&&(r=e.dom.getParentElement(n,{nodeName:"LI"}),o="UL"===i?"OL":"UL",t(n,i)?s.el=n:t(n,o)?s={el:n,other:!0}:r&&(t(r.parentNode,i)?s.el=r.parentNode:t(r.parentNode,o)&&(s={el:r.parentNode,other:!0}))),s.el&&!a.element.contains(s.el)&&(s.el=null),s},i=function(t,n,i){var a,o="UL"===n?"OL":"UL";i.selection.executeAndRestore(function(){var s,l,c=r(o,i);if(c.length)for(s=c.length;s--;)e.dom.renameElement(c[s],n.toLowerCase());else{for(a=r(["OL","UL"],i),l=a.length;l--;)e.dom.resolveList(a[l],i.config.useLineBreaks);e.dom.resolveList(t,i.config.useLineBreaks)}})},a=function(t,n,i){var a="UL"===n?"OL":"UL";i.selection.executeAndRestore(function(){var o,s=[t].concat(r(a,i));for(o=s.length;o--;)e.dom.renameElement(s[o],n.toLowerCase())})},r=function(e,n){var i,a=n.selection.getOwnRanges(),r=[];for(i=a.length;i--;)r=r.concat(a[i].getNodes([1],function(n){return t(n,e)}));return r},o=function(t,n){n.selection.executeAndRestoreRangy(function(){var i,a,r="_wysihtml5-temp-"+(new Date).getTime(),o=n.selection.deblockAndSurround({nodeName:"div",className:r}),s=/\uFEFF/g;o.innerHTML=o.innerHTML.replace(s,""),o&&(i=e.lang.array(["","<br>",e.INVISIBLE_SPACE]).contains(o.innerHTML),a=e.dom.convertToList(o,t.toLowerCase(),n.parent.config.uneditableContainerClassname),i&&n.selection.selectNode(a.querySelector("li"),!0))})};return{exec:function(e,t,r){var s=e.doc,l="OL"===r?"insertOrderedList":"insertUnorderedList",c=e.selection.getSelectedNode(),d=n(c,r,e);d.el?d.other?a(d.el,r,e):i(d.el,r,e):e.commands.support(l)?s.execCommand(l,!1,null):o(r,e)},state:function(e,t,i){var a=e.selection.getSelectedNode(),r=n(a,i,e);return!(!r.el||r.other)&&r.el}}}(wysihtml5),wysihtml5.commands.italic={exec:function(e,t){wysihtml5.commands.formatInline.execWithToggle(e,t,"i")},state:function(e,t){return wysihtml5.commands.formatInline.state(e,t,"i")}},function(e){var t="wysiwyg-text-align-center",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyCenter={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,t,n)}}}(wysihtml5),function(e){var t="wysiwyg-text-align-left",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyLeft={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,t,n)}}}(wysihtml5),function(e){var t="wysiwyg-text-align-right",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyRight={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,t,n)}}}(wysihtml5),function(e){var t="wysiwyg-text-align-justify",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyFull={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,t,n)}}}(wysihtml5),function(e){var t="text-align: right;",n=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;e.commands.alignRightStyle={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,null,null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,null,null,t,n)}}}(wysihtml5),function(e){var t="text-align: left;",n=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;e.commands.alignLeftStyle={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,null,null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,null,null,t,n)}}}(wysihtml5),function(e){var t="text-align: center;",n=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;e.commands.alignCenterStyle={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,null,null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,null,null,t,n)}}}(wysihtml5),wysihtml5.commands.redo={exec:function(e){return e.undoManager.redo()},state:function(){return!1}},wysihtml5.commands.underline={exec:function(e,t){wysihtml5.commands.formatInline.execWithToggle(e,t,"u")},state:function(e,t){return wysihtml5.commands.formatInline.state(e,t,"u")}},wysihtml5.commands.undo={exec:function(e){return e.undoManager.undo()},state:function(){return!1}},wysihtml5.commands.createTable={exec:function(e,t,n){var i,a,r;if(n&&n.cols&&n.rows&&parseInt(n.cols,10)>0&&parseInt(n.rows,10)>0){for(r=n.tableStyle?'<table style="'+n.tableStyle+'">':"<table>",r+="<tbody>",a=0;a<n.rows;a++){for(r+="<tr>",i=0;i<n.cols;i++)r+="<td>&nbsp;</td>";r+="</tr>"}r+="</tbody></table>",e.commands.exec("insertHTML",r)}},state:function(){return!1}},wysihtml5.commands.mergeTableCells={exec:function(e,t){e.tableSelection&&e.tableSelection.start&&e.tableSelection.end&&(this.state(e,t)?wysihtml5.dom.table.unmergeCell(e.tableSelection.start):wysihtml5.dom.table.mergeCellsBetween(e.tableSelection.start,e.tableSelection.end))},state:function(e){if(e.tableSelection){var t=e.tableSelection.start,n=e.tableSelection.end;if(t&&n&&t==n&&(wysihtml5.dom.getAttribute(t,"colspan")&&parseInt(wysihtml5.dom.getAttribute(t,"colspan"),10)>1||wysihtml5.dom.getAttribute(t,"rowspan")&&parseInt(wysihtml5.dom.getAttribute(t,"rowspan"),10)>1))return[t]}return!1}},wysihtml5.commands.addTableCells={exec:function(e,t,n){if(e.tableSelection&&e.tableSelection.start&&e.tableSelection.end){var i=wysihtml5.dom.table.orderSelectionEnds(e.tableSelection.start,e.tableSelection.end);"before"==n||"above"==n?wysihtml5.dom.table.addCells(i.start,n):("after"==n||"below"==n)&&wysihtml5.dom.table.addCells(i.end,n),setTimeout(function(){e.tableSelection.select(i.start,i.end)},0)}},state:function(){return!1}},wysihtml5.commands.deleteTableCells={exec:function(e,t,n){if(e.tableSelection&&e.tableSelection.start&&e.tableSelection.end){var i,a=wysihtml5.dom.table.orderSelectionEnds(e.tableSelection.start,e.tableSelection.end),r=wysihtml5.dom.table.indexOf(a.start),o=e.tableSelection.table;wysihtml5.dom.table.removeCells(a.start,n),setTimeout(function(){i=wysihtml5.dom.table.findCell(o,r),i||("row"==n&&(i=wysihtml5.dom.table.findCell(o,{row:r.row-1,col:r.col})),"column"==n&&(i=wysihtml5.dom.table.findCell(o,{row:r.row,col:r.col-1}))),i&&e.tableSelection.select(i,i)},0)}},state:function(){return!1}},wysihtml5.commands.indentList={exec:function(e){var t=e.selection.getSelectionParentsByTag("LI");return!!t&&this.tryToPushLiLevel(t,e.selection)},state:function(){return!1},tryToPushLiLevel:function(e,t){var n,i,a,r,o,s=!1;return t.executeAndRestoreRangy(function(){for(var t=e.length;t--;)r=e[t],n="OL"===r.parentNode.nodeName?"OL":"UL",i=r.ownerDocument.createElement(n),a=wysihtml5.dom.domNode(r).prev({nodeTypes:[wysihtml5.ELEMENT_NODE]}),o=a?a.querySelector("ul, ol"):null,a&&(o?o.appendChild(r):(i.appendChild(r),a.appendChild(i)),s=!0)}),s}},wysihtml5.commands.outdentList={exec:function(e){var t=e.selection.getSelectionParentsByTag("LI");return!!t&&this.tryToPullLiLevel(t,e)},state:function(){return!1},tryToPullLiLevel:function(e,t){var n,i,a,r,o,s=!1,l=this;return t.selection.executeAndRestoreRangy(function(){var c,d;for(c=e.length;c--;)if(r=e[c],r.parentNode&&(n=r.parentNode,"OL"===n.tagName||"UL"===n.tagName)){if(s=!0,i=wysihtml5.dom.getParentElement(n.parentNode,{nodeName:["OL","UL"]},!1,t.element),a=wysihtml5.dom.getParentElement(n.parentNode,{nodeName:["LI"]},!1,t.element),i&&a)r.nextSibling&&(o=l.getAfterList(n,r),r.appendChild(o)),i.insertBefore(r,a.nextSibling);else{for(r.nextSibling&&(o=l.getAfterList(n,r),r.appendChild(o)),d=r.childNodes.length;d--;)n.parentNode.insertBefore(r.childNodes[d],n.nextSibling);n.parentNode.insertBefore(document.createElement("br"),n.nextSibling),r.parentNode.removeChild(r)}0===n.childNodes.length&&n.parentNode.removeChild(n)}}),s},getAfterList:function(e,t){for(var n=e.nodeName,i=document.createElement(n);t.nextSibling;)i.appendChild(t.nextSibling);return i}},function(e){var t="data-wysihtml5-selection-node",n="data-wysihtml5-selection-offset",i=(e.INVISIBLE_SPACE,e.INVISIBLE_SPACE,e.dom);e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.element=this.composer.element,this.position=0,this.historyStr=[],this.historyDom=[],this.transact(),this._observe()},_observe:function(){var e,t=this;this.composer.sandbox.getDocument(),i.observe(this.element,"keydown",function(e){if(!e.altKey&&(e.ctrlKey||e.metaKey)){var n=e.keyCode,i=90===n&&!e.shiftKey,a=90===n&&e.shiftKey||89===n;i?(t.undo(),e.preventDefault()):a&&(t.redo(),e.preventDefault())}}),i.observe(this.element,"keydown",function(n){var i=n.keyCode;i!==e&&(e=i,(8===i||46===i)&&t.transact())}),this.editor.on("newword:composer",function(){t.transact()}).on("beforecommand:composer",function(){t.transact()})},transact:function(){var i,a,r,o,s,l,c,d=this.historyStr[this.position-1],h=this.composer.getValue(!1,!1),u=this.element.offsetWidth>0&&this.element.offsetHeight>0;h!==d&&(l=this.historyStr.length=this.historyDom.length=this.position,l>25&&(this.historyStr.shift(),this.historyDom.shift(),this.position--),this.position++,u&&(i=this.composer.selection.getRange(),a=i&&i.startContainer?i.startContainer:this.element,r=i&&i.startOffset?i.startOffset:0,a.nodeType===e.ELEMENT_NODE?o=a:(o=a.parentNode,s=this.getChildNodeIndex(o,a)),o.setAttribute(n,r),void 0!==s&&o.setAttribute(t,s)),c=this.element.cloneNode(!!h),this.historyDom.push(c),this.historyStr.push(h),o&&(o.removeAttribute(n),o.removeAttribute(t)))},undo:function(){this.transact(),this.undoPossible()&&(this.set(this.historyDom[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.redoPossible()&&(this.set(this.historyDom[++this.position-1]),this.editor.fire("redo:composer"))},undoPossible:function(){return this.position>1},redoPossible:function(){return this.position<this.historyStr.length},set:function(e){var i,a,r,o,s,l;for(this.element.innerHTML="",i=0,a=e.childNodes,r=e.childNodes.length;r>i;i++)this.element.appendChild(a[i].cloneNode(!0));e.hasAttribute(n)?(o=e.getAttribute(n),l=e.getAttribute(t),s=this.element):(s=this.element.querySelector("["+n+"]")||this.element,o=s.getAttribute(n),l=s.getAttribute(t),s.removeAttribute(n),s.removeAttribute(t)),null!==l&&(s=this.getChildNodeByIndex(s,+l)),this.composer.selection.set(s,o)},getChildNodeIndex:function(e,t){for(var n=0,i=e.childNodes,a=i.length;a>n;n++)if(i[n]===t)return n},getChildNodeByIndex:function(e,t){return e.childNodes[t]}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(e,t,n){this.parent=e,this.element=t,this.config=n,this.config.noTextarea||this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.on("beforeload",function(){e.parent.on("change_view",function(t){t===e.name?(e.parent.currentView=e,e.show(),setTimeout(function(){e.focus()},0)):e.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(e){var t=e.dom,n=e.browser;e.views.Composer=e.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,t,n){this.base(e,t,n),this.config.noTextarea?this.editableArea=t:this.textarea=this.parent.textarea,this.config.contentEditableMode?this._initContentEditableArea():this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(t,n){var i=this.isEmpty()?"":e.quirks.getCorrectInnerHTML(this.element);return!1!==t&&(i=this.parent.parse(i,!1!==n)),i},setValue:function(e,t){t&&(e=this.parent.parse(e));try{this.element.innerHTML=e}catch(t){this.element.innerText=e}},cleanUp:function(){this.parent.parse(this.element)},show:function(){this.editableArea.style.display=this._displayStyle||"",this.config.noTextarea||this.textarea.element.disabled||(this.disable(),this.enable())},hide:function(){this._displayStyle=t.getStyle("display").from(this.editableArea),"none"===this._displayStyle&&(this._displayStyle=null),this.editableArea.style.display="none"},disable:function(){this.parent.fire("disable:composer"),this.element.removeAttribute("contentEditable")},enable:function(){this.parent.fire("enable:composer"),this.element.setAttribute("contentEditable","true")},focus:function(t){e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;t&&n&&this.selection&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==(this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"))&&this.placeholderSet},isEmpty:function(){var e=this.element.innerHTML.toLowerCase();return/^(\s|<br>|<\/br>|<p>|<\/p>)*$/i.test(e)||""===e||"<br>"===e||"<p></p>"===e||"<p><br></p>"===e||this.hasPlaceholderSet()},_initContentEditableArea:function(){var e=this;this.config.noTextarea?this.sandbox=new t.ContentEditableArea(function(){e._create()},{},this.editableArea):(this.sandbox=new t.ContentEditableArea(function(){e._create()}),this.editableArea=this.sandbox.getContentEditable(),t.insert(this.editableArea).after(this.textarea.element),this._createWysiwygFormField())},_initSandbox:function(){var e,n=this;this.sandbox=new t.Sandbox(function(){n._create()},{stylesheets:this.config.stylesheets}),this.editableArea=this.sandbox.getIframe(),e=this.textarea.element,t.insert(this.editableArea).after(e),this._createWysiwygFormField()},_createWysiwygFormField:function(){if(this.textarea.element.form){var e=document.createElement("input");e.type="hidden",e.name="_wysihtml5_mode",e.value=1,t.insert(e).after(this.textarea.element)}},_create:function(){var i,a,r=this;this.doc=this.sandbox.getDocument(),this.element=this.config.contentEditableMode?this.sandbox.getContentEditable():this.doc.body,this.config.noTextarea?this.cleanUp():(this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0,!1)),this.selection=new e.Selection(this.parent,this.element,this.config.uneditableContainerClassname),this.commands=new e.Commands(this.parent),this.config.noTextarea||t.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),t.addClass(this.element,this.config.composerClassName),this.config.style&&!this.config.contentEditableMode&&this.style(),this.observe(),i=this.config.name,i&&(t.addClass(this.element,i),this.config.contentEditableMode||t.addClass(this.editableArea,i)),this.enable(),!this.config.noTextarea&&this.textarea.element.disabled&&this.disable(),a="string"==typeof this.config.placeholder?this.config.placeholder:this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"),a&&t.simulatePlaceholder(this.parent,this,a),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),this._initLineBreaking(),this.config.noTextarea||!this.textarea.element.hasAttribute("autofocus")&&document.querySelector(":focus")!=this.textarea.element||n.isIos()||setTimeout(function(){r.focus(!0)},100),n.clearsContentEditableCorrectly()||e.quirks.ensureProperClearing(this),this.initSync&&this.config.sync&&this.initSync(),this.config.noTextarea||this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var i,a,r,o=this,s=n.canDisableAutoLinking(),l=n.doesAutoLinkingInContentEditable();s&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink&&((!l||l&&s)&&(this.parent.on("newword:composer",function(){t.getTextContent(o.element).match(t.autoLink.URL_REG_EXP)&&o.selection.executeAndRestore(function(n,i){var a,r=o.element.querySelectorAll("."+o.config.uneditableContainerClassname),s=!1;for(a=r.length;a--;)e.dom.contains(r[a],i)&&(s=!0);s||t.autoLink(i.parentNode,[o.config.uneditableContainerClassname])})}),t.observe(this.element,"blur",function(){t.autoLink(o.element,[o.config.uneditableContainerClassname])})),i=this.sandbox.getDocument().getElementsByTagName("a"),a=t.autoLink.URL_REG_EXP,r=function(n){var i=e.lang.string(t.getTextContent(n)).trim();return"www."===i.substr(0,4)&&(i="http://"+i),i},t.observe(this.element,"keydown",function(e){if(i.length){var n,s=o.selection.getSelectedNode(e.target.ownerDocument),l=t.getParentElement(s,{nodeName:"A"},4);l&&(n=r(l),setTimeout(function(){var e=r(l);e!==n&&e.match(a)&&l.setAttribute("href",e)},0))}}))},_initObjectResizing:function(){if(this.commands.exec("enableObjectResizing",!0),n.supportsEvent("resizeend")){var i=["width","height"],a=i.length,r=this.element;t.observe(r,"resizeend",function(t){var n,o=t.target||t.srcElement,s=o.style,l=0;if("IMG"===o.nodeName){for(;a>l;l++)n=i[l],s[n]&&(o.setAttribute(n,parseInt(s[n],10)),s[n]="");e.quirks.redraw(r)}})}},_initUndoManager:function(){this.undoManager=new e.UndoManager(this.parent)},_initLineBreaking:function(){function i(e){var n=t.getParentElement(e,{nodeName:["P","DIV"]},2);n&&t.contains(a.element,n)&&a.selection.executeAndRestore(function(){a.config.useLineBreaks?t.replaceWithChildNodes(n):"P"!==n.nodeName&&t.renameElement(n,"p")})}var a=this,r=["LI","P","H1","H2","H3","H4","H5","H6"],o=["UL","OL","MENU"];this.config.useLineBreaks||t.observe(this.element,["focus","keydown"],function(){if(a.isEmpty()){var e=a.doc.createElement("P");a.element.innerHTML="",a.element.appendChild(e),n.displaysCaretInEmptyContentEditableCorrectly()?a.selection.selectNode(e,!0):(e.innerHTML="<br>",a.selection.setBefore(e.firstChild))}}),t.observe(this.element,"keydown",function(n){var s,l=n.keyCode;if(!n.shiftKey&&(l===e.ENTER_KEY||l===e.BACKSPACE_KEY))return s=t.getParentElement(a.selection.getSelectedNode(),{nodeName:r},4),s?void setTimeout(function(){var n=a.selection.getSelectedNode();if("LI"===s.nodeName){if(!n)return;t.getParentElement(n,{nodeName:o},2)||i(n)}l===e.ENTER_KEY&&s.nodeName.match(/^H[1-6]$/)&&i(n)},0):void(a.config.useLineBreaks&&l===e.ENTER_KEY&&!e.browser.insertsLineBreaksOnReturn()&&(n.preventDefault(),a.commands.exec("insertLineBreak")))})}})}(wysihtml5),function(e){var t=e.dom,n=document,i=window,a=n.createElement("div"),r=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],o=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],s=["html                 { height: 100%; }","body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }","body > p:first-child { margin-top: 0; }","._wysihtml5-temp     { display: none; }",e.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],l=function(e){if(e.setActive)try{e.setActive()}catch(e){}else{var a=e.style,r=n.documentElement.scrollTop||n.body.scrollTop,o=n.documentElement.scrollLeft||n.body.scrollLeft,s={position:a.position,top:a.top,left:a.left,WebkitUserSelect:a.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e),e.focus(),t.setStyles(s).on(e),i.scrollTo&&i.scrollTo(o,r)}};e.views.Composer.prototype.style=function(){var i,c,d=this,h=n.querySelector(":focus"),u=this.textarea.element,f=u.hasAttribute("placeholder"),p=f&&u.getAttribute("placeholder"),m=u.style.display,g=u.disabled;return this.focusStylesHost=a.cloneNode(!1),this.blurStylesHost=a.cloneNode(!1),this.disabledStylesHost=a.cloneNode(!1),f&&u.removeAttribute("placeholder"),u===h&&u.blur(),u.disabled=!1,u.style.display=i="none",(u.getAttribute("rows")&&"auto"===t.getStyle("height").from(u)||u.getAttribute("cols")&&"auto"===t.getStyle("width").from(u))&&(u.style.display=i=m),t.copyStyles(o).from(u).to(this.editableArea).andTo(this.blurStylesHost),t.copyStyles(r).from(u).to(this.element).andTo(this.blurStylesHost),t.insertCSS(s).into(this.element.ownerDocument),u.disabled=!0,t.copyStyles(o).from(u).to(this.disabledStylesHost),t.copyStyles(r).from(u).to(this.disabledStylesHost),u.disabled=g,u.style.display=m,l(u),u.style.display=i,t.copyStyles(o).from(u).to(this.focusStylesHost),t.copyStyles(r).from(u).to(this.focusStylesHost),u.style.display=m,t.copyStyles(["display"]).from(u).to(this.editableArea),c=e.lang.array(o).without(["display"]),h?h.focus():u.blur(),f&&u.setAttribute("placeholder",p),this.parent.on("focus:composer",function(){t.copyStyles(c).from(d.focusStylesHost).to(d.editableArea),t.copyStyles(r).from(d.focusStylesHost).to(d.element)}),this.parent.on("blur:composer",function(){t.copyStyles(c).from(d.blurStylesHost).to(d.editableArea),t.copyStyles(r).from(d.blurStylesHost).to(d.element)}),this.parent.observe("disable:composer",function(){t.copyStyles(c).from(d.disabledStylesHost).to(d.editableArea),t.copyStyles(r).from(d.disabledStylesHost).to(d.element)}),this.parent.observe("enable:composer",function(){t.copyStyles(c).from(d.blurStylesHost).to(d.editableArea),t.copyStyles(r).from(d.blurStylesHost).to(d.element)}),this}}(wysihtml5),function(e){var t=e.dom,n=e.browser,i={66:"bold",73:"italic",85:"underline"},a=function(e,t,n){var i,a=e.getPreviousNode(t,!0),r=e.getSelectedNode();if(1!==r.nodeType&&r.parentNode!==n&&(r=r.parentNode),a)if(1==r.nodeType){if(i=r.firstChild,1==a.nodeType)for(;r.firstChild;)a.appendChild(r.firstChild);else for(;r.firstChild;)t.parentNode.insertBefore(r.firstChild,t);r.parentNode&&r.parentNode.removeChild(r),e.setBefore(i)}else 1==a.nodeType?a.appendChild(r):t.parentNode.insertBefore(r,t),e.setBefore(r)},r=function(e,t,n,i){var r,o,s;t.isCollapsed()?t.caretIsInTheBeginnig("LI")?(e.preventDefault(),i.commands.exec("outdentList")):t.caretIsInTheBeginnig()?e.preventDefault():(t.caretIsFirstInSelection()&&t.getPreviousNode()&&t.getPreviousNode().nodeName&&/^H\d$/gi.test(t.getPreviousNode().nodeName)&&(r=t.getPreviousNode(),e.preventDefault(),/^\s*$/.test(r.textContent||r.innerText)?r.parentNode.removeChild(r):(o=r.ownerDocument.createRange(),o.selectNodeContents(r),o.collapse(!1),t.setSelection(o))),(s=t.caretIsBeforeUneditable())&&(e.preventDefault(),a(t,s,n))):t.containsUneditable()&&(e.preventDefault(),t.deleteContents())},o=function(e){if(e.selection.isCollapsed()){if(e.selection.caretIsInTheBeginnig("LI")&&e.commands.exec("indentList"))return}else e.selection.deleteContents();e.commands.exec("insertHTML","&emsp;")};e.views.Composer.prototype.observe=function(){var a,s,l=this,c=this.getValue(!1,!1),d=this.sandbox.getIframe?this.sandbox.getIframe():this.sandbox.getContentEditable(),h=this.element,u=n.supportsEventsInIframeCorrectly()||this.sandbox.getContentEditable?h:this.sandbox.getWindow(),f=["drop","paste","beforepaste"],p=["drop","paste","mouseup","focus","keyup"];t.observe(d,"DOMNodeRemoved",function(){clearInterval(a),l.parent.fire("destroy:composer")}),n.supportsMutationEvents()||(a=setInterval(function(){t.contains(document.documentElement,d)||(clearInterval(a),l.parent.fire("destroy:composer"))},250)),t.observe(u,p,function(){setTimeout(function(){l.parent.fire("interaction").fire("interaction:composer")},0)}),this.config.handleTables&&(!this.tableClickHandle&&this.doc.execCommand&&e.browser.supportsCommand(this.doc,"enableObjectResizing")&&e.browser.supportsCommand(this.doc,"enableInlineTableEditing")&&(this.sandbox.getIframe?this.tableClickHandle=t.observe(d,["focus","mouseup","mouseover"],function(){l.doc.execCommand("enableObjectResizing",!1,"false"),l.doc.execCommand("enableInlineTableEditing",!1,"false"),l.tableClickHandle.stop()}):setTimeout(function(){l.doc.execCommand("enableObjectResizing",!1,"false"),l.doc.execCommand("enableInlineTableEditing",!1,"false")},0)),this.tableSelection=e.quirks.tableCellsSelection(h,l.parent)),t.observe(u,"focus",function(e){l.parent.fire("focus",e).fire("focus:composer",e),setTimeout(function(){c=l.getValue(!1,!1)},0)}),t.observe(u,"blur",function(e){if(c!==l.getValue(!1,!1)){var t=e;"function"==typeof Object.create&&(t=Object.create(e,{type:{value:"change"}})),l.parent.fire("change",t).fire("change:composer",t)}l.parent.fire("blur",e).fire("blur:composer",e)}),t.observe(h,"dragenter",function(){l.parent.fire("unset_placeholder")}),t.observe(h,f,function(e){l.parent.fire(e.type,e).fire(e.type+":composer",e)}),this.config.copyedFromMarking&&t.observe(h,"copy",function(e){e.clipboardData&&(e.clipboardData.setData("text/html",l.config.copyedFromMarking+l.selection.getHtml()),e.preventDefault()),l.parent.fire(e.type,e).fire(e.type+":composer",e)}),t.observe(h,"keyup",function(t){var n=t.keyCode;(n===e.SPACE_KEY||n===e.ENTER_KEY)&&l.parent.fire("newword:composer")}),this.parent.on("paste:composer",function(){setTimeout(function(){l.parent.fire("newword:composer")},0)}),n.canSelectImagesInContentEditable()||t.observe(h,"mousedown",function(t){var n=t.target,i=h.querySelectorAll("img"),a=h.querySelectorAll("."+l.config.uneditableContainerClassname+" img"),r=e.lang.array(i).without(a);"IMG"===n.nodeName&&e.lang.array(r).contains(n)&&l.selection.selectNode(n)}),n.canSelectImagesInContentEditable()||t.observe(h,"drop",function(){setTimeout(function(){l.selection.getSelection().removeAllRanges()},0)}),n.hasHistoryIssue()&&n.supportsSelectionModify()&&t.observe(h,"keydown",function(e){if(e.metaKey||e.ctrlKey){var t=e.keyCode,n=h.ownerDocument.defaultView,i=n.getSelection();(37===t||39===t)&&(37===t&&(i.modify("extend","left","lineboundary"),e.shiftKey||i.collapseToStart()),39===t&&(i.modify("extend","right","lineboundary"),e.shiftKey||i.collapseToEnd()),e.preventDefault())}}),t.observe(h,"keydown",function(e){var t=e.keyCode,n=i[t];(e.ctrlKey||e.metaKey)&&!e.altKey&&n&&(l.commands.exec(n),e.preventDefault()),8===t?r(e,l.selection,h,l):l.config.handleTabKey&&9===t&&(e.preventDefault(),o(l))}),t.observe(h,"keydown",function(t){var n,i=l.selection.getSelectedNode(!0),a=t.keyCode;!i||"IMG"!==i.nodeName||a!==e.BACKSPACE_KEY&&a!==e.DELETE_KEY||(n=i.parentNode,n.removeChild(i),
"A"!==n.nodeName||n.firstChild||n.parentNode.removeChild(n),setTimeout(function(){e.quirks.redraw(h)},0),t.preventDefault())}),!this.config.contentEditableMode&&n.hasIframeFocusIssue()&&(t.observe(d,"focus",function(){setTimeout(function(){l.doc.querySelector(":focus")!==l.element&&l.focus()},0)}),t.observe(this.element,"blur",function(){setTimeout(function(){l.selection.getSelection().removeAllRanges()},0)})),s={IMG:"Image: ",A:"Link: "},t.observe(h,"mouseover",function(e){var t,n=e.target,i=n.nodeName;("A"===i||"IMG"===i)&&(n.hasAttribute("title")||(t=s[i]+(n.getAttribute("href")||n.getAttribute("src")),n.setAttribute("title",t)))})}}(wysihtml5),function(e){e.views.Synchronizer=Base.extend({constructor:function(e,t,n){this.editor=e,this.textarea=t,this.composer=n,this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue(!1,!1)).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue(!1,!1);t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(e){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(e):this.fromComposerToTextarea(e)},_observe:function(){var t,n=this,i=this.textarea.element.form,a=function(){t=setInterval(function(){n.fromComposerToTextarea()},400)},r=function(){clearInterval(t),t=null};a(),i&&(e.dom.observe(i,"submit",function(){n.sync(!0)}),e.dom.observe(i,"reset",function(){setTimeout(function(){n.fromTextareaToComposer()},0)})),this.editor.on("change_view",function(e){"composer"!==e||t?"textarea"===e&&(n.fromComposerToTextarea(!0),r()):(n.fromTextareaToComposer(!0),a())}),this.editor.on("destroy:composer",r)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n),this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;return!1!==e&&(t=this.parent.parse(t)),t},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.value=e},cleanUp:function(){var e=this.parent.parse(this.element.value);this.element.value=e},hasPlaceholderSet:function(){var e=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,n=this.element.value,i=!n;return e&&i||n===t},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,t=this.parent,n={focusin:"focus",focusout:"blur"},i=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];t.on("beforeload",function(){wysihtml5.dom.observe(e,i,function(e){var i=n[e.type]||e.type;t.fire(i).fire(i+":textarea")}),wysihtml5.dom.observe(e,["paste","drop"],function(){setTimeout(function(){t.fire("paste").fire("paste:textarea")},0)})})}}),function(e){var t,n={name:t,style:!0,toolbar:t,showToolbarAfterInit:!0,autoLink:!0,handleTables:!0,handleTabKey:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},pasteParserRulesets:null,parser:e.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",useLineBreaks:!0,stylesheets:[],placeholderText:t,supportTouchDevices:!0,cleanUp:!0,contentEditableMode:!1,uneditableContainerClassname:"wysihtml5-uneditable-container",copyedFromMarking:'<meta name="copied-from" content="wysihtml5">'};e.Editor=e.lang.Dispatcher.extend({constructor:function(t,i){if(this.editableElement="string"==typeof t?document.getElementById(t):t,this.config=e.lang.object({}).merge(n).merge(i).get(),this._isCompatible=e.browser.supported(),"textarea"!=this.editableElement.nodeName.toLowerCase()&&(this.config.contentEditableMode=!0,this.config.noTextarea=!0),this.config.noTextarea||(this.textarea=new e.views.Textarea(this,this.editableElement,this.config),this.currentView=this.textarea),!this._isCompatible||!this.config.supportTouchDevices&&e.browser.isTouchDevice()){var a=this;return void setTimeout(function(){a.fire("beforeload").fire("load")},0)}e.dom.addClass(document.body,this.config.bodyClassName),this.composer=new e.views.Composer(this,this.editableElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.on("beforeload",this.handleBeforeLoad)},handleBeforeLoad:function(){this.config.noTextarea||(this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer)),this.config.toolbar&&(this.toolbar=new e.toolbar.Toolbar(this,this.config.toolbar,this.config.showToolbarAfterInit))},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(e,t){return this.currentView.getValue(e,t)},setValue:function(e,t){return this.fire("unset_placeholder"),e?(this.currentView.setValue(e,t),this):this.clear()},cleanUp:function(){this.currentView.cleanUp()},focus:function(e){return this.currentView.focus(e),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t,n){var i=this.config.contentEditableMode?document:this.composer?this.composer.sandbox.getDocument():null,a=this.config.parser(t,{rules:this.config.parserRules,cleanUp:this.config.cleanUp,context:i,uneditableClass:this.config.uneditableContainerClassname,clearInternals:n});return"object"==typeof t&&e.quirks.redraw(t),a},_initParser:function(){var t,n=this;e.browser.supportsModenPaste()?this.on("paste:composer",function(i){i.preventDefault(),(t=e.dom.getPastedHtml(i))&&n._cleanAndPaste(t)}):this.on("beforepaste:composer",function(t){t.preventDefault(),e.dom.getPastedHtmlWithDiv(n.composer,function(e){e&&n._cleanAndPaste(e)})})},_cleanAndPaste:function(t){var n=e.quirks.cleanPastedHTML(t,{referenceNode:this.composer.element,rules:this.config.pasteParserRulesets||[{set:this.config.parserRules}],uneditableClass:this.config.uneditableContainerClassname});this.composer.selection.deleteContents(),this.composer.selection.insertHTML(n)}})}(wysihtml5),function(e){var t=e.dom,n="wysihtml5-command-dialog-opened",i="input, select, textarea",a="[data-wysihtml5-dialog-field]",r="data-wysihtml5-dialog-field";e.toolbar.Dialog=e.lang.Dispatcher.extend({constructor:function(e,t){this.link=e,this.container=t},_observe:function(){var a,r,o,s,l,c;if(!this._observed){for(a=this,r=function(e){var t=a._serialize();t==a.elementToChange?a.fire("edit",t):a.fire("save",t),a.hide(),e.preventDefault(),e.stopPropagation()},t.observe(a.link,"click",function(){t.hasClass(a.link,n)&&setTimeout(function(){a.hide()},0)}),t.observe(this.container,"keydown",function(t){var n=t.keyCode;n===e.ENTER_KEY&&r(t),n===e.ESCAPE_KEY&&(a.fire("cancel"),a.hide())}),t.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",r),t.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(e){a.fire("cancel"),a.hide(),e.preventDefault(),e.stopPropagation()}),o=this.container.querySelectorAll(i),s=0,l=o.length,c=function(){clearInterval(a.interval)};l>s;s++)t.observe(o[s],"change",c);this._observed=!0}},_serialize:function(){for(var e=this.elementToChange||{},t=this.container.querySelectorAll(a),n=t.length,i=0;n>i;i++)e[t[i].getAttribute(r)]=t[i].value;return e},_interpolate:function(e){for(var t,n,i,o=document.querySelector(":focus"),s=this.container.querySelectorAll(a),l=s.length,c=0;l>c;c++)(t=s[c])!==o&&(e&&"hidden"===t.type||(n=t.getAttribute(r),i=this.elementToChange&&"boolean"!=typeof this.elementToChange?this.elementToChange.getAttribute(n)||"":t.defaultValue,t.value=i))},show:function(e){if(!t.hasClass(this.link,n)){var a=this,r=this.container.querySelector(i);if(this.elementToChange=e,this._observe(),this._interpolate(),e&&(this.interval=setInterval(function(){a._interpolate(!0)},500)),t.addClass(this.link,n),this.container.style.display="",this.fire("show"),r&&!e)try{r.focus()}catch(e){}}},hide:function(){clearInterval(this.interval),this.elementToChange=null,t.removeClass(this.link,n),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(e){var t=e.dom,n={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},a={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},r={"x-webkit-speech":"",speech:""};e.toolbar.Speech=function(o,s){var l,c,d,h=document.createElement("input");return e.browser.supportsSpeechApiOn(h)?(l=o.editor.textarea.element.getAttribute("lang"),l&&(r.lang=l),c=document.createElement("div"),e.lang.object(i).merge({width:s.offsetWidth+"px",height:s.offsetHeight+"px"}),t.insert(h).into(c),t.insert(c).into(s),t.setStyles(a).on(h),t.setAttributes(r).on(h),t.setStyles(i).on(c),t.setStyles(n).on(s),d="onwebkitspeechchange"in h?"webkitspeechchange":"speechchange",t.observe(h,d,function(){o.execCommand("insertText",h.value),h.value=""}),void t.observe(h,"click",function(e){t.hasClass(s,"wysihtml5-command-disabled")&&e.preventDefault(),e.stopPropagation()})):void(s.style.display="none")}}(wysihtml5),function(e){var t="wysihtml5-command-disabled",n="wysihtml5-commands-disabled",i="wysihtml5-command-active",a="wysihtml5-action-active",r=e.dom;e.toolbar.Toolbar=Base.extend({constructor:function(r,o,s){this.editor=r,this.container="string"==typeof o?document.getElementById(o):o,this.composer=r.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),s&&this.show(),null!=r.config.classNameCommandDisabled&&(t=r.config.classNameCommandDisabled),null!=r.config.classNameCommandsDisabled&&(n=r.config.classNameCommandsDisabled),null!=r.config.classNameCommandActive&&(i=r.config.classNameCommandActive),null!=r.config.classNameActionActive&&(a=r.config.classNameActionActive);for(var l=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),c=l.length,d=0;c>d;d++)new e.toolbar.Speech(this,l[d])},_getLinks:function(t){for(var n,i,a,r,o,s=this[t+"Links"]=e.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+t+"]")).get(),l=s.length,c=0,d=this[t+"Mapping"]={};l>c;c++)n=s[c],a=n.getAttribute("data-wysihtml5-"+t),r=n.getAttribute("data-wysihtml5-"+t+"-value"),i=this.container.querySelector("[data-wysihtml5-"+t+"-group='"+a+"']"),o=this._getDialog(n,a),d[a+":"+r]={link:n,group:i,name:a,value:r,dialog:o,state:!1}},_getDialog:function(t,n){var i,a,r=this,o=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']");return o&&(i=e.toolbar["Dialog_"+n]?new e.toolbar["Dialog_"+n](t,o):new e.toolbar.Dialog(t,o),i.on("show",function(){a=r.composer.selection.getBookmark(),r.editor.fire("show:dialog",{command:n,dialogContainer:o,commandLink:t})}),i.on("save",function(e){a&&r.composer.selection.setBookmark(a),r._execCommand(n,e),r.editor.fire("save:dialog",{command:n,dialogContainer:o,commandLink:t})}),i.on("cancel",function(){r.editor.focus(!1),r.editor.fire("cancel:dialog",{command:n,dialogContainer:o,commandLink:t})})),i},execCommand:function(e,t){if(!this.commandsDisabled){var n=this.commandMapping[e+":"+t];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(e,t)}},_execCommand:function(e,t){this.editor.focus(!1),this.composer.commands.exec(e,t),this._updateLinkStates()},execAction:function(e){var t=this.editor;"change_view"===e&&t.textarea&&(t.currentView===t.textarea?t.fire("change_view","composer"):t.fire("change_view","textarea")),"showSource"==e&&t.fire("showSource")},_observe:function(){for(var e=this,t=this.editor,i=this.container,a=this.commandLinks.concat(this.actionLinks),o=a.length,s=0;o>s;s++)"A"===a[s].nodeName?r.setAttributes({href:"javascript:;",unselectable:"on"}).on(a[s]):r.setAttributes({unselectable:"on"}).on(a[s]);r.delegate(i,"[data-wysihtml5-command], [data-wysihtml5-action]","mousedown",function(e){e.preventDefault()}),r.delegate(i,"[data-wysihtml5-command]","click",function(t){var n=this,i=n.getAttribute("data-wysihtml5-command"),a=n.getAttribute("data-wysihtml5-command-value");e.execCommand(i,a),t.preventDefault()}),r.delegate(i,"[data-wysihtml5-action]","click",function(t){var n=this.getAttribute("data-wysihtml5-action");e.execAction(n),t.preventDefault()}),t.on("interaction:composer",function(){e._updateLinkStates()}),t.on("focus:composer",function(){e.bookmark=null}),this.editor.config.handleTables&&(t.on("tableselect:composer",function(){e.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display=""}),t.on("tableunselect:composer",function(){e.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display="none"})),t.on("change_view",function(a){t.textarea&&setTimeout(function(){e.commandsDisabled="composer"!==a,e._updateLinkStates(),e.commandsDisabled?r.addClass(i,n):r.removeClass(i,n)},0)})},_updateLinkStates:function(){var n,o,s,l,c=this.commandMapping,d=this.actionMapping;for(n in c)l=c[n],this.commandsDisabled?(o=!1,r.removeClass(l.link,i),l.group&&r.removeClass(l.group,i),l.dialog&&l.dialog.hide()):(o=this.composer.commands.state(l.name,l.value),r.removeClass(l.link,t),l.group&&r.removeClass(l.group,t)),l.state!==o&&(l.state=o,o?(r.addClass(l.link,i),l.group&&r.addClass(l.group,i),l.dialog&&("object"==typeof o||e.lang.object(o).isArray()?(!l.dialog.multiselect&&e.lang.object(o).isArray()&&(o=1!==o.length||o[0],l.state=o),l.dialog.show(o)):l.dialog.hide())):(r.removeClass(l.link,i),l.group&&r.removeClass(l.group,i),l.dialog&&l.dialog.hide()));for(n in d)s=d[n],"change_view"===s.name&&(s.state=this.editor.currentView===this.editor.textarea,s.state?r.addClass(s.link,a):r.removeClass(s.link,a))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(e){e.toolbar.Dialog_createTable=e.toolbar.Dialog.extend({show:function(e){this.base(e)}})}(wysihtml5),function(e){var t=(e.dom,"[data-wysihtml5-dialog-field]"),n="data-wysihtml5-dialog-field";e.toolbar.Dialog_foreColorStyle=e.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){for(var e={},i=this.container.querySelectorAll(t),a=i.length,r=0;a>r;r++)e[i[r].getAttribute(n)]=i[r].value;return e},_interpolate:function(i){for(var a,r=document.querySelector(":focus"),o=this.container.querySelectorAll(t),s=o.length,l=0,c=this.elementToChange?e.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,d=c?c.getAttribute("style"):null,h=d?e.quirks.styleParser.parseColor(d,"color"):null;s>l;l++)(a=o[l])!==r&&(i&&"hidden"===a.type||"color"===a.getAttribute(n)&&(a.value=h?h[3]&&1!=h[3]?"rgba("+h[0]+","+h[1]+","+h[2]+","+h[3]+");":"rgb("+h[0]+","+h[1]+","+h[2]+");":"rgb(0,0,0);"))}})}(wysihtml5),function(e){e.dom,e.toolbar.Dialog_fontSizeStyle=e.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){return{size:this.container.querySelector('[data-wysihtml5-dialog-field="size"]').value}},_interpolate:function(){var t=document.querySelector(":focus"),n=this.container.querySelector("[data-wysihtml5-dialog-field='size']"),i=this.elementToChange?e.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,a=i?i.getAttribute("style"):null,r=a?e.quirks.styleParser.parseFontSize(a):null;n&&n!==t&&r&&!/^\s*$/.test(r)&&(n.value=r)}})}(wysihtml5),Handlebars=function(){var e=function(){"use strict";function e(e){this.string=e}return e.prototype.toString=function(){return""+this.string},e}(),t=function(e){"use strict";function t(e){return d[e]||"&amp;"}function n(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function i(e){return e instanceof c?""+e:e||0===e?(e=""+e,u.test(e)?e.replace(h,t):e):""}function a(e){return!e&&0!==e||!(!s(e)||0!==e.length)}var r,o,s,l={},c=e,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},h=/[&<>"'`]/g,u=/[&<>"'`]/;return l.extend=n,r=Object.prototype.toString,l.toString=r,o=function(e){return"function"==typeof e},o(/x/)&&(o=function(e){return"function"==typeof e&&"[object Function]"===r.call(e)}),l.isFunction=o,s=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===r.call(e)},l.isArray=s,l.escapeExpression=i,l.isEmpty=a,l}(e),n=function(){"use strict";function e(e,n){var i,a,r;for(n&&n.firstLine&&(i=n.firstLine,e+=" - "+i+":"+n.firstColumn),a=Error.prototype.constructor.call(this,e),r=0;r<t.length;r++)this[t[r]]=a[t[r]];i&&(this.lineNumber=i,this.column=n.firstColumn)}var t=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=Error(),e}(),i=function(e,t){"use strict";function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(2!==arguments.length)throw new m("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse||function(){},a=n.fn;return l(t)&&(t=t.call(this)),!0===t?a(this):!1===t||null==t?i(this):s(t)?t.length>0?e.helpers.each(t,n):i(this):a(t)}),e.registerHelper("each",function(e,t){var n,i,a,r=t.fn,o=t.inverse,c=0,d="";if(l(e)&&(e=e.call(this)),t.data&&(n=u(t.data)),e&&"object"==typeof e)if(s(e))for(i=e.length;i>c;c++)n&&(n.index=c,n.first=0===c,n.last=c===e.length-1),d+=r(e[c],{data:n});else for(a in e)e.hasOwnProperty(a)&&(n&&(n.key=a,n.index=c,n.first=0===c),d+=r(e[a],{data:n}),c++);return 0===c&&(d=o(this)),d}),e.registerHelper("if",function(e,t){return l(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||p.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return l(e)&&(e=e.call(this)),p.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)})}function a(e,t){h.log(e,t)}var r,o,s,l,c,d,h,u,f={},p=e,m=t;return f.VERSION="1.3.0",r=4,f.COMPILER_REVISION=r,o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},f.REVISION_CHANGES=o,s=p.isArray,l=p.isFunction,c=p.toString,d="[object Object]",f.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:h,log:a,registerHelper:function(e,t,n){if(c.call(e)===d){if(n||t)throw new m("Arg not supported with multiple helpers");p.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){c.call(e)===d?p.extend(this.partials,e):this.partials[e]=t}},h={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(h.level<=e){var n=h.methodMap[e];"undefined"!=typeof console&&console[n]}}},f.logger=h,f.log=a,u=function(e){var t={};return p.extend(t,e),t},f.createFrame=u,f}(t,n),a=function(e,t,n){"use strict";function i(e){var t,n,i=e&&e[0]||1,a=u;if(i!==a){if(a>i)throw t=f[a],n=f[i],new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+t+") or downgrade your runtime to an older version ("+n+").");throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){if(!t)throw new h("No environment passed to template");var n=function(e,n,i,a,r,o){var s,l=t.VM.invokePartial.apply(this,arguments);if(null!=l)return l;if(t.compile)return s={helpers:a,partials:r,data:o},r[n]=t.compile(e,{data:void 0!==o},t),r[n](i,s);throw new h("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:d.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var i=this.programs[e];return n?i=o(e,t,n):i||(i=this.programs[e]=o(e,t)),i},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},d.extend(n,t),d.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,a){var r,o,s,l;return a=a||{},s=a.partial?a:t,a.partial||(r=a.helpers,o=a.partials),l=e.call(i,s,n,r,o,a.data),a.partial||t.VM.checkRevision(i.compilerInfo),l}}function r(e,t,n){var i=Array.prototype.slice.call(arguments,3),a=function(e,a){return a=a||{},t.apply(this,[e,a.data||n].concat(i))};return a.program=e,a.depth=i.length,a}function o(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i}function s(e,t,n,i,a,r){var o={partial:!0,helpers:i,partials:a,data:r};if(void 0===e)throw new h("The partial "+t+" could not be found");return e instanceof Function?e(n,o):void 0}function l(){return""}var c={},d=e,h=t,u=n.COMPILER_REVISION,f=n.REVISION_CHANGES;return c.checkRevision=i,c.template=a,c.programWithDepth=r,c.program=o,c.invokePartial=s,c.noop=l,c}(t,n,i);return function(e,t,n,i,a){"use strict";var r=e,o=t,s=n,l=i,c=a,d=function(){var e=new r.HandlebarsEnvironment;return l.extend(e,r),e.SafeString=o,e.Exception=s,e.Utils=l,e.VM=c,e.template=function(t){return c.template(t,e)},e},h=d();return h.create=d,h}(i,e,n,t,a)}(),this.wysihtml5=this.wysihtml5||{},this.wysihtml5.tpl=this.wysihtml5.tpl||{},this.wysihtml5.tpl.blockquote=Handlebars.template(function(e,t,n,i,a){function r(e){var t,n="";return n+="btn-"+h((t=e&&e.options,t=null==t||!1===t?t:t.toolbar,t=null==t||!1===t?t:t.size,typeof t===d?t.apply(e):t))}function o(){return' \n      <span class="fa fa-quote-left"></span>\n    '}function s(){return'\n      <span class="glyphicon glyphicon-quote"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var l,c="",d="function",h=this.escapeExpression,u=this;return c+='<li>\n  <a class="btn ',l=n.if.call(t,(l=t&&t.options,l=null==l||!1===l?l:l.toolbar,null==l||!1===l?l:l.size),{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(l||0===l)&&(c+=l),c+=' btn-default" data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="blockquote" data-wysihtml5-display-format-name="false" tabindex="-1">\n    ',l=n.if.call(t,(l=t&&t.options,l=null==l||!1===l?l:l.toolbar,null==l||!1===l?l:l.fa),{hash:{},inverse:u.program(5,s,a),fn:u.program(3,o,a),data:a}),(l||0===l)&&(c+=l),c+="\n  </a>\n</li>\n"}),this.wysihtml5.tpl.color=Handlebars.template(function(e,t,n,i,a){function r(e){var t,n="";return n+="btn-"+c((t=e&&e.options,t=null==t||!1===t?t:t.toolbar,t=null==t||!1===t?t:t.size,typeof t===l?t.apply(e):t))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,s="",l="function",c=this.escapeExpression,d=this;return s+='<li class="dropdown">\n  <a class="btn btn-default dropdown-toggle ',o=n.if.call(t,(o=t&&t.options,o=null==o||!1===o?o:o.toolbar,null==o||!1===o?o:o.size),{hash:{},inverse:d.noop,fn:d.program(1,r,a),data:a}),(o||0===o)&&(s+=o),s+='" data-toggle="dropdown" tabindex="-1">\n    <span class="current-color">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.black,typeof o===l?o.apply(t):o))+'</span>\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="black"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="black">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.black,typeof o===l?o.apply(t):o))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="silver"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="silver">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.silver,typeof o===l?o.apply(t):o))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="gray"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="gray">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.gray,typeof o===l?o.apply(t):o))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="maroon"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="maroon">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.maroon,typeof o===l?o.apply(t):o))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="red"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="red">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.red,typeof o===l?o.apply(t):o))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="purple"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="purple">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.purple,typeof o===l?o.apply(t):o))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="green"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="green">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.green,typeof o===l?o.apply(t):o))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="olive"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="olive">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.olive,typeof o===l?o.apply(t):o))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="navy"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="navy">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.navy,typeof o===l?o.apply(t):o))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="blue"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="blue">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.blue,typeof o===l?o.apply(t):o))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="orange"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="orange">'+c((o=t&&t.locale,o=null==o||!1===o?o:o.colours,o=null==o||!1===o?o:o.orange,typeof o===l?o.apply(t):o))+"</a></li>\n  </ul>\n</li>\n"}),this.wysihtml5.tpl.emphasis=Handlebars.template(function(e,t,n,i,a){function r(e){var t,n="";return n+="btn-"+d((t=e&&e.options,t=null==t||!1===t?t:t.toolbar,t=null==t||!1===t?t:t.size,typeof t===c?t.apply(e):t))}function o(e,t){var i,a="";return a+='\n    <a class="btn ',i=n.if.call(e,(i=e&&e.options,i=null==i||!1===i?i:i.toolbar,null==i||!1===i?i:i.size),{hash:{},inverse:h.noop,fn:h.program(1,r,t),data:t}),(i||0===i)&&(a+=i),a+=' btn-default" data-wysihtml5-command="small" title="CTRL+S" tabindex="-1">'+d((i=e&&e.locale,i=null==i||!1===i?i:i.emphasis,i=null==i||!1===i?i:i.small,typeof i===c?i.apply(e):i))+"</a>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var s,l="",c="function",d=this.escapeExpression,h=this;return l+='<li>\n  <div class="btn-group">\n    <a class="btn ',s=n.if.call(t,(s=t&&t.options,s=null==s||!1===s?s:s.toolbar,null==s||!1===s?s:s.size),{hash:{},inverse:h.noop,fn:h.program(1,r,a),data:a}),(s||0===s)&&(l+=s),l+=' btn-default" data-wysihtml5-command="bold" title="CTRL+B" tabindex="-1">'+d((s=t&&t.locale,s=null==s||!1===s?s:s.emphasis,s=null==s||!1===s?s:s.bold,typeof s===c?s.apply(t):s))+'</a>\n    <a class="btn ',s=n.if.call(t,(s=t&&t.options,s=null==s||!1===s?s:s.toolbar,null==s||!1===s?s:s.size),{hash:{},inverse:h.noop,fn:h.program(1,r,a),data:a}),(s||0===s)&&(l+=s),l+=' btn-default" data-wysihtml5-command="italic" title="CTRL+I" tabindex="-1">'+d((s=t&&t.locale,s=null==s||!1===s?s:s.emphasis,s=null==s||!1===s?s:s.italic,typeof s===c?s.apply(t):s))+'</a>\n    <a class="btn ',s=n.if.call(t,(s=t&&t.options,s=null==s||!1===s?s:s.toolbar,null==s||!1===s?s:s.size),{hash:{},inverse:h.noop,fn:h.program(1,r,a),data:a}),(s||0===s)&&(l+=s),l+=' btn-default" data-wysihtml5-command="underline" title="CTRL+U" tabindex="-1">'+d((s=t&&t.locale,s=null==s||!1===s?s:s.emphasis,s=null==s||!1===s?s:s.underline,typeof s===c?s.apply(t):s))+"</a>\n    ",s=n.if.call(t,(s=t&&t.options,s=null==s||!1===s?s:s.toolbar,s=null==s||!1===s?s:s.emphasis,null==s||!1===s?s:s.small),{hash:{},inverse:h.noop,fn:h.program(3,o,a),data:a}),(s||0===s)&&(l+=s),l+="\n  </div>\n</li>\n"}),this.wysihtml5.tpl["font-styles"]=Handlebars.template(function(e,t,n,i,a){function r(e){var t,n="";return n+="btn-"+h((t=e&&e.options,t=null==t||!1===t?t:t.toolbar,t=null==t||!1===t?t:t.size,typeof t===d?t.apply(e):t))}function o(){return'\n      <span class="fa fa-font"></span>\n    '}function s(){return'\n      <span class="glyphicon glyphicon-font"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var l,c="",d="function",h=this.escapeExpression,u=this;return c+='<li class="dropdown">\n  <a class="btn btn-default dropdown-toggle ',l=n.if.call(t,(l=t&&t.options,l=null==l||!1===l?l:l.toolbar,null==l||!1===l?l:l.size),{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(l||0===l)&&(c+=l),c+='" data-toggle="dropdown">\n    ',l=n.if.call(t,(l=t&&t.options,l=null==l||!1===l?l:l.toolbar,null==l||!1===l?l:l.fa),{hash:{},inverse:u.program(5,s,a),fn:u.program(3,o,a),data:a}),(l||0===l)&&(c+=l),c+='\n    <span class="current-font">'+h((l=t&&t.locale,l=null==l||!1===l?l:l.font_styles,l=null==l||!1===l?l:l.normal,typeof l===d?l.apply(t):l))+'</span>\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="p" tabindex="-1">'+h((l=t&&t.locale,l=null==l||!1===l?l:l.font_styles,l=null==l||!1===l?l:l.normal,typeof l===d?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h1" tabindex="-1">'+h((l=t&&t.locale,l=null==l||!1===l?l:l.font_styles,l=null==l||!1===l?l:l.h1,typeof l===d?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h2" tabindex="-1">'+h((l=t&&t.locale,l=null==l||!1===l?l:l.font_styles,l=null==l||!1===l?l:l.h2,typeof l===d?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h3" tabindex="-1">'+h((l=t&&t.locale,l=null==l||!1===l?l:l.font_styles,l=null==l||!1===l?l:l.h3,typeof l===d?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h4" tabindex="-1">'+h((l=t&&t.locale,l=null==l||!1===l?l:l.font_styles,l=null==l||!1===l?l:l.h4,typeof l===d?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h5" tabindex="-1">'+h((l=t&&t.locale,l=null==l||!1===l?l:l.font_styles,l=null==l||!1===l?l:l.h5,typeof l===d?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h6" tabindex="-1">'+h((l=t&&t.locale,l=null==l||!1===l?l:l.font_styles,l=null==l||!1===l?l:l.h6,typeof l===d?l.apply(t):l))+"</a></li>\n  </ul>\n</li>\n"}),this.wysihtml5.tpl.html=Handlebars.template(function(e,t,n,i,a){function r(e){var t,n="";return n+="btn-"+h((t=e&&e.options,t=null==t||!1===t?t:t.toolbar,t=null==t||!1===t?t:t.size,typeof t===d?t.apply(e):t))}function o(){return'\n        <span class="fa fa-pencil"></span>\n      '}function s(){return'\n        <span class="glyphicon glyphicon-pencil"></span>\n      '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var l,c="",d="function",h=this.escapeExpression,u=this;return c+='<li>\n  <div class="btn-group">\n    <a class="btn ',l=n.if.call(t,(l=t&&t.options,l=null==l||!1===l?l:l.toolbar,null==l||!1===l?l:l.size),{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(l||0===l)&&(c+=l),c+=' btn-default" data-wysihtml5-action="change_view" title="'+h((l=t&&t.locale,l=null==l||!1===l?l:l.html,l=null==l||!1===l?l:l.edit,
typeof l===d?l.apply(t):l))+'" tabindex="-1">\n      ',l=n.if.call(t,(l=t&&t.options,l=null==l||!1===l?l:l.toolbar,null==l||!1===l?l:l.fa),{hash:{},inverse:u.program(5,s,a),fn:u.program(3,o,a),data:a}),(l||0===l)&&(c+=l),c+="\n    </a>\n  </div>\n</li>\n"}),this.wysihtml5.tpl.image=Handlebars.template(function(e,t,n,i,a){function r(){return"modal-sm"}function o(e){var t,n="";return n+="btn-"+u((t=e&&e.options,t=null==t||!1===t?t:t.toolbar,t=null==t||!1===t?t:t.size,typeof t===h?t.apply(e):t))}function s(){return'\n      <span class="fa fa-file-image-o"></span>\n    '}function l(){return'\n      <span class="glyphicon glyphicon-picture"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var c,d="",h="function",u=this.escapeExpression,f=this;return d+='<li>\n  <div class="bootstrap-wysihtml5-insert-image-modal modal fade" data-wysihtml5-dialog="insertImage">\n    <div class="modal-dialog ',c=n.if.call(t,(c=t&&t.options,c=null==c||!1===c?c:c.toolbar,null==c||!1===c?c:c.smallmodals),{hash:{},inverse:f.noop,fn:f.program(1,r,a),data:a}),(c||0===c)&&(d+=c),d+='">\n      <div class="modal-content">\n        <div class="modal-header">\n          <a class="close" data-dismiss="modal">&times;</a>\n          <h3>'+u((c=t&&t.locale,c=null==c||!1===c?c:c.image,c=null==c||!1===c?c:c.insert,typeof c===h?c.apply(t):c))+'</h3>\n        </div>\n        <div class="modal-body">\n          <div class="form-group">\n            <input value="http://" class="bootstrap-wysihtml5-insert-image-url form-control" data-wysihtml5-dialog-field="src">\n          </div> \n        </div>\n        <div class="modal-footer">\n          <a class="btn btn-default" data-dismiss="modal" data-wysihtml5-dialog-action="cancel" href="#">'+u((c=t&&t.locale,c=null==c||!1===c?c:c.image,c=null==c||!1===c?c:c.cancel,typeof c===h?c.apply(t):c))+'</a>\n          <a class="btn btn-primary" data-dismiss="modal"  data-wysihtml5-dialog-action="save" href="#">'+u((c=t&&t.locale,c=null==c||!1===c?c:c.image,c=null==c||!1===c?c:c.insert,typeof c===h?c.apply(t):c))+'</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <a class="btn ',c=n.if.call(t,(c=t&&t.options,c=null==c||!1===c?c:c.toolbar,null==c||!1===c?c:c.size),{hash:{},inverse:f.noop,fn:f.program(3,o,a),data:a}),(c||0===c)&&(d+=c),d+=' btn-default" data-wysihtml5-command="insertImage" title="'+u((c=t&&t.locale,c=null==c||!1===c?c:c.image,c=null==c||!1===c?c:c.insert,typeof c===h?c.apply(t):c))+'" tabindex="-1">\n    ',c=n.if.call(t,(c=t&&t.options,c=null==c||!1===c?c:c.toolbar,null==c||!1===c?c:c.fa),{hash:{},inverse:f.program(7,l,a),fn:f.program(5,s,a),data:a}),(c||0===c)&&(d+=c),d+="\n  </a>\n</li>\n"}),this.wysihtml5.tpl.link=Handlebars.template(function(e,t,n,i,a){function r(){return"modal-sm"}function o(e){var t,n="";return n+="btn-"+u((t=e&&e.options,t=null==t||!1===t?t:t.toolbar,t=null==t||!1===t?t:t.size,typeof t===h?t.apply(e):t))}function s(){return'\n      <span class="fa fa-share-square-o"></span>\n    '}function l(){return'\n      <span class="glyphicon glyphicon-share"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var c,d="",h="function",u=this.escapeExpression,f=this;return d+='<li>\n  <div class="bootstrap-wysihtml5-insert-link-modal modal fade" data-wysihtml5-dialog="createLink">\n    <div class="modal-dialog ',c=n.if.call(t,(c=t&&t.options,c=null==c||!1===c?c:c.toolbar,null==c||!1===c?c:c.smallmodals),{hash:{},inverse:f.noop,fn:f.program(1,r,a),data:a}),(c||0===c)&&(d+=c),d+='">\n      <div class="modal-content">\n        <div class="modal-header">\n          <a class="close" data-dismiss="modal">&times;</a>\n          <h3>'+u((c=t&&t.locale,c=null==c||!1===c?c:c.link,c=null==c||!1===c?c:c.insert,typeof c===h?c.apply(t):c))+'</h3>\n        </div>\n        <div class="modal-body">\n          <div class="form-group">\n            <input value="http://" class="bootstrap-wysihtml5-insert-link-url form-control" data-wysihtml5-dialog-field="href">\n          </div> \n          <div class="checkbox">\n            <label> \n              <input type="checkbox" class="bootstrap-wysihtml5-insert-link-target" checked>'+u((c=t&&t.locale,c=null==c||!1===c?c:c.link,c=null==c||!1===c?c:c.target,typeof c===h?c.apply(t):c))+'\n            </label>\n          </div>\n        </div>\n        <div class="modal-footer">\n          <a class="btn btn-default" data-dismiss="modal" data-wysihtml5-dialog-action="cancel" href="#">'+u((c=t&&t.locale,c=null==c||!1===c?c:c.link,c=null==c||!1===c?c:c.cancel,typeof c===h?c.apply(t):c))+'</a>\n          <a href="#" class="btn btn-primary" data-dismiss="modal" data-wysihtml5-dialog-action="save">'+u((c=t&&t.locale,c=null==c||!1===c?c:c.link,c=null==c||!1===c?c:c.insert,typeof c===h?c.apply(t):c))+'</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <a class="btn ',c=n.if.call(t,(c=t&&t.options,c=null==c||!1===c?c:c.toolbar,null==c||!1===c?c:c.size),{hash:{},inverse:f.noop,fn:f.program(3,o,a),data:a}),(c||0===c)&&(d+=c),d+=' btn-default" data-wysihtml5-command="createLink" title="'+u((c=t&&t.locale,c=null==c||!1===c?c:c.link,c=null==c||!1===c?c:c.insert,typeof c===h?c.apply(t):c))+'" tabindex="-1">\n    ',c=n.if.call(t,(c=t&&t.options,c=null==c||!1===c?c:c.toolbar,null==c||!1===c?c:c.fa),{hash:{},inverse:f.program(7,l,a),fn:f.program(5,s,a),data:a}),(c||0===c)&&(d+=c),d+="\n  </a>\n</li>\n"}),this.wysihtml5.tpl.lists=Handlebars.template(function(e,t,n,i,a){function r(e){var t,n="";return n+="btn-"+y((t=e&&e.options,t=null==t||!1===t?t:t.toolbar,t=null==t||!1===t?t:t.size,typeof t===g?t.apply(e):t))}function o(){return'\n      <span class="fa fa-list-ul"></span>\n    '}function s(){return'\n      <span class="glyphicon glyphicon-list"></span>\n    '}function l(){return'\n      <span class="fa fa-list-ol"></span>\n    '}function c(){return'\n      <span class="glyphicon glyphicon-th-list"></span>\n    '}function d(){return'\n      <span class="fa fa-outdent"></span>\n    '}function h(){return'\n      <span class="glyphicon glyphicon-indent-right"></span>\n    '}function u(){return'\n      <span class="fa fa-indent"></span>\n    '}function f(){return'\n      <span class="glyphicon glyphicon-indent-left"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var p,m="",g="function",y=this.escapeExpression,v=this;return m+='<li>\n  <div class="btn-group">\n    <a class="btn ',p=n.if.call(t,(p=t&&t.options,p=null==p||!1===p?p:p.toolbar,null==p||!1===p?p:p.size),{hash:{},inverse:v.noop,fn:v.program(1,r,a),data:a}),(p||0===p)&&(m+=p),m+=' btn-default" data-wysihtml5-command="insertUnorderedList" title="'+y((p=t&&t.locale,p=null==p||!1===p?p:p.lists,p=null==p||!1===p?p:p.unordered,typeof p===g?p.apply(t):p))+'" tabindex="-1">\n    ',p=n.if.call(t,(p=t&&t.options,p=null==p||!1===p?p:p.toolbar,null==p||!1===p?p:p.fa),{hash:{},inverse:v.program(5,s,a),fn:v.program(3,o,a),data:a}),(p||0===p)&&(m+=p),m+='\n    </a>\n    <a class="btn ',p=n.if.call(t,(p=t&&t.options,p=null==p||!1===p?p:p.toolbar,null==p||!1===p?p:p.size),{hash:{},inverse:v.noop,fn:v.program(1,r,a),data:a}),(p||0===p)&&(m+=p),m+=' btn-default" data-wysihtml5-command="insertOrderedList" title="'+y((p=t&&t.locale,p=null==p||!1===p?p:p.lists,p=null==p||!1===p?p:p.ordered,typeof p===g?p.apply(t):p))+'" tabindex="-1">\n    ',p=n.if.call(t,(p=t&&t.options,p=null==p||!1===p?p:p.toolbar,null==p||!1===p?p:p.fa),{hash:{},inverse:v.program(9,c,a),fn:v.program(7,l,a),data:a}),(p||0===p)&&(m+=p),m+='\n    </a>\n    <a class="btn ',p=n.if.call(t,(p=t&&t.options,p=null==p||!1===p?p:p.toolbar,null==p||!1===p?p:p.size),{hash:{},inverse:v.noop,fn:v.program(1,r,a),data:a}),(p||0===p)&&(m+=p),m+=' btn-default" data-wysihtml5-command="Outdent" title="'+y((p=t&&t.locale,p=null==p||!1===p?p:p.lists,p=null==p||!1===p?p:p.outdent,typeof p===g?p.apply(t):p))+'" tabindex="-1">\n    ',p=n.if.call(t,(p=t&&t.options,p=null==p||!1===p?p:p.toolbar,null==p||!1===p?p:p.fa),{hash:{},inverse:v.program(13,h,a),fn:v.program(11,d,a),data:a}),(p||0===p)&&(m+=p),m+='\n    </a>\n    <a class="btn ',p=n.if.call(t,(p=t&&t.options,p=null==p||!1===p?p:p.toolbar,null==p||!1===p?p:p.size),{hash:{},inverse:v.noop,fn:v.program(1,r,a),data:a}),(p||0===p)&&(m+=p),m+=' btn-default" data-wysihtml5-command="Indent" title="'+y((p=t&&t.locale,p=null==p||!1===p?p:p.lists,p=null==p||!1===p?p:p.indent,typeof p===g?p.apply(t):p))+'" tabindex="-1">\n    ',p=n.if.call(t,(p=t&&t.options,p=null==p||!1===p?p:p.toolbar,null==p||!1===p?p:p.fa),{hash:{},inverse:v.program(17,f,a),fn:v.program(15,u,a),data:a}),(p||0===p)&&(m+=p),m+="\n    </a>\n  </div>\n</li>\n"}),function(e){"use strict";"function"==typeof define&&define.amd?define("bootstrap.wysihtml5",["jquery","wysihtml5","bootstrap","bootstrap.wysihtml5.templates","bootstrap.wysihtml5.commands"],e):e(jQuery,wysihtml5)}(function(e,t){"use strict";!function(e,t){var n,i,a,r=function(e,n,i){return t.tpl[e]?t.tpl[e]({locale:n,options:i}):void 0},o=function(n,a){var r,o;this.el=n,r=e.extend(!0,{},i,a);for(o in r.customTemplates)r.customTemplates.hasOwnProperty(o)&&(t.tpl[o]=r.customTemplates[o]);this.toolbar=this.createToolbar(n,r),this.editor=this.createEditor(r)};o.prototype={constructor:o,createEditor:function(t){t=t||{},t=e.extend(!0,{},t),t.toolbar=this.toolbar[0],this.initializeEditor(this.el[0],t)},initializeEditor:function(e,n){var i,a=new t.Editor(this.el[0],n);if(a.on("beforeload",this.syncBootstrapDialogEvents),a.on("beforeload",this.loadParserRules),a.composer.editableArea.contentDocument?this.addMoreShortcuts(a,a.composer.editableArea.contentDocument.body||a.composer.editableArea.contentDocument,n.shortcuts):this.addMoreShortcuts(a,a.composer.editableArea,n.shortcuts),n&&n.events)for(i in n.events)n.events.hasOwnProperty(i)&&a.on(i,n.events[i]);return a},loadParserRules:function(){"string"===e.type(this.config.parserRules)&&e.ajax({dataType:"json",url:this.config.parserRules,context:this,error:function(e,t,n){},success:function(e){this.config.parserRules=e}}),this.config.pasteParserRulesets&&"string"===e.type(this.config.pasteParserRulesets)&&e.ajax({dataType:"json",url:this.config.pasteParserRulesets,context:this,error:function(e,t,n){},success:function(e){this.config.pasteParserRulesets=e}})},syncBootstrapDialogEvents:function(){var t=this;e.map(this.toolbar.commandMapping,function(e){return[e]}).filter(function(e){return e.dialog}).map(function(e){return e.dialog}).forEach(function(n){n.on("show",function(){e(this.container).modal("show")}),n.on("hide",function(){e(this.container).modal("hide"),setTimeout(t.composer.focus,0)}),e(n.container).on("shown.bs.modal",function(){e(this).find("input, select, textarea").first().focus()})}),this.on("change_view",function(){e(this.toolbar.container.children).find("a.btn").not('[data-wysihtml5-action="change_view"]').toggleClass("disabled")})},createToolbar:function(t,n){var o,s,l=this,c=e("<ul/>",{class:"wysihtml5-toolbar",style:"display:none"}),d=n.locale||i.locale||"en";a.hasOwnProperty(d)||(d="en"),o=e.extend(!0,{},a.en,a[d]);for(s in n.toolbar)n.toolbar[s]&&c.append(r(s,o,n));return c.find('a[data-wysihtml5-command="formatBlock"]').click(function(t){var n=t.delegateTarget||t.target||t.srcElement,i=e(n),a=i.data("wysihtml5-display-format-name"),r=i.data("wysihtml5-format-name")||i.html();(void 0===a||"true"===a)&&l.toolbar.find(".current-font").text(r)}),c.find('a[data-wysihtml5-command="foreColor"]').click(function(t){var n=t.target||t.srcElement,i=e(n);l.toolbar.find(".current-color").text(i.html())}),this.el.before(c),c},addMoreShortcuts:function(e,n,i){t.dom.observe(n,"keydown",function(n){var a,r=n.keyCode,o=i[r];(n.ctrlKey||n.metaKey||n.altKey)&&o&&t.commands[o]&&(a=e.toolbar.commandMapping[o+":null"],a&&a.dialog&&!a.state?a.dialog.show():t.commands[o].exec(e.composer,o),n.preventDefault())})}},n={resetDefaults:function(){e.fn.wysihtml5.defaultOptions=e.extend(!0,{},e.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var n=e(this);n.data("wysihtml5",new o(n,t))})},shallowExtend:function(t){var i=e.extend({},e.fn.wysihtml5.defaultOptions,t||{},e(this).data()),a=this;return n.bypassDefaults.apply(a,[i])},deepExtend:function(t){var i=e.extend(!0,{},e.fn.wysihtml5.defaultOptions,t||{}),a=this;return n.bypassDefaults.apply(a,[i])},init:function(e){var t=this;return n.shallowExtend.apply(t,[e])}},e.fn.wysihtml5=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.wysihtml5"):n.init.apply(this,arguments)},e.fn.wysihtml5.Constructor=o,i=e.fn.wysihtml5.defaultOptions={toolbar:{"font-styles":!0,color:!1,emphasis:{small:!0},blockquote:!0,lists:!0,html:!1,link:!0,image:!0,smallmodals:!1},useLineBreaks:!1,parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},strong:{},em:{},p:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url"},set_attributes:{target:"_blank",rel:"nofollow"}},span:1,div:1,small:1,code:1,pre:1}},locale:"en",shortcuts:{83:"small",75:"createLink"}},void 0===e.fn.wysihtml5.defaultOptionsCache&&(e.fn.wysihtml5.defaultOptionsCache=e.extend(!0,{},e.fn.wysihtml5.defaultOptions)),a=e.fn.wysihtml5.locale={}}(e,t)}),function(e){e.commands.small={exec:function(t,n){return e.commands.formatInline.exec(t,n,"small")},state:function(t,n){return e.commands.formatInline.state(t,n,"small")}}}(wysihtml5),function(e){"function"==typeof define&&define.amd?define("bootstrap.wysihtml5.en-US",["jquery","bootstrap.wysihtml5"],e):e(jQuery)}(function(e){e.fn.wysihtml5.locale.en=e.fn.wysihtml5.locale["en-US"]={font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline",small:"Small"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}),function(e,t,n){var i=function(i){function a(e){var t,n,r={};i.each(e,function(i){(t=i.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(t[1]+" ")&&(n=i.replace(t[0],t[2].toLowerCase()),r[n]=i,"o"===t[1]&&a(e[i]))}),e._hungarianMap=r}function r(e,t,o){e._hungarianMap||a(e);var s;i.each(t,function(a){(s=e._hungarianMap[a])===n||!o&&t[s]!==n||("o"===s.charAt(0)?(t[s]||(t[s]={}),i.extend(!0,t[s],t[a]),r(e[s],t[s],o)):t[s]=t[a])})}function o(e){var t=Ve.defaults.oLanguage,n=e.sZeroRecords;!e.sEmptyTable&&n&&"No data available in table"===t.sEmptyTable&&Pe(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&n&&"Loading..."===t.sLoadingRecords&&Pe(e,e,"sZeroRecords","sLoadingRecords"),e.sInfoThousands&&(e.sThousands=e.sInfoThousands),(e=e.sDecimal)&&Ye(e)}function s(e){if(pt(e,"ordering","bSort"),pt(e,"orderMulti","bSortMulti"),pt(e,"orderClasses","bSortClasses"),pt(e,"orderCellsTop","bSortCellsTop"),pt(e,"order","aaSorting"),pt(e,"orderFixed","aaSortingFixed"),pt(e,"paging","bPaginate"),pt(e,"pagingType","sPaginationType"),pt(e,"pageLength","iDisplayLength"),pt(e,"searching","bFilter"),e=e.aoSearchCols)for(var t=0,n=e.length;t<n;t++)e[t]&&r(Ve.models.oSearch,e[t])}function l(e){pt(e,"orderable","bSortable"),pt(e,"orderData","aDataSort"),pt(e,"orderSequence","asSorting"),pt(e,"orderDataType","sortDataType");var t=e.aDataSort;t&&!i.isArray(t)&&(e.aDataSort=[t])}function c(e){var e=e.oBrowser,t=i("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(i("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(i('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),n=t.find(".test");e.bScrollOversize=100===n[0].offsetWidth,e.bScrollbarLeft=1!==Math.round(n.offset().left),t.remove()}function d(e,t,i,a,r,o){var s,l=!1;for(i!==n&&(s=i,l=!0);a!==r;)e.hasOwnProperty(a)&&(s=l?t(s,e[a],a,e):e[a],l=!0,a+=o);return s}function h(e,n){var a=Ve.defaults.column,r=e.aoColumns.length,a=i.extend({},Ve.models.oColumn,a,{nTh:n||t.createElement("th"),sTitle:a.sTitle?a.sTitle:n?n.innerHTML:"",aDataSort:a.aDataSort?a.aDataSort:[r],mData:a.mData?a.mData:r,idx:r});e.aoColumns.push(a),a=e.aoPreSearchCols,a[r]=i.extend({},Ve.models.oSearch,a[r]),u(e,r,i(n).data())}function u(e,t,a){var t=e.aoColumns[t],o=e.oClasses,s=i(t.nTh);if(!t.sWidthOrig){t.sWidthOrig=s.attr("width")||null;var c=(s.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);c&&(t.sWidthOrig=c[1])}a!==n&&null!==a&&(l(a),r(Ve.defaults.column,a),a.mDataProp!==n&&!a.mData&&(a.mData=a.mDataProp),a.sType&&(t._sManualType=a.sType),a.className&&!a.sClass&&(a.sClass=a.className),i.extend(t,a),Pe(t,a,"sWidth","sWidthOrig"),a.iDataSort!==n&&(t.aDataSort=[a.iDataSort]),Pe(t,a,"aDataSort"));var d=t.mData,h=D(d),u=t.mRender?D(t.mRender):null,a=function(e){return"string"==typeof e&&-1!==e.indexOf("@")};t._bAttrSrc=i.isPlainObject(d)&&(a(d.sort)||a(d.type)||a(d.filter)),t.fnGetData=function(e,t,i){var a=h(e,t,n,i);return u&&t?u(a,t,e,i):a},t.fnSetData=function(e,t,n){return _(d)(e,t,n)},"number"!=typeof d&&(e._rowReadObject=!0),e.oFeatures.bSort||(t.bSortable=!1,s.addClass(o.sSortableNone)),e=-1!==i.inArray("asc",t.asSorting),a=-1!==i.inArray("desc",t.asSorting),t.bSortable&&(e||a)?e&&!a?(t.sSortingClass=o.sSortableAsc,t.sSortingClassJUI=o.sSortJUIAscAllowed):!e&&a?(t.sSortingClass=o.sSortableDesc,t.sSortingClassJUI=o.sSortJUIDescAllowed):(t.sSortingClass=o.sSortable,t.sSortingClassJUI=o.sSortJUI):(t.sSortingClass=o.sSortableNone,t.sSortingClassJUI="")}function f(e){if(!1!==e.oFeatures.bAutoWidth){var t=e.aoColumns;ge(e);for(var n=0,i=t.length;n<i;n++)t[n].nTh.style.width=t[n].sWidth}t=e.oScroll,(""!==t.sY||""!==t.sX)&&pe(e),Be(e,null,"column-sizing",[e])}function p(e,t){var n=y(e,"bVisible");return"number"==typeof n[t]?n[t]:null}function m(e,t){var n=y(e,"bVisible"),n=i.inArray(t,n);return-1!==n?n:null}function g(e){return y(e,"bVisible").length}function y(e,t){var n=[];return i.map(e.aoColumns,function(e,i){e[t]&&n.push(i)}),n}function v(e){var t,i,a,r,o,s,l,c,d,h=e.aoColumns,u=e.aoData,f=Ve.ext.type.detect;for(t=0,i=h.length;t<i;t++)if(l=h[t],d=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(a=0,r=f.length;a<r;a++){for(o=0,s=u.length;o<s&&(d[o]===n&&(d[o]=x(e,o,t,"type")),(c=f[a](d[o],e))||a===f.length-1)&&"html"!==c;o++);if(c){l.sType=c;break}}l.sType||(l.sType="string")}}function b(e,t,a,r){var o,s,l,c,d,u,f=e.aoColumns;if(t)for(o=t.length-1;0<=o;o--){u=t[o];var p=u.targets!==n?u.targets:u.aTargets;for(i.isArray(p)||(p=[p]),s=0,l=p.length;s<l;s++)if("number"==typeof p[s]&&0<=p[s]){for(;f.length<=p[s];)h(e);r(p[s],u)}else if("number"==typeof p[s]&&0>p[s])r(f.length+p[s],u);else if("string"==typeof p[s])for(c=0,d=f.length;c<d;c++)("_all"==p[s]||i(f[c].nTh).hasClass(p[s]))&&r(c,u)}if(a)for(o=0,e=a.length;o<e;o++)r(o,a[o])}function w(e,t,n,a){var r=e.aoData.length,o=i.extend(!0,{},Ve.models.oRow,{src:n?"dom":"data"});o._aData=t,e.aoData.push(o);for(var t=e.aoColumns,o=0,s=t.length;o<s;o++)n&&k(e,r,o,x(e,r,o)),t[o].sType=null;return e.aiDisplayMaster.push(r),(n||!e.oFeatures.bDeferRender)&&I(e,r,n,a),r}function C(e,t){var n;return t instanceof i||(t=i(t)),t.map(function(t,i){return n=R(e,i),w(e,n.data,i,n.cells)})}function x(e,t,i,a){var r=e.iDraw,o=e.aoColumns[i],s=e.aoData[t]._aData,l=o.sDefaultContent,i=o.fnGetData(s,a,{settings:e,row:t,col:i});if(i===n)return e.iDrawError!=r&&null===l&&(Le(e,0,"Requested unknown parameter "+("function"==typeof o.mData?"{function}":"'"+o.mData+"'")+" for row "+t,4),e.iDrawError=r),l;if(i!==s&&null!==i||null===l){if("function"==typeof i)return i.call(s)}else i=l;return null===i&&"display"==a?"":i}function k(e,t,n,i){e.aoColumns[n].fnSetData(e.aoData[t]._aData,i,{settings:e,row:t,col:n})}function S(e){return i.map(e.match(/(\\.|[^\.])+/g),function(e){return e.replace(/\\./g,".")})}function D(e){if(i.isPlainObject(e)){var t={};return i.each(e,function(e,n){n&&(t[e]=D(n))}),function(e,i,a,r){var o=t[i]||t._;return o!==n?o(e,i,a,r):e}}if(null===e)return function(e){return e};if("function"==typeof e)return function(t,n,i,a){return e(t,n,i,a)};if("string"==typeof e&&(-1!==e.indexOf(".")||-1!==e.indexOf("[")||-1!==e.indexOf("("))){var a=function(e,t,i){var r,o;if(""!==i){o=S(i);for(var s=0,l=o.length;s<l;s++){if(i=o[s].match(mt),r=o[s].match(gt),i){for(o[s]=o[s].replace(mt,""),""!==o[s]&&(e=e[o[s]]),r=[],o.splice(0,s+1),o=o.join("."),s=0,l=e.length;s<l;s++)r.push(a(e[s],t,o));e=i[0].substring(1,i[0].length-1),e=""===e?r:r.join(e);break}if(r)o[s]=o[s].replace(gt,""),e=e[o[s]]();else{if(null===e||e[o[s]]===n)return n;e=e[o[s]]}}}return e};return function(t,n){return a(t,n,e)}}return function(t){return t[e]}}function _(e){if(i.isPlainObject(e))return _(e._);if(null===e)return function(){};if("function"==typeof e)return function(t,n,i){e(t,"set",n,i)};if("string"==typeof e&&(-1!==e.indexOf(".")||-1!==e.indexOf("[")||-1!==e.indexOf("("))){var t=function(e,i,a){var r,a=S(a);r=a[a.length-1];for(var o,s,l=0,c=a.length-1;l<c;l++){if(o=a[l].match(mt),s=a[l].match(gt),o){for(a[l]=a[l].replace(mt,""),e[a[l]]=[],r=a.slice(),r.splice(0,l+1),o=r.join("."),s=0,c=i.length;s<c;s++)r={},t(r,i[s],o),e[a[l]].push(r);return}s&&(a[l]=a[l].replace(gt,""),e=e[a[l]](i)),null!==e[a[l]]&&e[a[l]]!==n||(e[a[l]]={}),e=e[a[l]]}r.match(gt)?e[r.replace(gt,"")](i):e[r.replace(mt,"")]=i};return function(n,i){return t(n,i,e)}}return function(t,n){t[e]=n}}function T(e){return ct(e.aoData,"_aData")}function E(e){e.aoData.length=0,e.aiDisplayMaster.length=0,e.aiDisplay.length=0}function A(e,t,i){for(var a=-1,r=0,o=e.length;r<o;r++)e[r]==t?a=r:e[r]>t&&e[r]--;-1!=a&&i===n&&e.splice(a,1)}function N(e,t,i,a){var r,o=e.aoData[t],s=function(n,i){for(;n.childNodes.length;)n.removeChild(n.firstChild);n.innerHTML=x(e,t,i,"display")};if("dom"!==i&&(i&&"auto"!==i||"dom"!==o.src)){var l=o.anCells;if(l)if(a!==n)s(l[a],a);else for(i=0,r=l.length;i<r;i++)s(l[i],i)}else o._aData=R(e,o,a,a===n?n:o._aData).data;if(o._aSortData=null,o._aFilterData=null,s=e.aoColumns,a!==n)s[a].sType=null;else{for(i=0,r=s.length;i<r;i++)s[i].sType=null;M(o)}}function R(e,t,a,r){var o,s,l=[],c=t.firstChild,d=0,h=e.aoColumns,u=e._rowReadObject,r=r||u?{}:[],f=function(e,t){if("string"==typeof e){var n=e.indexOf("@");-1!==n&&(n=e.substring(n+1),_(e)(r,t.getAttribute(n)))}},e=function(e){a!==n&&a!==d||(o=h[d],s=i.trim(e.innerHTML),o&&o._bAttrSrc?(_(o.mData._)(r,s),f(o.mData.sort,e),f(o.mData.type,e),f(o.mData.filter,e)):u?(o._setter||(o._setter=_(o.mData)),o._setter(r,s)):r[d]=s),d++};if(c)for(;c;)t=c.nodeName.toUpperCase(),"TD"!=t&&"TH"!=t||(e(c),l.push(c)),c=c.nextSibling;else for(l=t.anCells,c=0,t=l.length;c<t;c++)e(l[c]);return{data:r,cells:l}}function I(e,n,i,a){var r,o,s,l,c,d=e.aoData[n],h=d._aData,u=[];if(null===d.nTr){for(r=i||t.createElement("tr"),d.nTr=r,d.anCells=u,r._DT_RowIndex=n,M(d),l=0,c=e.aoColumns.length;l<c;l++)s=e.aoColumns[l],o=i?a[l]:t.createElement(s.sCellType),u.push(o),i&&!s.mRender&&s.mData===l||(o.innerHTML=x(e,n,l,"display")),s.sClass&&(o.className+=" "+s.sClass),s.bVisible&&!i?r.appendChild(o):!s.bVisible&&i&&o.parentNode.removeChild(o),s.fnCreatedCell&&s.fnCreatedCell.call(e.oInstance,o,x(e,n,l),h,n,l);Be(e,"aoRowCreatedCallback",null,[r,h,n])}d.nTr.setAttribute("role","row")}function M(e){var t=e.nTr,n=e._aData;if(t){if(n.DT_RowId&&(t.id=n.DT_RowId),n.DT_RowClass){var a=n.DT_RowClass.split(" ");e.__rowc=e.__rowc?ft(e.__rowc.concat(a)):a,i(t).removeClass(e.__rowc.join(" ")).addClass(n.DT_RowClass)}n.DT_RowAttr&&i(t).attr(n.DT_RowAttr),n.DT_RowData&&i(t).data(n.DT_RowData)}}function L(e){var t,n,a,r,o,s=e.nTHead,l=e.nTFoot,c=0===i("th, td",s).length,d=e.oClasses,h=e.aoColumns;for(c&&(r=i("<tr/>").appendTo(s)),t=0,n=h.length;t<n;t++)o=h[t],a=i(o.nTh).addClass(o.sClass),c&&a.appendTo(r),e.oFeatures.bSort&&(a.addClass(o.sSortingClass),!1!==o.bSortable&&(a.attr("tabindex",e.iTabIndex).attr("aria-controls",e.sTableId),Ee(e,o.nTh,t))),o.sTitle!=a.html()&&a.html(o.sTitle),Fe(e,"header")(e,a,o,d);if(c&&B(e.aoHeader,s),i(s).find(">tr").attr("role","row"),i(s).find(">tr>th, >tr>td").addClass(d.sHeaderTH),i(l).find(">tr>th, >tr>td").addClass(d.sFooterTH),null!==l)for(e=e.aoFooter[0],t=0,n=e.length;t<n;t++)o=h[t],o.nTf=e[t].cell,o.sClass&&i(o.nTf).addClass(o.sClass)}function P(e,t,a){var r,o,s,l,c=[],d=[],h=e.aoColumns.length;if(t){for(a===n&&(a=!1),r=0,o=t.length;r<o;r++){for(c[r]=t[r].slice(),c[r].nTr=t[r].nTr,s=h-1;0<=s;s--)!e.aoColumns[s].bVisible&&!a&&c[r].splice(s,1);d.push([])}for(r=0,o=c.length;r<o;r++){if(e=c[r].nTr)for(;s=e.firstChild;)e.removeChild(s);for(s=0,t=c[r].length;s<t;s++)if(l=h=1,d[r][s]===n){for(e.appendChild(c[r][s].cell),d[r][s]=1;c[r+h]!==n&&c[r][s].cell==c[r+h][s].cell;)d[r+h][s]=1,h++;for(;c[r][s+l]!==n&&c[r][s].cell==c[r][s+l].cell;){for(a=0;a<h;a++)d[r+a][s+l]=1;l++}i(c[r][s].cell).attr("rowspan",h).attr("colspan",l)}}}}function O(e){var t=Be(e,"aoPreDrawCallback","preDraw",[e]);if(-1!==i.inArray(!1,t))ue(e,!1);else{var t=[],a=0,r=e.asStripeClasses,o=r.length,s=e.oLanguage,l=e.iInitDisplayStart,c="ssp"==Ue(e),d=e.aiDisplay;e.bDrawing=!0,l!==n&&-1!==l&&(e._iDisplayStart=c?l:l>=e.fnRecordsDisplay()?0:l,e.iInitDisplayStart=-1);var l=e._iDisplayStart,h=e.fnDisplayEnd();if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++,ue(e,!1);else if(c){if(!e.bDestroying&&!U(e))return}else e.iDraw++;if(0!==d.length)for(s=c?e.aoData.length:h,c=c?0:l;c<s;c++){var u=d[c],f=e.aoData[u];if(null===f.nTr&&I(e,u),u=f.nTr,0!==o){var p=r[a%o];f._sRowStripe!=p&&(i(u).removeClass(f._sRowStripe).addClass(p),f._sRowStripe=p)}Be(e,"aoRowCallback",null,[u,f._aData,a,c]),t.push(u),a++}else a=s.sZeroRecords,1==e.iDraw&&"ajax"==Ue(e)?a=s.sLoadingRecords:s.sEmptyTable&&0===e.fnRecordsTotal()&&(a=s.sEmptyTable),t[0]=i("<tr/>",{class:o?r[0]:""}).append(i("<td />",{valign:"top",colSpan:g(e),class:e.oClasses.sRowEmpty}).html(a))[0];Be(e,"aoHeaderCallback","header",[i(e.nTHead).children("tr")[0],T(e),l,h,d]),Be(e,"aoFooterCallback","footer",[i(e.nTFoot).children("tr")[0],T(e),l,h,d]),r=i(e.nTBody),r.children().detach(),r.append(i(t)),Be(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1}}function H(e,t){var n=e.oFeatures,i=n.bFilter;n.bSort&&De(e),i?z(e,e.oPreviousSearch):e.aiDisplay=e.aiDisplayMaster.slice(),!0!==t&&(e._iDisplayStart=0),e._drawHold=t,O(e),e._drawHold=!1}function $(e){var t=e.oClasses,n=i(e.nTable),n=i("<div/>").insertBefore(n),a=e.oFeatures,r=i("<div/>",{id:e.sTableId+"_wrapper",class:t.sWrapper+(e.nTFoot?"":" "+t.sNoFooter)});e.nHolding=n[0],e.nTableWrapper=r[0],e.nTableReinsertBefore=e.nTable.nextSibling;for(var o,s,l,c,d,h,u=e.sDom.split(""),f=0;f<u.length;f++){if(o=null,"<"==(s=u[f])){if(l=i("<div/>")[0],"'"==(c=u[f+1])||'"'==c){for(d="",h=2;u[f+h]!=c;)d+=u[f+h],h++;"H"==d?d=t.sJUIHeader:"F"==d&&(d=t.sJUIFooter),-1!=d.indexOf(".")?(c=d.split("."),l.id=c[0].substr(1,c[0].length-1),l.className=c[1]):"#"==d.charAt(0)?l.id=d.substr(1,d.length-1):l.className=d,f+=h}r.append(l),r=i(l)}else if(">"==s)r=r.parent();else if("l"==s&&a.bPaginate&&a.bLengthChange)o=le(e);else if("f"==s&&a.bFilter)o=V(e);else if("r"==s&&a.bProcessing)o=he(e);else if("t"==s)o=fe(e);else if("i"==s&&a.bInfo)o=ne(e);else if("p"==s&&a.bPaginate)o=ce(e);else if(0!==Ve.ext.feature.length)for(l=Ve.ext.feature,h=0,c=l.length;h<c;h++)if(s==l[h].cFeature){o=l[h].fnInit(e);break}o&&(l=e.aanFeatures,l[s]||(l[s]=[]),l[s].push(o),r.append(o))}n.replaceWith(r)}function B(e,t){var n,a,r,o,s,l,c,d,h,u,f=i(t).children("tr");for(e.splice(0,e.length),r=0,l=f.length;r<l;r++)e.push([]);for(r=0,l=f.length;r<l;r++)for(n=f[r],a=n.firstChild;a;){if("TD"==a.nodeName.toUpperCase()||"TH"==a.nodeName.toUpperCase()){for(d=1*a.getAttribute("colspan"),h=1*a.getAttribute("rowspan"),d=d&&0!==d&&1!==d?d:1,h=h&&0!==h&&1!==h?h:1,o=0,s=e[r];s[o];)o++;for(c=o,u=1===d,s=0;s<d;s++)for(o=0;o<h;o++)e[r+o][c+s]={cell:a,unique:u},e[r+o].nTr=n}a=a.nextSibling}}function j(e,t,n){var i=[];n||(n=e.aoHeader,t&&(n=[],B(n,t)));for(var t=0,a=n.length;t<a;t++)for(var r=0,o=n[t].length;r<o;r++)!n[t][r].unique||i[r]&&e.bSortCellsTop||(i[r]=n[t][r].cell);return i}function F(e,t,n){if(Be(e,"aoServerParams","serverParams",[t]),t&&i.isArray(t)){var a={},r=/(.*?)\[\]$/;i.each(t,function(e,t){var n=t.name.match(r);n?(n=n[0],a[n]||(a[n]=[]),a[n].push(t.value)):a[t.name]=t.value}),t=a}var o,s=e.ajax,l=e.oInstance,c=function(t){Be(e,null,"xhr",[e,t,e.jqXHR]),n(t)};if(i.isPlainObject(s)&&s.data){o=s.data;var d=i.isFunction(o)?o(t,e):o,t=i.isFunction(o)&&d?d:i.extend(!0,t,d);delete s.data}d={data:t,success:function(t){var n=t.error||t.sError;n&&Le(e,0,n),e.json=t,c(t)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(t,n){var a=Be(e,null,"xhr",[e,null,e.jqXHR]);-1===i.inArray(!0,a)&&("parsererror"==n?Le(e,0,"Invalid JSON response",1):4===t.readyState&&Le(e,0,"Ajax error",7)),ue(e,!1)}},e.oAjaxData=t,Be(e,null,"preXhr",[e,t]),e.fnServerData?e.fnServerData.call(l,e.sAjaxSource,i.map(t,function(e,t){return{name:t,value:e}}),c,e):e.sAjaxSource||"string"==typeof s?e.jqXHR=i.ajax(i.extend(d,{url:s||e.sAjaxSource})):i.isFunction(s)?e.jqXHR=s.call(l,t,c,e):(e.jqXHR=i.ajax(i.extend(d,s)),s.data=o)}function U(e){return!e.bAjaxDataGet||(e.iDraw++,ue(e,!0),F(e,W(e),function(t){Y(e,t)}),!1)}function W(e){var t,n,a,r,o=e.aoColumns,s=o.length,l=e.oFeatures,c=e.oPreviousSearch,d=e.aoPreSearchCols,h=[],u=Se(e);t=e._iDisplayStart,n=!1!==l.bPaginate?e._iDisplayLength:-1;var f=function(e,t){h.push({name:e,value:t})};f("sEcho",e.iDraw),f("iColumns",s),f("sColumns",ct(o,"sName").join(",")),f("iDisplayStart",t),f("iDisplayLength",n);var p={draw:e.iDraw,columns:[],order:[],start:t,length:n,search:{value:c.sSearch,regex:c.bRegex}};for(t=0;t<s;t++)a=o[t],r=d[t],n="function"==typeof a.mData?"function":a.mData,p.columns.push({data:n,name:a.sName,searchable:a.bSearchable,orderable:a.bSortable,search:{value:r.sSearch,regex:r.bRegex}}),f("mDataProp_"+t,n),l.bFilter&&(f("sSearch_"+t,r.sSearch),f("bRegex_"+t,r.bRegex),f("bSearchable_"+t,a.bSearchable)),l.bSort&&f("bSortable_"+t,a.bSortable);return l.bFilter&&(f("sSearch",c.sSearch),f("bRegex",c.bRegex)),l.bSort&&(i.each(u,function(e,t){p.order.push({column:t.col,dir:t.dir}),f("iSortCol_"+e,t.col),f("sSortDir_"+e,t.dir)}),f("iSortingCols",u.length)),o=Ve.ext.legacy.ajax,null===o?e.sAjaxSource?h:p:o?h:p}function Y(e,t){var i=q(e,t),a=t.sEcho!==n?t.sEcho:t.draw,r=t.iTotalRecords!==n?t.iTotalRecords:t.recordsTotal,o=t.iTotalDisplayRecords!==n?t.iTotalDisplayRecords:t.recordsFiltered;if(a){if(1*a<e.iDraw)return;e.iDraw=1*a}for(E(e),e._iRecordsTotal=parseInt(r,10),e._iRecordsDisplay=parseInt(o,10),a=0,r=i.length;a<r;a++)w(e,i[a]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,O(e),e._bInitComplete||oe(e,t),e.bAjaxDataGet=!0,ue(e,!1)}function q(e,t){var a=i.isPlainObject(e.ajax)&&e.ajax.dataSrc!==n?e.ajax.dataSrc:e.sAjaxDataProp;return"data"===a?t.aaData||t[a]:""!==a?D(a)(t):t}function V(e){var n=e.oClasses,a=e.sTableId,r=e.oLanguage,o=e.oPreviousSearch,s=e.aanFeatures,l='<input type="search" class="'+n.sFilterInput+'"/>',c=r.sSearch,c=c.match(/_INPUT_/)?c.replace("_INPUT_",l):c+l,n=i("<div/>",{id:s.f?null:a+"_filter",class:n.sFilter}).append(i("<label/>").append(c)),s=function(){var t=this.value?this.value:"";t!=o.sSearch&&(z(e,{sSearch:t,bRegex:o.bRegex,
bSmart:o.bSmart,bCaseInsensitive:o.bCaseInsensitive}),e._iDisplayStart=0,O(e))},l=null!==e.searchDelay?e.searchDelay:"ssp"===Ue(e)?400:0,d=i("input",n).val(o.sSearch).attr("placeholder",r.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",l?ye(s,l):s).bind("keypress.DT",function(e){if(13==e.keyCode)return!1}).attr("aria-controls",a);return i(e.nTable).on("search.dt.DT",function(n,i){if(e===i)try{d[0]!==t.activeElement&&d.val(o.sSearch)}catch(e){}}),n[0]}function z(e,t,i){var a=e.oPreviousSearch,r=e.aoPreSearchCols,o=function(e){a.sSearch=e.sSearch,a.bRegex=e.bRegex,a.bSmart=e.bSmart,a.bCaseInsensitive=e.bCaseInsensitive};if(v(e),"ssp"!=Ue(e)){for(X(e,t.sSearch,i,t.bEscapeRegex!==n?!t.bEscapeRegex:t.bRegex,t.bSmart,t.bCaseInsensitive),o(t),t=0;t<r.length;t++)K(e,r[t].sSearch,t,r[t].bEscapeRegex!==n?!r[t].bEscapeRegex:r[t].bRegex,r[t].bSmart,r[t].bCaseInsensitive);G(e)}else o(t);e.bFiltered=!0,Be(e,null,"search",[e])}function G(e){for(var t,n,i=Ve.ext.search,a=e.aiDisplay,r=0,o=i.length;r<o;r++){for(var s=[],l=0,c=a.length;l<c;l++)n=a[l],t=e.aoData[n],i[r](e,t._aFilterData,n,t._aData,l)&&s.push(n);a.length=0,a.push.apply(a,s)}}function K(e,t,n,i,a,r){if(""!==t)for(var o=e.aiDisplay,i=J(t,i,a,r),a=o.length-1;0<=a;a--)t=e.aoData[o[a]]._aFilterData[n],i.test(t)||o.splice(a,1)}function X(e,t,n,i,a,r){var o,i=J(t,i,a,r),a=e.oPreviousSearch.sSearch,r=e.aiDisplayMaster;if(0!==Ve.ext.search.length&&(n=!0),o=Z(e),0>=t.length)e.aiDisplay=r.slice();else for((o||n||a.length>t.length||0!==t.indexOf(a)||e.bSorted)&&(e.aiDisplay=r.slice()),t=e.aiDisplay,n=t.length-1;0<=n;n--)i.test(e.aoData[t[n]]._sFilterRow)||t.splice(n,1)}function J(e,t,n,a){return e=t?e:Q(e),n&&(e="^(?=.*?"+i.map(e.match(/"[^"]+"|[^ ]+/g)||[""],function(e){if('"'===e.charAt(0))var t=e.match(/^"(.*)"$/),e=t?t[1]:e;return e.replace('"',"")}).join(")(?=.*?")+").*$"),RegExp(e,a?"i":"")}function Q(e){return e.replace(nt,"\\$1")}function Z(e){var t,n,i,a,r,o,s,l,c=e.aoColumns,d=Ve.ext.type.search;for(t=!1,n=0,a=e.aoData.length;n<a;n++)if(l=e.aoData[n],!l._aFilterData){for(o=[],i=0,r=c.length;i<r;i++)t=c[i],t.bSearchable?(s=x(e,n,i,"filter"),d[t.sType]&&(s=d[t.sType](s)),null===s&&(s=""),"string"!=typeof s&&s.toString&&(s=s.toString())):s="",s.indexOf&&-1!==s.indexOf("&")&&(yt.innerHTML=s,s=vt?yt.textContent:yt.innerText),s.replace&&(s=s.replace(/[\r\n]/g,"")),o.push(s);l._aFilterData=o,l._sFilterRow=o.join("  "),t=!0}return t}function ee(e){return{search:e.sSearch,smart:e.bSmart,regex:e.bRegex,caseInsensitive:e.bCaseInsensitive}}function te(e){return{sSearch:e.search,bSmart:e.smart,bRegex:e.regex,bCaseInsensitive:e.caseInsensitive}}function ne(e){var t=e.sTableId,n=e.aanFeatures.i,a=i("<div/>",{class:e.oClasses.sInfo,id:n?null:t+"_info"});return n||(e.aoDrawCallback.push({fn:ie,sName:"information"}),a.attr("role","status").attr("aria-live","polite"),i(e.nTable).attr("aria-describedby",t+"_info")),a[0]}function ie(e){var t=e.aanFeatures.i;if(0!==t.length){var n=e.oLanguage,a=e._iDisplayStart+1,r=e.fnDisplayEnd(),o=e.fnRecordsTotal(),s=e.fnRecordsDisplay(),l=s?n.sInfo:n.sInfoEmpty;s!==o&&(l+=" "+n.sInfoFiltered),l+=n.sInfoPostFix,l=ae(e,l),n=n.fnInfoCallback,null!==n&&(l=n.call(e.oInstance,e,a,r,o,s,l)),i(t).html(l)}}function ae(e,t){var n=e.fnFormatNumber,i=e._iDisplayStart+1,a=e._iDisplayLength,r=e.fnRecordsDisplay(),o=-1===a;return t.replace(/_START_/g,n.call(e,i)).replace(/_END_/g,n.call(e,e.fnDisplayEnd())).replace(/_MAX_/g,n.call(e,e.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(e,r)).replace(/_PAGE_/g,n.call(e,o?1:Math.ceil(i/a))).replace(/_PAGES_/g,n.call(e,o?1:Math.ceil(r/a)))}function re(e){var t,n,i,a=e.iInitDisplayStart,r=e.aoColumns;if(n=e.oFeatures,e.bInitialised){for($(e),L(e),P(e,e.aoHeader),P(e,e.aoFooter),ue(e,!0),n.bAutoWidth&&ge(e),t=0,n=r.length;t<n;t++)i=r[t],i.sWidth&&(i.nTh.style.width=xe(i.sWidth));H(e),r=Ue(e),"ssp"!=r&&("ajax"==r?F(e,[],function(n){var i=q(e,n);for(t=0;t<i.length;t++)w(e,i[t]);e.iInitDisplayStart=a,H(e),ue(e,!1),oe(e,n)},e):(ue(e,!1),oe(e)))}else setTimeout(function(){re(e)},200)}function oe(e,t){e._bInitComplete=!0,t&&f(e),Be(e,"aoInitComplete","init",[e,t])}function se(e,t){var n=parseInt(t,10);e._iDisplayLength=n,je(e),Be(e,null,"length",[e,n])}function le(e){for(var t=e.oClasses,n=e.sTableId,a=e.aLengthMenu,r=i.isArray(a[0]),o=r?a[0]:a,a=r?a[1]:a,r=i("<select/>",{name:n+"_length","aria-controls":n,class:t.sLengthSelect}),s=0,l=o.length;s<l;s++)r[0][s]=new Option(a[s],o[s]);var c=i("<div><label/></div>").addClass(t.sLength);return e.aanFeatures.l||(c[0].id=n+"_length"),c.children().append(e.oLanguage.sLengthMenu.replace("_MENU_",r[0].outerHTML)),i("select",c).val(e._iDisplayLength).bind("change.DT",function(){se(e,i(this).val()),O(e)}),i(e.nTable).bind("length.dt.DT",function(t,n,a){e===n&&i("select",c).val(a)}),c[0]}function ce(e){var t=e.sPaginationType,n=Ve.ext.pager[t],a="function"==typeof n,r=function(e){O(e)},t=i("<div/>").addClass(e.oClasses.sPaging+t)[0],o=e.aanFeatures;return a||n.fnInit(e,t,r),o.p||(t.id=e.sTableId+"_paginate",e.aoDrawCallback.push({fn:function(e){if(a){var t,i=e._iDisplayStart,s=e._iDisplayLength,l=e.fnRecordsDisplay(),c=-1===s,i=c?0:Math.ceil(i/s),s=c?1:Math.ceil(l/s),l=n(i,s),c=0;for(t=o.p.length;c<t;c++)Fe(e,"pageButton")(e,o.p[c],c,l,i,s)}else n.fnUpdate(e,r)},sName:"pagination"})),t}function de(e,t,n){var i=e._iDisplayStart,a=e._iDisplayLength,r=e.fnRecordsDisplay();return 0===r||-1===a?i=0:"number"==typeof t?(i=t*a)>r&&(i=0):"first"==t?i=0:"previous"==t?0>(i=0<=a?i-a:0)&&(i=0):"next"==t?i+a<r&&(i+=a):"last"==t?i=Math.floor((r-1)/a)*a:Le(e,0,"Unknown paging action: "+t,5),t=e._iDisplayStart!==i,e._iDisplayStart=i,t&&(Be(e,null,"page",[e]),n&&O(e)),t}function he(e){return i("<div/>",{id:e.aanFeatures.r?null:e.sTableId+"_processing",class:e.oClasses.sProcessing}).html(e.oLanguage.sProcessing).insertBefore(e.nTable)[0]}function ue(e,t){e.oFeatures.bProcessing&&i(e.aanFeatures.r).css("display",t?"block":"none"),Be(e,null,"processing",[e,t])}function fe(e){var t=i(e.nTable);t.attr("role","grid");var n=e.oScroll;if(""===n.sX&&""===n.sY)return e.nTable;var a=n.sX,r=n.sY,o=e.oClasses,s=t.children("caption"),l=s.length?s[0]._captionSide:null,c=i(t[0].cloneNode(!1)),d=i(t[0].cloneNode(!1)),h=t.children("tfoot");n.sX&&"100%"===t.attr("width")&&t.removeAttr("width"),h.length||(h=null),n=i("<div/>",{class:o.sScrollWrapper}).append(i("<div/>",{class:o.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:a?a?xe(a):null:"100%"}).append(i("<div/>",{class:o.sScrollHeadInner}).css({"box-sizing":"content-box",width:n.sXInner||"100%"}).append(c.removeAttr("id").css("margin-left",0).append("top"===l?s:null).append(t.children("thead"))))).append(i("<div/>",{class:o.sScrollBody}).css({overflow:"auto",height:r?xe(r):null,width:a?xe(a):null}).append(t)),h&&n.append(i("<div/>",{class:o.sScrollFoot}).css({overflow:"hidden",border:0,width:a?a?xe(a):null:"100%"}).append(i("<div/>",{class:o.sScrollFootInner}).append(d.removeAttr("id").css("margin-left",0).append("bottom"===l?s:null).append(t.children("tfoot")))));var t=n.children(),u=t[0],o=t[1],f=h?t[2]:null;return a&&i(o).on("scroll.DT",function(){var e=this.scrollLeft;u.scrollLeft=e,h&&(f.scrollLeft=e)}),e.nScrollHead=u,e.nScrollBody=o,e.nScrollFoot=f,e.aoDrawCallback.push({fn:pe,sName:"scrolling"}),n[0]}function pe(e){var t,n,a,r,o,s,l=e.oScroll,c=l.sX,d=l.sXInner,h=l.sY,u=l.iBarWidth,f=i(e.nScrollHead),m=f[0].style,g=f.children("div"),y=g[0].style,v=g.children("table"),g=e.nScrollBody,b=i(g),w=g.style,C=i(e.nScrollFoot).children("div"),x=C.children("table"),k=i(e.nTHead),S=i(e.nTable),D=S[0],_=D.style,T=e.nTFoot?i(e.nTFoot):null,E=e.oBrowser,A=E.bScrollOversize,N=[],R=[],I=[],M=function(e){e=e.style,e.paddingTop="0",e.paddingBottom="0",e.borderTopWidth="0",e.borderBottomWidth="0",e.height=0};S.children("thead, tfoot").remove(),o=k.clone().prependTo(S),t=k.find("tr"),a=o.find("tr"),o.find("th, td").removeAttr("tabindex"),T&&(r=T.clone().prependTo(S),n=T.find("tr"),r=r.find("tr")),c||(w.width="100%",f[0].style.width="100%"),i.each(j(e,o),function(t,n){s=p(e,t),n.style.width=e.aoColumns[s].sWidth}),T&&me(function(e){e.style.width=""},r),l.bCollapse&&""!==h&&(w.height=b[0].offsetHeight+k[0].offsetHeight+"px"),f=S.outerWidth(),""===c?(_.width="100%",A&&(S.find("tbody").height()>g.offsetHeight||"scroll"==b.css("overflow-y"))&&(_.width=xe(S.outerWidth()-u))):""!==d?_.width=xe(d):f==b.width()&&b.height()<S.height()?(_.width=xe(f-u),S.outerWidth()>f-u&&(_.width=xe(f))):_.width=xe(f),f=S.outerWidth(),me(M,a),me(function(e){I.push(e.innerHTML),N.push(xe(i(e).css("width")))},a),me(function(e,t){e.style.width=N[t]},t),i(a).height(0),T&&(me(M,r),me(function(e){R.push(xe(i(e).css("width")))},r),me(function(e,t){e.style.width=R[t]},n),i(r).height(0)),me(function(e,t){e.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+I[t]+"</div>",e.style.width=N[t]},a),T&&me(function(e,t){e.innerHTML="",e.style.width=R[t]},r),S.outerWidth()<f?(n=g.scrollHeight>g.offsetHeight||"scroll"==b.css("overflow-y")?f+u:f,A&&(g.scrollHeight>g.offsetHeight||"scroll"==b.css("overflow-y"))&&(_.width=xe(n-u)),(""===c||""!==d)&&Le(e,1,"Possible column misalignment",6)):n="100%",w.width=xe(n),m.width=xe(n),T&&(e.nScrollFoot.style.width=xe(n)),!h&&A&&(w.height=xe(D.offsetHeight+u)),h&&l.bCollapse&&(w.height=xe(h),l=c&&D.offsetWidth>g.offsetWidth?u:0,D.offsetHeight<g.offsetHeight&&(w.height=xe(D.offsetHeight+l))),l=S.outerWidth(),v[0].style.width=xe(l),y.width=xe(l),v=S.height()>g.clientHeight||"scroll"==b.css("overflow-y"),E="padding"+(E.bScrollbarLeft?"Left":"Right"),y[E]=v?u+"px":"0px",T&&(x[0].style.width=xe(l),C[0].style.width=xe(l),C[0].style[E]=v?u+"px":"0px"),b.scroll(),!e.bSorted&&!e.bFiltered||e._drawHold||(g.scrollTop=0)}function me(e,t,n){for(var i,a,r=0,o=0,s=t.length;o<s;){for(i=t[o].firstChild,a=n?n[o].firstChild:null;i;)1===i.nodeType&&(n?e(i,a,r):e(i,r),r++),i=i.nextSibling,a=n?a.nextSibling:null;o++}}function ge(t){var n,a,r=t.nTable,o=t.aoColumns,s=t.oScroll,l=s.sY,c=s.sX,d=s.sXInner,h=o.length,s=y(t,"bVisible"),u=i("th",t.nTHead),p=r.getAttribute("width"),m=r.parentNode,v=!1;for((n=r.style.width)&&-1!==n.indexOf("%")&&(p=n),n=0;n<s.length;n++)a=o[s[n]],null!==a.sWidth&&(a.sWidth=ve(a.sWidthOrig,m),v=!0);if(v||c||l||h!=g(t)||h!=u.length){h=i(r).clone().css("visibility","hidden").removeAttr("id"),h.find("tbody tr").remove();var b=i("<tr/>").appendTo(h.find("tbody"));for(h.find("tfoot th, tfoot td").css("width",""),u=j(t,h.find("thead")[0]),n=0;n<s.length;n++)a=o[s[n]],u[n].style.width=null!==a.sWidthOrig&&""!==a.sWidthOrig?xe(a.sWidthOrig):"";if(t.aoData.length)for(n=0;n<s.length;n++)v=s[n],a=o[v],i(we(t,v)).clone(!1).append(a.sContentPadding).appendTo(b);if(h.appendTo(m),c&&d?h.width(d):c?(h.css("width","auto"),h.width()<m.offsetWidth&&h.width(m.offsetWidth)):l?h.width(m.offsetWidth):p&&h.width(p),be(t,h[0]),c){for(n=d=0;n<s.length;n++)a=o[s[n]],l=i(u[n]).outerWidth(),d+=null===a.sWidthOrig?l:parseInt(a.sWidth,10)+l-i(u[n]).width();h.width(xe(d)),r.style.width=xe(d)}for(n=0;n<s.length;n++)a=o[s[n]],(l=i(u[n]).width())&&(a.sWidth=xe(l));r.style.width=xe(h.css("width")),h.remove()}else for(n=0;n<h;n++)o[n].sWidth=xe(u.eq(n).width());p&&(r.style.width=xe(p)),!p&&!c||t._reszEvt||(r=function(){i(e).bind("resize.DT-"+t.sInstance,ye(function(){f(t)}))},t.oBrowser.bScrollOversize?setTimeout(r,1e3):r(),t._reszEvt=!0)}function ye(e,t){var i,a,r=t!==n?t:200;return function(){var t=this,o=+new Date,s=arguments;i&&o<i+r?(clearTimeout(a),a=setTimeout(function(){i=n,e.apply(t,s)},r)):(i=o,e.apply(t,s))}}function ve(e,n){if(!e)return 0;var a=i("<div/>").css("width",xe(e)).appendTo(n||t.body),r=a[0].offsetWidth;return a.remove(),r}function be(e,t){var n=e.oScroll;(n.sX||n.sY)&&(n=n.sX?0:n.iBarWidth,t.style.width=xe(i(t).outerWidth()-n))}function we(e,t){var n=Ce(e,t);if(0>n)return null;var a=e.aoData[n];return a.nTr?a.anCells[t]:i("<td/>").html(x(e,n,t,"display"))[0]}function Ce(e,t){for(var n,i=-1,a=-1,r=0,o=e.aoData.length;r<o;r++)n=x(e,r,t,"display")+"",n=n.replace(bt,""),n.length>i&&(i=n.length,a=r);return a}function xe(e){return null===e?"0px":"number"==typeof e?0>e?"0px":e+"px":e.match(/\d$/)?e+"px":e}function ke(){var e=Ve.__scrollbarWidth;if(e===n){var t=i("<p/>").css({position:"absolute",top:0,left:0,width:"100%",height:150,padding:0,overflow:"scroll",visibility:"hidden"}).appendTo("body"),e=t[0].offsetWidth-t[0].clientWidth;Ve.__scrollbarWidth=e,t.remove()}return e}function Se(e){var t,a,r,o,s,l,c=[],d=e.aoColumns;t=e.aaSortingFixed,a=i.isPlainObject(t);var h=[];for(r=function(e){e.length&&!i.isArray(e[0])?h.push(e):h.push.apply(h,e)},i.isArray(t)&&r(t),a&&t.pre&&r(t.pre),r(e.aaSorting),a&&t.post&&r(t.post),e=0;e<h.length;e++)for(l=h[e][0],r=d[l].aDataSort,t=0,a=r.length;t<a;t++)o=r[t],s=d[o].sType||"string",h[e]._idx===n&&(h[e]._idx=i.inArray(h[e][1],d[o].asSorting)),c.push({src:l,col:o,dir:h[e][1],index:h[e]._idx,type:s,formatter:Ve.ext.type.order[s+"-pre"]});return c}function De(e){var t,n,i,a,r=[],o=Ve.ext.type.order,s=e.aoData,l=0,c=e.aiDisplayMaster;for(v(e),a=Se(e),t=0,n=a.length;t<n;t++)i=a[t],i.formatter&&l++,Ne(e,i.col);if("ssp"!=Ue(e)&&0!==a.length){for(t=0,n=c.length;t<n;t++)r[c[t]]=t;l===a.length?c.sort(function(e,t){var n,i,o,l,c=a.length,d=s[e]._aSortData,h=s[t]._aSortData;for(o=0;o<c;o++)if(l=a[o],n=d[l.col],i=h[l.col],0!==(n=n<i?-1:n>i?1:0))return"asc"===l.dir?n:-n;return n=r[e],i=r[t],n<i?-1:n>i?1:0}):c.sort(function(e,t){var n,i,l,c,d=a.length,h=s[e]._aSortData,u=s[t]._aSortData;for(l=0;l<d;l++)if(c=a[l],n=h[c.col],i=u[c.col],c=o[c.type+"-"+c.dir]||o["string-"+c.dir],0!==(n=c(n,i)))return n;return n=r[e],i=r[t],n<i?-1:n>i?1:0})}e.bSorted=!0}function _e(e){for(var t,n,i=e.aoColumns,a=Se(e),e=e.oLanguage.oAria,r=0,o=i.length;r<o;r++){n=i[r];var s=n.asSorting;t=n.sTitle.replace(/<.*?>/g,"");var l=n.nTh;l.removeAttribute("aria-sort"),n.bSortable&&(0<a.length&&a[0].col==r?(l.setAttribute("aria-sort","asc"==a[0].dir?"ascending":"descending"),n=s[a[0].index+1]||s[0]):n=s[0],t+="asc"===n?e.sSortAscending:e.sSortDescending),l.setAttribute("aria-label",t)}}function Te(e,t,a,r){var o=e.aaSorting,s=e.aoColumns[t].asSorting,l=function(e,t){var a=e._idx;return a===n&&(a=i.inArray(e[1],s)),a+1<s.length?a+1:t?null:0};"number"==typeof o[0]&&(o=e.aaSorting=[o]),a&&e.oFeatures.bSortMulti?(a=i.inArray(t,ct(o,"0")),-1!==a?(t=l(o[a],!0),null===t&&1===o.length&&(t=0),null===t?o.splice(a,1):(o[a][1]=s[t],o[a]._idx=t)):(o.push([t,s[0],0]),o[o.length-1]._idx=0)):o.length&&o[0][0]==t?(t=l(o[0]),o.length=1,o[0][1]=s[t],o[0]._idx=t):(o.length=0,o.push([t,s[0]]),o[0]._idx=0),H(e),"function"==typeof r&&r(e)}function Ee(e,t,n,i){var a=e.aoColumns[n];He(t,{},function(t){!1!==a.bSortable&&(e.oFeatures.bProcessing?(ue(e,!0),setTimeout(function(){Te(e,n,t.shiftKey,i),"ssp"!==Ue(e)&&ue(e,!1)},0)):Te(e,n,t.shiftKey,i))})}function Ae(e){var t,n,a=e.aLastSort,r=e.oClasses.sSortColumn,o=Se(e),s=e.oFeatures;if(s.bSort&&s.bSortClasses){for(s=0,t=a.length;s<t;s++)n=a[s].src,i(ct(e.aoData,"anCells",n)).removeClass(r+(2>s?s+1:3));for(s=0,t=o.length;s<t;s++)n=o[s].src,i(ct(e.aoData,"anCells",n)).addClass(r+(2>s?s+1:3))}e.aLastSort=o}function Ne(e,t){var n,i=e.aoColumns[t],a=Ve.ext.order[i.sSortDataType];a&&(n=a.call(e.oInstance,e,t,m(e,t)));for(var r,o=Ve.ext.type.order[i.sType+"-pre"],s=0,l=e.aoData.length;s<l;s++)i=e.aoData[s],i._aSortData||(i._aSortData=[]),(!i._aSortData[t]||a)&&(r=a?n[s]:x(e,s,t,"sort"),i._aSortData[t]=o?o(r):r)}function Re(e){if(e.oFeatures.bStateSave&&!e.bDestroying){var t={time:+new Date,start:e._iDisplayStart,length:e._iDisplayLength,order:i.extend(!0,[],e.aaSorting),search:ee(e.oPreviousSearch),columns:i.map(e.aoColumns,function(t,n){return{visible:t.bVisible,search:ee(e.aoPreSearchCols[n])}})};Be(e,"aoStateSaveParams","stateSaveParams",[e,t]),e.oSavedState=t,e.fnStateSaveCallback.call(e.oInstance,e,t)}}function Ie(e){var t,a,r=e.aoColumns;if(e.oFeatures.bStateSave){var o=e.fnStateLoadCallback.call(e.oInstance,e);if(o&&o.time&&(t=Be(e,"aoStateLoadParams","stateLoadParams",[e,o]),-1===i.inArray(!1,t)&&!(0<(t=e.iStateDuration)&&o.time<+new Date-1e3*t)&&r.length===o.columns.length)){for(e.oLoadedState=i.extend(!0,{},o),o.start!==n&&(e._iDisplayStart=o.start,e.iInitDisplayStart=o.start),o.length!==n&&(e._iDisplayLength=o.length),o.order!==n&&(e.aaSorting=[],i.each(o.order,function(t,n){e.aaSorting.push(n[0]>=r.length?[0,n[1]]:n)})),o.search!==n&&i.extend(e.oPreviousSearch,te(o.search)),t=0,a=o.columns.length;t<a;t++){var s=o.columns[t];s.visible!==n&&(r[t].bVisible=s.visible),s.search!==n&&i.extend(e.aoPreSearchCols[t],te(s.search))}Be(e,"aoStateLoaded","stateLoaded",[e,o])}}}function Me(e){var t=Ve.settings,e=i.inArray(e,ct(t,"nTable"));return-1!==e?t[e]:null}function Le(t,n,i,a){if(i="DataTables warning: "+(null!==t?"table id="+t.sTableId+" - ":"")+i,a&&(i+=". For more information about this error, please see http://datatables.net/tn/"+a),n)e.console&&console.log;else if(n=Ve.ext,n=n.sErrMode||n.errMode,Be(t,null,"error",[t,a,i]),"alert"==n)alert(i);else{if("throw"==n)throw Error(i);"function"==typeof n&&n(t,a,i)}}function Pe(e,t,a,r){i.isArray(a)?i.each(a,function(n,a){i.isArray(a)?Pe(e,t,a[0],a[1]):Pe(e,t,a)}):(r===n&&(r=a),t[a]!==n&&(e[r]=t[a]))}function Oe(e,t,n){var a,r;for(r in t)t.hasOwnProperty(r)&&(a=t[r],i.isPlainObject(a)?(i.isPlainObject(e[r])||(e[r]={}),i.extend(!0,e[r],a)):e[r]=n&&"data"!==r&&"aaData"!==r&&i.isArray(a)?a.slice():a);return e}function He(e,t,n){i(e).bind("click.DT",t,function(t){e.blur(),n(t)}).bind("keypress.DT",t,function(e){13===e.which&&(e.preventDefault(),n(e))}).bind("selectstart.DT",function(){return!1})}function $e(e,t,n,i){n&&e[t].push({fn:n,sName:i})}function Be(e,t,n,a){var r=[];return t&&(r=i.map(e[t].slice().reverse(),function(t){return t.fn.apply(e.oInstance,a)})),null!==n&&(t=i.Event(n+".dt"),i(e.nTable).trigger(t,a),r.push(t.result)),r}function je(e){var t=e._iDisplayStart,n=e.fnDisplayEnd(),i=e._iDisplayLength;t>=n&&(t=n-i),t-=t%i,(-1===i||0>t)&&(t=0),e._iDisplayStart=t}function Fe(e,t){var n=e.renderer,a=Ve.ext.renderer[t];return i.isPlainObject(n)&&n[t]?a[n[t]]||a._:"string"==typeof n?a[n]||a._:a._}function Ue(e){return e.oFeatures.bServerSide?"ssp":e.ajax||e.sAjaxSource?"ajax":"dom"}function We(e,t){var n=[],n=Ot.numbers_length,i=Math.floor(n/2);return t<=n?n=ht(0,t):e<=i?(n=ht(0,n-2),n.push("ellipsis"),n.push(t-1)):(e>=t-1-i?n=ht(t-(n-2),t):(n=ht(e-i+2,e+i-1),n.push("ellipsis"),n.push(t-1)),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function Ye(e){i.each({num:function(t){return Ht(t,e)},"num-fmt":function(t){return Ht(t,e,it)},"html-num":function(t){return Ht(t,e,Ze)},"html-num-fmt":function(t){return Ht(t,e,Ze,it)}},function(t,n){ze.type.order[t+e+"-pre"]=n,t.match(/^html\-/)&&(ze.type.search[t+e]=ze.type.search.html)})}function qe(e){return function(){var t=[Me(this[Ve.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return Ve.ext.internal[e].apply(this,t)}}var Ve,ze,Ge,Ke,Xe,Je={},Qe=/[\r\n]/g,Ze=/<.*?>/g,et=/^[\w\+\-]/,tt=/[\w\+\-]$/,nt=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),it=/[',$\u00a3\u20ac\u00a5%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,at=function(e){return!e||!0===e||"-"===e},rt=function(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(e)?t:null},ot=function(e,t){return Je[t]||(Je[t]=RegExp(Q(t),"g")),"string"==typeof e&&"."!==t?e.replace(/\./g,"").replace(Je[t],"."):e},st=function(e,t,n){var i="string"==typeof e;return!!at(e)||(t&&i&&(e=ot(e,t)),n&&i&&(e=e.replace(it,"")),!isNaN(parseFloat(e))&&isFinite(e))},lt=function(e,t,n){return!!at(e)||(at(e)||"string"==typeof e?!!st(e.replace(Ze,""),t,n)||null:null)},ct=function(e,t,i){var a=[],r=0,o=e.length;if(i!==n)for(;r<o;r++)e[r]&&e[r][t]&&a.push(e[r][t][i]);else for(;r<o;r++)e[r]&&a.push(e[r][t]);return a},dt=function(e,t,i,a){var r=[],o=0,s=t.length;if(a!==n)for(;o<s;o++)e[t[o]][i]&&r.push(e[t[o]][i][a]);else for(;o<s;o++)r.push(e[t[o]][i]);return r},ht=function(e,t){var i,a=[];t===n?(t=0,i=e):(i=t,t=e);for(var r=t;r<i;r++)a.push(r);return a},ut=function(e){for(var t=[],n=0,i=e.length;n<i;n++)e[n]&&t.push(e[n]);return t},ft=function(e){var t,n,i,a=[],r=e.length,o=0;n=0;e:for(;n<r;n++){for(t=e[n],i=0;i<o;i++)if(a[i]===t)continue e;a.push(t),o++}return a},pt=function(e,t,i){e[t]!==n&&(e[i]=e[t])},mt=/\[.*?\]$/,gt=/\(\)$/,yt=i("<div>")[0],vt=yt.textContent!==n,bt=/<.*?>/g;Ve=function(e){this.$=function(e,t){return this.api(!0).$(e,t)},this._=function(e,t){return this.api(!0).rows(e,t).data()},this.api=function(e){return new Ge(e?Me(this[ze.iApiIndex]):this)},this.fnAddData=function(e,t){var a=this.api(!0),r=i.isArray(e)&&(i.isArray(e[0])||i.isPlainObject(e[0]))?a.rows.add(e):a.row.add(e);return(t===n||t)&&a.draw(),r.flatten().toArray()},this.fnAdjustColumnSizing=function(e){var t=this.api(!0).columns.adjust(),i=t.settings()[0],a=i.oScroll;e===n||e?t.draw(!1):(""!==a.sX||""!==a.sY)&&pe(i)},this.fnClearTable=function(e){var t=this.api(!0).clear();(e===n||e)&&t.draw()},this.fnClose=function(e){this.api(!0).row(e).child.hide()},this.fnDeleteRow=function(e,t,i){var a=this.api(!0),e=a.rows(e),r=e.settings()[0],o=r.aoData[e[0][0]];return e.remove(),t&&t.call(this,r,o),(i===n||i)&&a.draw(),o},this.fnDestroy=function(e){this.api(!0).destroy(e)},this.fnDraw=function(e){this.api(!0).draw(e)},this.fnFilter=function(e,t,i,a,r,o){r=this.api(!0),null===t||t===n?r.search(e,i,a,o):r.column(t).search(e,i,a,o),r.draw()},this.fnGetData=function(e,t){var i=this.api(!0);if(e!==n){var a=e.nodeName?e.nodeName.toLowerCase():"";return t!==n||"td"==a||"th"==a?i.cell(e,t).data():i.row(e).data()||null}return i.data().toArray()},this.fnGetNodes=function(e){var t=this.api(!0);return e!==n?t.row(e).node():t.rows().nodes().flatten().toArray()},this.fnGetPosition=function(e){var t=this.api(!0),n=e.nodeName.toUpperCase();return"TR"==n?t.row(e).index():"TD"==n||"TH"==n?(e=t.cell(e).index(),[e.row,e.columnVisible,e.column]):null},this.fnIsOpen=function(e){return this.api(!0).row(e).child.isShown()},this.fnOpen=function(e,t,n){return this.api(!0).row(e).child(t,n).show().child()[0]},this.fnPageChange=function(e,t){var i=this.api(!0).page(e);(t===n||t)&&i.draw(!1)},this.fnSetColumnVis=function(e,t,i){e=this.api(!0).column(e).visible(t),(i===n||i)&&e.columns.adjust().draw()},this.fnSettings=function(){return Me(this[ze.iApiIndex])},this.fnSort=function(e){this.api(!0).order(e).draw()},this.fnSortListener=function(e,t,n){this.api(!0).order.listener(e,t,n)},this.fnUpdate=function(e,t,i,a,r){var o=this.api(!0);return i===n||null===i?o.row(t).data(e):o.cell(t,i).data(e),(r===n||r)&&o.columns.adjust(),(a===n||a)&&o.draw(),0},this.fnVersionCheck=ze.fnVersionCheck;var t=this,a=e===n,d=this.length;a&&(e={}),this.oApi=this.internal=ze.internal;for(var f in Ve.ext.internal)f&&(this[f]=qe(f));return this.each(function(){var f,p={},p=1<d?Oe(p,e,!0):e,m=0,g=this.getAttribute("id"),y=!1,v=Ve.defaults,x=i(this);if("table"!=this.nodeName.toLowerCase())Le(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{s(v),l(v.column),r(v,v,!0),r(v.column,v.column,!0),r(v,i.extend(p,x.data()));var k=Ve.settings,m=0;for(f=k.length;m<f;m++){var S=k[m];if(S.nTable==this||S.nTHead.parentNode==this||S.nTFoot&&S.nTFoot.parentNode==this){if(m=p.bRetrieve!==n?p.bRetrieve:v.bRetrieve,a||m)return S.oInstance;if(p.bDestroy!==n?p.bDestroy:v.bDestroy){S.oInstance.fnDestroy();break}return void Le(S,0,"Cannot reinitialise DataTable",3)}if(S.sTableId==this.id){k.splice(m,1);break}}null!==g&&""!==g||(this.id=g="DataTables_Table_"+Ve.ext._unique++);var D=i.extend(!0,{},Ve.models.oSettings,{sDestroyWidth:x[0].style.width,sInstance:g,sTableId:g});D.nTable=this,D.oApi=t.internal,D.oInit=p,k.push(D),D.oInstance=1===t.length?t:x.dataTable(),s(p),p.oLanguage&&o(p.oLanguage),p.aLengthMenu&&!p.iDisplayLength&&(p.iDisplayLength=i.isArray(p.aLengthMenu[0])?p.aLengthMenu[0][0]:p.aLengthMenu[0]),p=Oe(i.extend(!0,{},v),p),Pe(D.oFeatures,p,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" ")),Pe(D,p,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),Pe(D.oScroll,p,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Pe(D.oLanguage,p,"fnInfoCallback"),$e(D,"aoDrawCallback",p.fnDrawCallback,"user"),$e(D,"aoServerParams",p.fnServerParams,"user"),$e(D,"aoStateSaveParams",p.fnStateSaveParams,"user"),$e(D,"aoStateLoadParams",p.fnStateLoadParams,"user"),$e(D,"aoStateLoaded",p.fnStateLoaded,"user"),$e(D,"aoRowCallback",p.fnRowCallback,"user"),$e(D,"aoRowCreatedCallback",p.fnCreatedRow,"user"),$e(D,"aoHeaderCallback",p.fnHeaderCallback,"user"),$e(D,"aoFooterCallback",p.fnFooterCallback,"user"),$e(D,"aoInitComplete",p.fnInitComplete,"user"),$e(D,"aoPreDrawCallback",p.fnPreDrawCallback,"user"),g=D.oClasses,p.bJQueryUI?(i.extend(g,Ve.ext.oJUIClasses,p.oClasses),p.sDom===v.sDom&&"lfrtip"===v.sDom&&(D.sDom='<"H"lfr>t<"F"ip>'),D.renderer?i.isPlainObject(D.renderer)&&!D.renderer.header&&(D.renderer.header="jqueryui"):D.renderer="jqueryui"):i.extend(g,Ve.ext.classes,p.oClasses),x.addClass(g.sTable),""===D.oScroll.sX&&""===D.oScroll.sY||(D.oScroll.iBarWidth=ke()),!0===D.oScroll.sX&&(D.oScroll.sX="100%"),D.iInitDisplayStart===n&&(D.iInitDisplayStart=p.iDisplayStart,D._iDisplayStart=p.iDisplayStart),null!==p.iDeferLoading&&(D.bDeferLoading=!0,m=i.isArray(p.iDeferLoading),D._iRecordsDisplay=m?p.iDeferLoading[0]:p.iDeferLoading,D._iRecordsTotal=m?p.iDeferLoading[1]:p.iDeferLoading);var _=D.oLanguage;i.extend(!0,_,p.oLanguage),""!==_.sUrl&&(i.ajax({dataType:"json",url:_.sUrl,success:function(e){o(e),r(v.oLanguage,e),i.extend(!0,_,e),re(D)},error:function(){re(D)}}),y=!0),null===p.asStripeClasses&&(D.asStripeClasses=[g.sStripeOdd,g.sStripeEven]);var m=D.asStripeClasses,T=x.children("tbody").find("tr").eq(0);if(-1!==i.inArray(!0,i.map(m,function(e){return T.hasClass(e)}))&&(i("tbody tr",this).removeClass(m.join(" ")),D.asDestroyStripes=m.slice()),k=[],m=this.getElementsByTagName("thead"),0!==m.length&&(B(D.aoHeader,m[0]),k=j(D)),null===p.aoColumns)for(S=[],m=0,f=k.length;m<f;m++)S.push(null);else S=p.aoColumns;for(m=0,f=S.length;m<f;m++)h(D,k?k[m]:null);if(b(D,p.aoColumnDefs,S,function(e,t){u(D,e,t)}),T.length){var E=function(e,t){return null!==e.getAttribute("data-"+t)?t:null};i.each(R(D,T[0]).cells,function(e,t){var i=D.aoColumns[e];if(i.mData===e){var a=E(t,"sort")||E(t,"order"),r=E(t,"filter")||E(t,"search");null===a&&null===r||(i.mData={_:e+".display",sort:null!==a?e+".@data-"+a:n,type:null!==a?e+".@data-"+a:n,filter:null!==r?e+".@data-"+r:n},u(D,e))}})}var A=D.oFeatures;if(p.bStateSave&&(A.bStateSave=!0,Ie(D),$e(D,"aoDrawCallback",Re,"state_save")),p.aaSorting===n)for(k=D.aaSorting,m=0,f=k.length;m<f;m++)k[m][1]=D.aoColumns[m].asSorting[0];if(Ae(D),A.bSort&&$e(D,"aoDrawCallback",function(){if(D.bSorted){var e=Se(D),t={};i.each(e,function(e,n){t[n.src]=n.dir}),Be(D,null,"order",[D,e,t]),_e(D)}}),$e(D,"aoDrawCallback",function(){(D.bSorted||"ssp"===Ue(D)||A.bDeferRender)&&Ae(D)},"sc"),c(D),m=x.children("caption").each(function(){this._captionSide=x.css("caption-side")}),f=x.children("thead"),0===f.length&&(f=i("<thead/>").appendTo(this)),D.nTHead=f[0],f=x.children("tbody"),0===f.length&&(f=i("<tbody/>").appendTo(this)),D.nTBody=f[0],f=x.children("tfoot"),0===f.length&&0<m.length&&(""!==D.oScroll.sX||""!==D.oScroll.sY)&&(f=i("<tfoot/>").appendTo(this)),0===f.length||0===f.children().length?x.addClass(g.sNoFooter):0<f.length&&(D.nTFoot=f[0],B(D.aoFooter,D.nTFoot)),p.aaData)for(m=0;m<p.aaData.length;m++)w(D,p.aaData[m]);else(D.bDeferLoading||"dom"==Ue(D))&&C(D,i(D.nTBody).children("tr"));D.aiDisplay=D.aiDisplayMaster.slice(),D.bInitialised=!0,!1===y&&re(D)}}),t=null,this};var wt=[],Ct=Array.prototype,xt=function(e){var t,n,a=Ve.settings,r=i.map(a,function(e){return e.nTable});return e?e.nTable&&e.oApi?[e]:e.nodeName&&"table"===e.nodeName.toLowerCase()?(t=i.inArray(e,r),-1!==t?[a[t]]:null):e&&"function"==typeof e.settings?e.settings().toArray():("string"==typeof e?n=i(e):e instanceof i&&(n=e),n?n.map(function(){return t=i.inArray(this,r),-1!==t?a[t]:null}).toArray():void 0):[]};Ge=function(e,t){if(!(this instanceof Ge))return new Ge(e,t);var n=[],a=function(e){(e=xt(e))&&n.push.apply(n,e)};if(i.isArray(e))for(var r=0,o=e.length;r<o;r++)a(e[r]);else a(e);this.context=ft(n),t&&this.push.apply(this,t.toArray?t.toArray():t),this.selector={rows:null,cols:null,opts:null},Ge.extend(this,this,wt)},Ve.Api=Ge,Ge.prototype={any:function(){return 0!==this.flatten().length},concat:Ct.concat,context:[],each:function(e){for(var t=0,n=this.length;t<n;t++)e.call(this,this[t],t,this);return this},eq:function(e){var t=this.context;return t.length>e?new Ge(t[e],this[e]):null},filter:function(e){var t=[];if(Ct.filter)t=Ct.filter.call(this,e,this);else for(var n=0,i=this.length;n<i;n++)e.call(this,this[n],n,this)&&t.push(this[n]);return new Ge(this.context,t)},flatten:function(){var e=[];return new Ge(this.context,e.concat.apply(e,this.toArray()))},join:Ct.join,indexOf:Ct.indexOf||function(e,t){for(var n=t||0,i=this.length;n<i;n++)if(this[n]===e)return n;return-1},iterator:function(e,t,i,a){var r,o,s,l,c,d,h,u=[],f=this.context,p=this.selector;for("string"==typeof e&&(a=i,i=t,t=e,e=!1),o=0,s=f.length;o<s;o++){var m=new Ge(f[o]);if("table"===t)(r=i.call(m,f[o],o))!==n&&u.push(r);else if("columns"===t||"rows"===t)(r=i.call(m,f[o],this[o],o))!==n&&u.push(r);else if("column"===t||"column-rows"===t||"row"===t||"cell"===t)for(h=this[o],"column-rows"===t&&(d=Tt(f[o],p.opts)),l=0,c=h.length;l<c;l++)r=h[l],(r="cell"===t?i.call(m,f[o],r.row,r.column,o,l):i.call(m,f[o],r,o,l,d))!==n&&u.push(r)}return u.length||a?(e=new Ge(f,e?u.concat.apply([],u):u),t=e.selector,t.rows=p.rows,t.cols=p.cols,t.opts=p.opts,e):this},lastIndexOf:Ct.lastIndexOf||function(e,t){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(e){var t=[];if(Ct.map)t=Ct.map.call(this,e,this);else for(var n=0,i=this.length;n<i;n++)t.push(e.call(this,this[n],n));return new Ge(this.context,t)},pluck:function(e){return this.map(function(t){return t[e]})},pop:Ct.pop,push:Ct.push,reduce:Ct.reduce||function(e,t){return d(this,e,t,0,this.length,1)},reduceRight:Ct.reduceRight||function(e,t){return d(this,e,t,this.length-1,-1,-1)},reverse:Ct.reverse,selector:null,shift:Ct.shift,sort:Ct.sort,splice:Ct.splice,toArray:function(){return Ct.slice.call(this)},to$:function(){return i(this)},toJQuery:function(){return i(this)},unique:function(){return new Ge(this.context,ft(this))},unshift:Ct.unshift},Ge.extend=function(e,t,n){if(n.length&&t&&(t instanceof Ge||t.__dt_wrapper)){var a,r,o;for(a=0,r=n.length;a<r;a++)o=n[a],t[o.name]="function"==typeof o.val?function(e,t,n){return function(){var i=t.apply(e,arguments);return Ge.extend(i,i,n.methodExt),i}}(e,o.val,o):i.isPlainObject(o.val)?{}:o.val,t[o.name].__dt_wrapper=!0,Ge.extend(e,t[o.name],o.propExt)}},Ge.register=Ke=function(e,t){if(i.isArray(e))for(var n=0,a=e.length;n<a;n++)Ge.register(e[n],t);else for(var r,o,s=e.split("."),l=wt,n=0,a=s.length;n<a;n++){r=(o=-1!==s[n].indexOf("()"))?s[n].replace("()",""):s[n];var c;e:{c=0;for(var d=l.length;c<d;c++)if(l[c].name===r){c=l[c];break e}c=null}c||(c={name:r,val:{},methodExt:[],propExt:[]},l.push(c)),n===a-1?c.val=t:l=o?c.methodExt:c.propExt}},Ge.registerPlural=Xe=function(e,t,a){Ge.register(e,a),Ge.register(t,function(){var e=a.apply(this,arguments);return e===this?this:e instanceof Ge?e.length?i.isArray(e[0])?new Ge(e.context,e[0]):e[0]:n:e})},Ke("tables()",function(e){var t;if(e){t=Ge
;var n=this.context;if("number"==typeof e)e=[n[e]];else var a=i.map(n,function(e){return e.nTable}),e=i(a).filter(e).map(function(){var e=i.inArray(this,a);return n[e]}).toArray();t=new t(e)}else t=this;return t}),Ke("table()",function(e){var e=this.tables(e),t=e.context;return t.length?new Ge(t[0]):e}),Xe("tables().nodes()","table().node()",function(){return this.iterator("table",function(e){return e.nTable},1)}),Xe("tables().body()","table().body()",function(){return this.iterator("table",function(e){return e.nTBody},1)}),Xe("tables().header()","table().header()",function(){return this.iterator("table",function(e){return e.nTHead},1)}),Xe("tables().footer()","table().footer()",function(){return this.iterator("table",function(e){return e.nTFoot},1)}),Xe("tables().containers()","table().container()",function(){return this.iterator("table",function(e){return e.nTableWrapper},1)}),Ke("draw()",function(e){return this.iterator("table",function(t){H(t,!1===e)})}),Ke("page()",function(e){return e===n?this.page.info().page:this.iterator("table",function(t){de(t,e)})}),Ke("page.info()",function(){if(0===this.context.length)return n;var e=this.context[0],t=e._iDisplayStart,i=e._iDisplayLength,a=e.fnRecordsDisplay(),r=-1===i;return{page:r?0:Math.floor(t/i),pages:r?1:Math.ceil(a/i),start:t,end:e.fnDisplayEnd(),length:i,recordsTotal:e.fnRecordsTotal(),recordsDisplay:a}}),Ke("page.len()",function(e){return e===n?0!==this.context.length?this.context[0]._iDisplayLength:n:this.iterator("table",function(t){se(t,e)})});var kt=function(e,t,n){if(n){var i=new Ge(e);i.one("draw",function(){n(i.ajax.json())})}"ssp"==Ue(e)?H(e,t):(ue(e,!0),F(e,[],function(n){E(e);for(var n=q(e,n),i=0,a=n.length;i<a;i++)w(e,n[i]);H(e,t),ue(e,!1)}))};Ke("ajax.json()",function(){var e=this.context;if(0<e.length)return e[0].json}),Ke("ajax.params()",function(){var e=this.context;if(0<e.length)return e[0].oAjaxData}),Ke("ajax.reload()",function(e,t){return this.iterator("table",function(n){kt(n,!1===t,e)})}),Ke("ajax.url()",function(e){var t=this.context;return e===n?0===t.length?n:(t=t[0],t.ajax?i.isPlainObject(t.ajax)?t.ajax.url:t.ajax:t.sAjaxSource):this.iterator("table",function(t){i.isPlainObject(t.ajax)?t.ajax.url=e:t.ajax=e})}),Ke("ajax.url().load()",function(e,t){return this.iterator("table",function(n){kt(n,!1===t,e)})});var St=function(e,t,a,r,o){var s,l,c,d,h,u,f=[];for(c=typeof t,t&&"string"!==c&&"function"!==c&&t.length!==n||(t=[t]),c=0,d=t.length;c<d;c++)for(l=t[c]&&t[c].split?t[c].split(","):[t[c]],h=0,u=l.length;h<u;h++)(s=a("string"==typeof l[h]?i.trim(l[h]):l[h]))&&s.length&&f.push.apply(f,s);if(e=ze.selector[e],e.length)for(c=0,d=e.length;c<d;c++)f=e[c](r,o,f);return f},Dt=function(e){return e||(e={}),e.filter&&e.search===n&&(e.search=e.filter),i.extend({search:"none",order:"current",page:"all"},e)},_t=function(e){for(var t=0,n=e.length;t<n;t++)if(0<e[t].length)return e[0]=e[t],e[0].length=1,e.length=1,e.context=[e.context[t]],e;return e.length=0,e},Tt=function(e,t){var n,a,r,o=[],s=e.aiDisplay;n=e.aiDisplayMaster;var l=t.search;if(a=t.order,r=t.page,"ssp"==Ue(e))return"removed"===l?[]:ht(0,n.length);if("current"==r)for(n=e._iDisplayStart,a=e.fnDisplayEnd();n<a;n++)o.push(s[n]);else if("current"==a||"applied"==a)o="none"==l?n.slice():"applied"==l?s.slice():i.map(n,function(e){return-1===i.inArray(e,s)?e:null});else if("index"==a||"original"==a)for(n=0,a=e.aoData.length;n<a;n++)"none"==l?o.push(n):(-1===(r=i.inArray(n,s))&&"removed"==l||0<=r&&"applied"==l)&&o.push(n);return o};Ke("rows()",function(e,t){e===n?e="":i.isPlainObject(e)&&(t=e,e="");var t=Dt(t),a=this.iterator("table",function(n){var a=t;return St("row",e,function(e){var t=rt(e);if(null!==t&&!a)return[t];var r=Tt(n,a);return null!==t&&-1!==i.inArray(t,r)?[t]:e?"function"==typeof e?i.map(r,function(t){var i=n.aoData[t];return e(t,i._aData,i.nTr)?t:null}):(t=ut(dt(n.aoData,r,"nTr")),e.nodeName&&-1!==i.inArray(e,t)?[e._DT_RowIndex]:i(t).filter(e).map(function(){return this._DT_RowIndex}).toArray()):r},n,a)},1);return a.selector.rows=e,a.selector.opts=t,a}),Ke("rows().nodes()",function(){return this.iterator("row",function(e,t){return e.aoData[t].nTr||n},1)}),Ke("rows().data()",function(){return this.iterator(!0,"rows",function(e,t){return dt(e.aoData,t,"_aData")},1)}),Xe("rows().cache()","row().cache()",function(e){return this.iterator("row",function(t,n){var i=t.aoData[n];return"search"===e?i._aFilterData:i._aSortData},1)}),Xe("rows().invalidate()","row().invalidate()",function(e){return this.iterator("row",function(t,n){N(t,n,e)})}),Xe("rows().indexes()","row().index()",function(){return this.iterator("row",function(e,t){return t},1)}),Xe("rows().remove()","row().remove()",function(){var e=this;return this.iterator("row",function(t,n,a){var r=t.aoData;r.splice(n,1);for(var o=0,s=r.length;o<s;o++)null!==r[o].nTr&&(r[o].nTr._DT_RowIndex=o);i.inArray(n,t.aiDisplay),A(t.aiDisplayMaster,n),A(t.aiDisplay,n),A(e[a],n,!1),je(t)})}),Ke("rows.add()",function(e){var t=this.iterator("table",function(t){var n,i,a,r=[];for(i=0,a=e.length;i<a;i++)n=e[i],n.nodeName&&"TR"===n.nodeName.toUpperCase()?r.push(C(t,n)[0]):r.push(w(t,n));return r},1),n=this.rows(-1);return n.pop(),n.push.apply(n,t.toArray()),n}),Ke("row()",function(e,t){return _t(this.rows(e,t))}),Ke("row().data()",function(e){var t=this.context;return e===n?t.length&&this.length?t[0].aoData[this[0]]._aData:n:(t[0].aoData[this[0]]._aData=e,N(t[0],this[0],"data"),this)}),Ke("row().node()",function(){var e=this.context;return e.length&&this.length?e[0].aoData[this[0]].nTr||null:null}),Ke("row.add()",function(e){e instanceof i&&e.length&&(e=e[0]);var t=this.iterator("table",function(t){return e.nodeName&&"TR"===e.nodeName.toUpperCase()?C(t,e)[0]:w(t,e)});return this.row(t[0])});var Et=function(e,t){var i=e.context;i.length&&(i=i[0].aoData[t!==n?t:e[0]],i._details&&(i._details.remove(),i._detailsShow=n,i._details=n))},At=function(e,t){var n=e.context;if(n.length&&e.length){var i=n[0].aoData[e[0]];if(i._details){(i._detailsShow=t)?i._details.insertAfter(i.nTr):i._details.detach();var a=n[0],r=new Ge(a),o=a.aoData;r.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),0<ct(o,"_details").length&&(r.on("draw.dt.DT_details",function(e,t){a===t&&r.rows({page:"current"}).eq(0).each(function(e){e=o[e],e._detailsShow&&e._details.insertAfter(e.nTr)})}),r.on("column-visibility.dt.DT_details",function(e,t){if(a===t)for(var n,i=g(t),r=0,s=o.length;r<s;r++)n=o[r],n._details&&n._details.children("td[colspan]").attr("colspan",i)}),r.on("destroy.dt.DT_details",function(e,t){if(a===t)for(var n=0,i=o.length;n<i;n++)o[n]._details&&Et(r,n)}))}}};Ke("row().child()",function(e,t){var a=this.context;if(e===n)return a.length&&this.length?a[0].aoData[this[0]]._details:n;if(!0===e)this.child.show();else if(!1===e)Et(this);else if(a.length&&this.length){var r=a[0],a=a[0].aoData[this[0]],o=[],s=function(e,t){if(i.isArray(e)||e instanceof i)for(var n=0,a=e.length;n<a;n++)s(e[n],t);else e.nodeName&&"tr"===e.nodeName.toLowerCase()?o.push(e):(n=i("<tr><td/></tr>").addClass(t),i("td",n).addClass(t).html(e)[0].colSpan=g(r),o.push(n[0]))};s(e,t),a._details&&a._details.remove(),a._details=i(o),a._detailsShow&&a._details.insertAfter(a.nTr)}return this}),Ke(["row().child.show()","row().child().show()"],function(){return At(this,!0),this}),Ke(["row().child.hide()","row().child().hide()"],function(){return At(this,!1),this}),Ke(["row().child.remove()","row().child().remove()"],function(){return Et(this),this}),Ke("row().child.isShown()",function(){var e=this.context;return!(!e.length||!this.length)&&(e[0].aoData[this[0]]._detailsShow||!1)});var Nt=/^(.+):(name|visIdx|visible)$/,Rt=function(e,t,n,i,a){for(var n=[],i=0,r=a.length;i<r;i++)n.push(x(e,a[i],t));return n};Ke("columns()",function(e,t){e===n?e="":i.isPlainObject(e)&&(t=e,e="");var t=Dt(t),a=this.iterator("table",function(n){var a=e,r=t,o=n.aoColumns,s=ct(o,"sName"),l=ct(o,"nTh");return St("column",a,function(e){var t=rt(e);if(""===e)return ht(o.length);if(null!==t)return[t>=0?t:o.length+t];if("function"==typeof e){var a=Tt(n,r);return i.map(o,function(t,i){return e(i,Rt(n,i,0,0,a),l[i])?i:null})}var c="string"==typeof e?e.match(Nt):"";if(!c)return i(l).filter(e).map(function(){return i.inArray(this,l)}).toArray();switch(c[2]){case"visIdx":case"visible":if((t=parseInt(c[1],10))<0){var d=i.map(o,function(e,t){return e.bVisible?t:null});return[d[d.length+t]]}return[p(n,t)];case"name":return i.map(s,function(e,t){return e===c[1]?t:null})}},n,r)},1);return a.selector.cols=e,a.selector.opts=t,a}),Xe("columns().header()","column().header()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].nTh},1)}),Xe("columns().footer()","column().footer()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].nTf},1)}),Xe("columns().data()","column().data()",function(){return this.iterator("column-rows",Rt,1)}),Xe("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].mData},1)}),Xe("columns().cache()","column().cache()",function(e){return this.iterator("column-rows",function(t,n,i,a,r){return dt(t.aoData,r,"search"===e?"_aFilterData":"_aSortData",n)},1)}),Xe("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(e,t,n,i,a){return dt(e.aoData,a,"anCells",t)},1)}),Xe("columns().visible()","column().visible()",function(e,t){return this.iterator("column",function(a,r){if(e===n)return a.aoColumns[r].bVisible;var o,s,l,c=a.aoColumns,d=c[r],h=a.aoData;if(e!==n&&d.bVisible!==e){if(e){var u=i.inArray(!0,ct(c,"bVisible"),r+1);for(o=0,s=h.length;o<s;o++)l=h[o].nTr,c=h[o].anCells,l&&l.insertBefore(c[r],c[u]||null)}else i(ct(a.aoData,"anCells",r)).detach();d.bVisible=e,P(a,a.aoHeader),P(a,a.aoFooter),(t===n||t)&&(f(a),(a.oScroll.sX||a.oScroll.sY)&&pe(a)),Be(a,null,"column-visibility",[a,r,e]),Re(a)}})}),Xe("columns().indexes()","column().index()",function(e){return this.iterator("column",function(t,n){return"visible"===e?m(t,n):n},1)}),Ke("columns.adjust()",function(){return this.iterator("table",function(e){f(e)},1)}),Ke("column.index()",function(e,t){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===e||"toData"===e)return p(n,t);if("fromData"===e||"toVisible"===e)return m(n,t)}}),Ke("column()",function(e,t){return _t(this.columns(e,t))}),Ke("cells()",function(e,t,a){if(i.isPlainObject(e)&&(e.row===n?(a=e,e=null):(a=t,t=null)),i.isPlainObject(t)&&(a=t,t=null),null===t||t===n)return this.iterator("table",function(t){var r,o,s,l,c,d,h,u=e,f=Dt(a),p=t.aoData,m=Tt(t,f),g=ut(dt(p,m,"anCells")),y=i([].concat.apply([],g)),v=t.aoColumns.length;return St("cell",u,function(e){var a="function"==typeof e;if(null===e||e===n||a){for(o=[],s=0,l=m.length;s<l;s++)for(r=m[s],c=0;c<v;c++)d={row:r,column:c},a?(h=t.aoData[r],e(d,x(t,r,c),h.anCells?h.anCells[c]:null)&&o.push(d)):o.push(d);return o}return i.isPlainObject(e)?[e]:y.filter(e).map(function(e,t){return r=t.parentNode._DT_RowIndex,{row:r,column:i.inArray(t,p[r].anCells)}}).toArray()},t,f)});var r,o,s,l,c,d=this.columns(t,a),h=this.rows(e,a),u=this.iterator("table",function(e,t){for(r=[],o=0,s=h[t].length;o<s;o++)for(l=0,c=d[t].length;l<c;l++)r.push({row:h[t][o],column:d[t][l]});return r},1);return i.extend(u.selector,{cols:t,rows:e,opts:a}),u}),Xe("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(e,t,i){return(e=e.aoData[t].anCells)?e[i]:n},1)}),Ke("cells().data()",function(){return this.iterator("cell",function(e,t,n){return x(e,t,n)},1)}),Xe("cells().cache()","cell().cache()",function(e){return e="search"===e?"_aFilterData":"_aSortData",this.iterator("cell",function(t,n,i){return t.aoData[n][e][i]},1)}),Xe("cells().render()","cell().render()",function(e){return this.iterator("cell",function(t,n,i){return x(t,n,i,e)},1)}),Xe("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(e,t,n){return{row:t,column:n,columnVisible:m(e,n)}},1)}),Xe("cells().invalidate()","cell().invalidate()",function(e){return this.iterator("cell",function(t,n,i){N(t,n,e,i)})}),Ke("cell()",function(e,t,n){return _t(this.cells(e,t,n))}),Ke("cell().data()",function(e){var t=this.context,i=this[0];return e===n?t.length&&i.length?x(t[0],i[0].row,i[0].column):n:(k(t[0],i[0].row,i[0].column,e),N(t[0],i[0].row,"data",i[0].column),this)}),Ke("order()",function(e,t){var a=this.context;return e===n?0!==a.length?a[0].aaSorting:n:("number"==typeof e?e=[[e,t]]:i.isArray(e[0])||(e=Array.prototype.slice.call(arguments)),this.iterator("table",function(t){t.aaSorting=e.slice()}))}),Ke("order.listener()",function(e,t,n){return this.iterator("table",function(i){Ee(i,e,t,n)})}),Ke(["columns().order()","column().order()"],function(e){var t=this;return this.iterator("table",function(n,a){var r=[];i.each(t[a],function(t,n){r.push([n,e])}),n.aaSorting=r})}),Ke("search()",function(e,t,a,r){var o=this.context;return e===n?0!==o.length?o[0].oPreviousSearch.sSearch:n:this.iterator("table",function(n){n.oFeatures.bFilter&&z(n,i.extend({},n.oPreviousSearch,{sSearch:e+"",bRegex:null!==t&&t,bSmart:null===a||a,bCaseInsensitive:null===r||r}),1)})}),Xe("columns().search()","column().search()",function(e,t,a,r){return this.iterator("column",function(o,s){var l=o.aoPreSearchCols;if(e===n)return l[s].sSearch;o.oFeatures.bFilter&&(i.extend(l[s],{sSearch:e+"",bRegex:null!==t&&t,bSmart:null===a||a,bCaseInsensitive:null===r||r}),z(o,o.oPreviousSearch,1))})}),Ke("state()",function(){return this.context.length?this.context[0].oSavedState:null}),Ke("state.clear()",function(){return this.iterator("table",function(e){e.fnStateSaveCallback.call(e.oInstance,e,{})})}),Ke("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),Ke("state.save()",function(){return this.iterator("table",function(e){Re(e)})}),Ve.versionCheck=Ve.fnVersionCheck=function(e){for(var t,n,i=Ve.version.split("."),e=e.split("."),a=0,r=e.length;a<r;a++)if(t=parseInt(i[a],10)||0,n=parseInt(e[a],10)||0,t!==n)return t>n;return!0},Ve.isDataTable=Ve.fnIsDataTable=function(e){var t=i(e).get(0),n=!1;return i.each(Ve.settings,function(e,a){var r=a.nScrollHead?i("table",a.nScrollHead)[0]:null,o=a.nScrollFoot?i("table",a.nScrollFoot)[0]:null;a.nTable!==t&&r!==t&&o!==t||(n=!0)}),n},Ve.tables=Ve.fnTables=function(e){return i.map(Ve.settings,function(t){if(!e||e&&i(t.nTable).is(":visible"))return t.nTable})},Ve.util={throttle:ye,escapeRegex:Q},Ve.camelToHungarian=r,Ke("$()",function(e,t){var n=this.rows(t).nodes(),n=i(n);return i([].concat(n.filter(e).toArray(),n.find(e).toArray()))}),i.each(["on","one","off"],function(e,t){Ke(t+"()",function(){var e=Array.prototype.slice.call(arguments);e[0].match(/\.dt\b/)||(e[0]+=".dt");var n=i(this.tables().nodes());return n[t].apply(n,e),this})}),Ke("clear()",function(){return this.iterator("table",function(e){E(e)})}),Ke("settings()",function(){return new Ge(this.context,this.context)}),Ke("init()",function(){var e=this.context;return e.length?e[0].oInit:null}),Ke("data()",function(){return this.iterator("table",function(e){return ct(e.aoData,"_aData")}).flatten()}),Ke("destroy()",function(t){return t=t||!1,this.iterator("table",function(n){var a,r=n.nTableWrapper.parentNode,o=n.oClasses,s=n.nTable,l=n.nTBody,c=n.nTHead,d=n.nTFoot,h=i(s),l=i(l),u=i(n.nTableWrapper),f=i.map(n.aoData,function(e){return e.nTr});n.bDestroying=!0,Be(n,"aoDestroyCallback","destroy",[n]),t||new Ge(n).columns().visible(!0),u.unbind(".DT").find(":not(tbody *)").unbind(".DT"),i(e).unbind(".DT-"+n.sInstance),s!=c.parentNode&&(h.children("thead").detach(),h.append(c)),d&&s!=d.parentNode&&(h.children("tfoot").detach(),h.append(d)),h.detach(),u.detach(),n.aaSorting=[],n.aaSortingFixed=[],Ae(n),i(f).removeClass(n.asStripeClasses.join(" ")),i("th, td",c).removeClass(o.sSortable+" "+o.sSortableAsc+" "+o.sSortableDesc+" "+o.sSortableNone),n.bJUI&&(i("th span."+o.sSortIcon+", td span."+o.sSortIcon,c).detach(),i("th, td",c).each(function(){var e=i("div."+o.sSortJUIWrapper,this);i(this).append(e.contents()),e.detach()})),!t&&r&&r.insertBefore(s,n.nTableReinsertBefore),l.children().detach(),l.append(f),h.css("width",n.sDestroyWidth).removeClass(o.sTable),(a=n.asDestroyStripes.length)&&l.children().each(function(e){i(this).addClass(n.asDestroyStripes[e%a])}),-1!==(r=i.inArray(n,Ve.settings))&&Ve.settings.splice(r,1)})}),i.each(["column","row","cell"],function(e,t){Ke(t+"s().every()",function(e){return this.iterator(t,function(n,i,a){e.call(new Ge(n)[t](i,a))})})}),Ke("i18n()",function(e,t,a){var r=this.context[0],e=D(e)(r.oLanguage);return e===n&&(e=t),a!==n&&i.isPlainObject(e)&&(e=e[a]!==n?e[a]:e._),e.replace("%d",a)}),Ve.version="1.10.7",Ve.settings=[],Ve.models={},Ve.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},Ve.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null},Ve.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},Ve.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(e){try{return JSON.parse((-1===e.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+e.sInstance+"_"+location.pathname))}catch(e){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(e,t){try{(-1===e.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+e.sInstance+"_"+location.pathname,JSON.stringify(t))}catch(e){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:i.extend({},Ve.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null},a(Ve.defaults),Ve.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},a(Ve.defaults.column),Ve.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:n,oAjaxData:n,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==Ue(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==Ue(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var e=this._iDisplayLength,t=this._iDisplayStart,n=t+e,i=this.aiDisplay.length,a=this.oFeatures,r=a.bPaginate;return a.bServerSide?!1===r||-1===e?t+i:Math.min(t+e,this._iRecordsDisplay):!r||n>i||-1===e?i:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}},Ve.ext=ze={buttons:{},classes:{},errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:Ve.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:Ve.version},i.extend(ze,{afnFiltering:ze.search,aTypes:ze.type.detect,ofnSearch:ze.type.search,oSort:ze.type.order,afnSortData:ze.order,aoFeatures:ze.feature,oApi:ze.internal,oStdClasses:ze.classes,oPagination:ze.pager}),i.extend(Ve.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var It="",It="",Mt=It+"ui-state-default",Lt=It+"css_right ui-icon ui-icon-",Pt=It+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";i.extend(Ve.ext.oJUIClasses,Ve.ext.classes,{sPageButton:"fg-button ui-button "+Mt,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:Mt+" sorting_asc",sSortDesc:Mt+" sorting_desc",sSortable:Mt+" sorting",sSortableAsc:Mt+" sorting_asc_disabled",sSortableDesc:Mt+" sorting_desc_disabled",sSortableNone:Mt+" sorting_disabled",sSortJUIAsc:Lt+"triangle-1-n",sSortJUIDesc:Lt+"triangle-1-s",sSortJUI:Lt+"carat-2-n-s",sSortJUIAscAllowed:Lt+"carat-1-n",sSortJUIDescAllowed:Lt+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+Mt,sScrollFoot:"dataTables_scrollFoot "+Mt,sHeaderTH:Mt,sFooterTH:Mt,sJUIHeader:Pt+" ui-corner-tl ui-corner-tr",sJUIFooter:Pt+" ui-corner-bl ui-corner-br"});var Ot=Ve.ext.pager;i.extend(Ot,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(e,t){return["previous",We(e,t),"next"]},full_numbers:function(e,t){return["first","previous",We(e,t),"next","last"]},_numbers:We,numbers_length:7}),i.extend(!0,Ve.ext.renderer,{pageButton:{_:function(e,n,a,r,o,s){var l,c,d,h=e.oClasses,u=e.oLanguage.oPaginate,f=0,p=function(t,n){var r,d,m,g,y=function(t){de(e,t.data.action,!0)};for(r=0,d=n.length;r<d;r++)if(g=n[r],i.isArray(g))m=i("<"+(g.DT_el||"div")+"/>").appendTo(t),p(m,g);else{switch(c=l="",g){case"ellipsis":t.append('<span class="ellipsis">&#x2026;</span>');break;case"first":l=u.sFirst,c=g+(o>0?"":" "+h.sPageButtonDisabled);break;case"previous":l=u.sPrevious,c=g+(o>0?"":" "+h.sPageButtonDisabled);break;case"next":l=u.sNext,c=g+(o<s-1?"":" "+h.sPageButtonDisabled);break;case"last":l=u.sLast,c=g+(o<s-1?"":" "+h.sPageButtonDisabled);break;default:l=g+1,c=o===g?h.sPageButtonActive:""}l&&(m=i("<a>",{class:h.sPageButton+" "+c,"aria-controls":e.sTableId,"data-dt-idx":f,tabindex:e.iTabIndex,id:0===a&&"string"==typeof g?e.sTableId+"_"+g:null}).html(l).appendTo(t),He(m,{action:g},y),f++)}};try{d=i(t.activeElement).data("dt-idx")}catch(e){}p(i(n).empty(),r),d&&i(n).find("[data-dt-idx="+d+"]").focus()}}}),i.extend(Ve.ext.type.detect,[function(e,t){var n=t.oLanguage.sDecimal;return st(e,n)?"num"+n:null},function(e){if(e&&!(e instanceof Date)&&(!et.test(e)||!tt.test(e)))return null;var t=Date.parse(e);return null!==t&&!isNaN(t)||at(e)?"date":null},function(e,t){var n=t.oLanguage.sDecimal;return st(e,n,!0)?"num-fmt"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return lt(e,n)?"html-num"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return lt(e,n,!0)?"html-num-fmt"+n:null},function(e){return at(e)||"string"==typeof e&&-1!==e.indexOf("<")?"html":null}]),i.extend(Ve.ext.type.search,{html:function(e){return at(e)?e:"string"==typeof e?e.replace(Qe," ").replace(Ze,""):""},string:function(e){return at(e)?e:"string"==typeof e?e.replace(Qe," "):e}});var Ht=function(e,t,n,i){return 0===e||e&&"-"!==e?(t&&(e=ot(e,t)),e.replace&&(n&&(e=e.replace(n,"")),i&&(e=e.replace(i,""))),1*e):-1/0};return i.extend(ze.type.order,{"date-pre":function(e){return Date.parse(e)||0},"html-pre":function(e){return at(e)?"":e.replace?e.replace(/<.*?>/g,"").toLowerCase():e+""},"string-pre":function(e){return at(e)?"":"string"==typeof e?e.toLowerCase():e.toString?e.toString():""},"string-asc":function(e,t){return e<t?-1:e>t?1:0},"string-desc":function(e,t){return e<t?1:e>t?-1:0}}),Ye(""),i.extend(!0,Ve.ext.renderer,{header:{_:function(e,t,n,a){i(e.nTable).on("order.dt.DT",function(i,r,o,s){e===r&&(i=n.idx,t.removeClass(n.sSortingClass+" "+a.sSortAsc+" "+a.sSortDesc).addClass("asc"==s[i]?a.sSortAsc:"desc"==s[i]?a.sSortDesc:n.sSortingClass))})},jqueryui:function(e,t,n,a){i("<div/>").addClass(a.sSortJUIWrapper).append(t.contents()).append(i("<span/>").addClass(a.sSortIcon+" "+n.sSortingClassJUI)).appendTo(t),i(e.nTable).on("order.dt.DT",function(i,r,o,s){e===r&&(i=n.idx,t.removeClass(a.sSortAsc+" "+a.sSortDesc).addClass("asc"==s[i]?a.sSortAsc:"desc"==s[i]?a.sSortDesc:n.sSortingClass),t.find("span."+a.sSortIcon).removeClass(a.sSortJUIAsc+" "+a.sSortJUIDesc+" "+a.sSortJUI+" "+a.sSortJUIAscAllowed+" "+a.sSortJUIDescAllowed).addClass("asc"==s[i]?a.sSortJUIAsc:"desc"==s[i]?a.sSortJUIDesc:n.sSortingClassJUI))})}}}),Ve.render={number:function(e,t,n,i){return{display:function(a){if("number"!=typeof a&&"string"!=typeof a)return a;var r=0>a?"-":"",a=Math.abs(parseFloat(a)),o=parseInt(a,10),a=n?t+(a-o).toFixed(n).substring(2):"";return r+(i||"")+o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)+a}}}},i.extend(Ve.ext.internal,{_fnExternApiFunc:qe,_fnBuildAjax:F,_fnAjaxUpdate:U,_fnAjaxParameters:W,_fnAjaxUpdateDraw:Y,_fnAjaxDataSrc:q,_fnAddColumn:h,_fnColumnOptions:u,_fnAdjustColumnSizing:f,_fnVisibleToColumnIndex:p,_fnColumnIndexToVisible:m,_fnVisbleColumns:g,_fnGetColumns:y,_fnColumnTypes:v,_fnApplyColumnDefs:b,_fnHungarianMap:a,_fnCamelToHungarian:r,_fnLanguageCompat:o,_fnBrowserDetect:c,_fnAddData:w,_fnAddTr:C,_fnNodeToDataIndex:function(e,t){return t._DT_RowIndex!==n?t._DT_RowIndex:null},_fnNodeToColumnIndex:function(e,t,n){return i.inArray(n,e.aoData[t].anCells)},_fnGetCellData:x,_fnSetCellData:k,_fnSplitObjNotation:S,_fnGetObjectDataFn:D,_fnSetObjectDataFn:_,_fnGetDataMaster:T,_fnClearTable:E,_fnDeleteIndex:A,_fnInvalidate:N,_fnGetRowElements:R,_fnCreateTr:I,_fnBuildHead:L,_fnDrawHead:P,_fnDraw:O,_fnReDraw:H,_fnAddOptionsHtml:$,_fnDetectHeader:B,_fnGetUniqueThs:j,_fnFeatureHtmlFilter:V,_fnFilterComplete:z,_fnFilterCustom:G,_fnFilterColumn:K,_fnFilter:X,_fnFilterCreateSearch:J,_fnEscapeRegex:Q,_fnFilterData:Z,_fnFeatureHtmlInfo:ne,_fnUpdateInfo:ie,_fnInfoMacros:ae,_fnInitialise:re,_fnInitComplete:oe,_fnLengthChange:se,_fnFeatureHtmlLength:le,_fnFeatureHtmlPaginate:ce,_fnPageChange:de,_fnFeatureHtmlProcessing:he,_fnProcessingDisplay:ue,_fnFeatureHtmlTable:fe,_fnScrollDraw:pe,_fnApplyToChildren:me,_fnCalculateColumnWidths:ge,_fnThrottle:ye,_fnConvertToWidth:ve,_fnScrollingWidthAdjust:be,_fnGetWidestNode:we,_fnGetMaxLenString:Ce,_fnStringToCss:xe,_fnScrollBarWidth:ke,_fnSortFlatten:Se,_fnSort:De,_fnSortAria:_e,_fnSortListener:Te,_fnSortAttachListener:Ee,_fnSortingClasses:Ae,_fnSortData:Ne,_fnSaveState:Re,_fnLoadState:Ie,_fnSettingsFromNode:Me,_fnLog:Le,_fnMap:Pe,_fnBindAction:He,_fnCallbackReg:$e,_fnCallbackFire:Be,_fnLengthOverflow:je,_fnRenderer:Fe,_fnDataSource:Ue,_fnRowAttributes:M,_fnCalculateEnd:function(){}}),i.fn.dataTable=Ve,i.fn.dataTableSettings=Ve.settings,i.fn.dataTableExt=Ve.ext,i.fn.DataTable=function(e){return i(this).dataTable(e).api()},i.each(Ve,function(e,t){i.fn.DataTable[e]=t}),i.fn.dataTable};"function"==typeof define&&define.amd?define("datatables",["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):jQuery&&!jQuery.fn.dataTable&&i(jQuery)}(window,document),function(e,t){var n=function(e,n){e.extend(!0,n.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"}),e.extend(n.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"}),n.ext.renderer.pageButton.bootstrap=function(i,a,r,o,s,l){var c,d,h,u=new n.Api(i),f=i.oClasses,p=i.oLanguage.oPaginate,m=0,g=function(t,n){var a,o,h,y,v=function(t){t.preventDefault(),e(t.currentTarget).hasClass("disabled")||u.page(t.data.action).draw(!1)};for(a=0,o=n.length;a<o;a++)if(y=n[a],e.isArray(y))g(t,y);else{switch(d=c="",y){case"ellipsis":c="&hellip;",d="disabled";break;case"first":c=p.sFirst,d=y+(0<s?"":" disabled");break;case"previous":c=p.sPrevious,d=y+(0<s?"":" disabled");break;case"next":c=p.sNext,d=y+(s<l-1?"":" disabled");break;case"last":c=p.sLast,d=y+(s<l-1?"":" disabled");break;default:c=y+1,d=s===y?"active":""}c&&(h=e("<li>",{class:f.sPageButton+" "+d,id:0===r&&"string"==typeof y?i.sTableId+"_"+y:null}).append(e("<a>",{href:"#","aria-controls":i.sTableId,"data-dt-idx":m,tabindex:i.iTabIndex}).html(c)).appendTo(t),i.oApi._fnBindAction(h,{action:y},v),m++)}};try{h=e(t.activeElement).data("dt-idx")}catch(e){}g(e(a).empty().html('<ul class="pagination"/>').children("ul"),o),h&&e(a).find("[data-dt-idx="+h+"]").focus()},n.TableTools&&(e.extend(!0,n.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}}),e.extend(!0,n.TableTools.DEFAULTS.oTags,{collection:{
container:"ul",button:"li",liner:"a"}}))};"function"==typeof define&&define.amd?define(["jquery","datatables"],n):"object"==typeof exports?n(require("jquery"),require("datatables")):jQuery&&n(jQuery,jQuery.fn.dataTable)}(window,document),"undefined"==typeof jQuery)throw new Error("AdminLTE requires jQuery");$.AdminLTE={},$.AdminLTE.options={navbarMenuSlimscroll:!0,navbarMenuSlimscrollWidth:"3px",navbarMenuHeight:"200px",animationSpeed:500,sidebarToggleSelector:"[data-toggle='offcanvas']",sidebarPushMenu:!0,sidebarSlimScroll:!0,sidebarExpandOnHover:!1,enableBoxRefresh:!0,enableBSToppltip:!0,BSTooltipSelector:"[data-toggle='tooltip']",enableFastclick:!1,enableControlTreeView:!0,enableControlSidebar:!0,controlSidebarOptions:{toggleBtnSelector:"[data-toggle='control-sidebar']",selector:".control-sidebar",slide:!0},enableBoxWidget:!0,boxWidgetOptions:{boxWidgetIcons:{collapse:"fa-minus",open:"fa-plus",remove:"fa-times"},boxWidgetSelectors:{remove:'[data-widget="remove"]',collapse:'[data-widget="collapse"]'}},directChat:{enable:!0,contactToggleSelector:'[data-widget="chat-pane-toggle"]'},colors:{lightBlue:"#3c8dbc",red:"#f56954",green:"#00a65a",aqua:"#00c0ef",yellow:"#f39c12",blue:"#0073b7",navy:"#001F3F",teal:"#39CCCC",olive:"#3D9970",lime:"#01FF70",orange:"#FF851B",fuchsia:"#F012BE",purple:"#8E24AA",maroon:"#D81B60",black:"#222222",gray:"#d2d6de"},screenSizes:{xs:480,sm:768,md:992,lg:1200}},$(function(){"use strict";$("body").removeClass("hold-transition"),"undefined"!=typeof AdminLTEOptions&&$.extend(!0,$.AdminLTE.options,AdminLTEOptions);var e=$.AdminLTE.options;_init(),$.AdminLTE.layout.activate(),e.enableControlTreeView&&$.AdminLTE.tree(".sidebar"),e.enableControlSidebar&&$.AdminLTE.controlSidebar.activate(),e.navbarMenuSlimscroll&&void 0!==$.fn.slimscroll&&$(".navbar .menu").slimscroll({height:e.navbarMenuHeight,alwaysVisible:!1,size:e.navbarMenuSlimscrollWidth}).css("width","100%"),e.sidebarPushMenu&&$.AdminLTE.pushMenu.activate(e.sidebarToggleSelector),e.enableBSToppltip&&$("body").tooltip({selector:e.BSTooltipSelector,container:"body"}),e.enableBoxWidget&&$.AdminLTE.boxWidget.activate(),e.enableFastclick&&"undefined"!=typeof FastClick&&FastClick.attach(document.body),e.directChat.enable&&$(document).on("click",e.directChat.contactToggleSelector,function(){$(this).parents(".direct-chat").first().toggleClass("direct-chat-contacts-open")}),$('.btn-group[data-toggle="btn-toggle"]').each(function(){var e=$(this);$(this).find(".btn").on("click",function(t){e.find(".btn.active").removeClass("active"),$(this).addClass("active"),t.preventDefault()})})}),function(e){"use strict";e.fn.boxRefresh=function(t){function n(e){e.append(r),a.onLoadStart.call(e)}function i(e){e.find(r).remove(),a.onLoadDone.call(e)}var a=e.extend({trigger:".refresh-btn",source:"",onLoadStart:function(e){return e},onLoadDone:function(e){return e}},t),r=e('<div class="overlay"><div class="fa fa-refresh fa-spin"></div></div>');return this.each(function(){if(""===a.source)return void(window.console&&window.console.log("Please specify a source first - boxRefresh()"));var t=e(this);t.find(a.trigger).first().on("click",function(e){e.preventDefault(),n(t),t.find(".box-body").load(a.source,function(){i(t)})})})}}(jQuery),function(e){"use strict";e.fn.activateBox=function(){e.AdminLTE.boxWidget.activate(this)},e.fn.toggleBox=function(){var t=e(e.AdminLTE.boxWidget.selectors.collapse,this);e.AdminLTE.boxWidget.collapse(t)},e.fn.removeBox=function(){var t=e(e.AdminLTE.boxWidget.selectors.remove,this);e.AdminLTE.boxWidget.remove(t)}}(jQuery),function(e){"use strict";e.fn.todolist=function(t){var n=e.extend({onCheck:function(e){return e},onUncheck:function(e){return e}},t);return this.each(function(){void 0!==e.fn.iCheck?(e("input",this).on("ifChecked",function(){var t=e(this).parents("li").first();t.toggleClass("done"),n.onCheck.call(t)}),e("input",this).on("ifUnchecked",function(){var t=e(this).parents("li").first();t.toggleClass("done"),n.onUncheck.call(t)})):e("input",this).on("change",function(){var t=e(this).parents("li").first();t.toggleClass("done"),e("input",t).is(":checked")?n.onCheck.call(t):n.onUncheck.call(t)})})}}(jQuery),function(e,t){"use strict";function n(n){e("body").toggleClass(n),t.layout.fixSidebar(),"layout-boxed"==n&&t.controlSidebar._fix(e(".control-sidebar-bg")),e("body").hasClass("fixed")&&"fixed"==n&&(t.pushMenu.expandOnHover(),t.layout.activate()),t.controlSidebar._fix(e(".control-sidebar-bg")),t.controlSidebar._fix(e(".control-sidebar"))}function i(t){return e.each(o,function(t){e("body").removeClass(o[t])}),e("body").addClass(t),a("skin",t),!1}function a(e,t){"undefined"!=typeof Storage?localStorage.setItem(e,t):window.alert("Please use a modern browser to properly view this template!")}function r(e){if("undefined"!=typeof Storage)return localStorage.getItem(e);window.alert("Please use a modern browser to properly view this template!")}var o=["skin-blue","skin-black","skin-red","skin-yellow","skin-purple","skin-green","skin-blue-light","skin-black-light","skin-red-light","skin-yellow-light","skin-purple-light","skin-green-light"],s=e("<div />",{id:"control-sidebar-theme-demo-options-tab",class:"tab-pane active"}),l=e("<li />",{class:"active"}).html("<a href='#control-sidebar-theme-demo-options-tab' data-toggle='tab'><i class='fa fa-wrench'></i></a>");e("[href='#control-sidebar-home-tab']").parent().before(l);var c=e("<div />");c.append("<h4 class='control-sidebar-heading'>Layout Options</h4><div class='form-group'><label class='control-sidebar-subheading'><input type='checkbox' data-layout='fixed' class='pull-right'/> Fixed layout</label><p>Activate the fixed layout. You can't use fixed and boxed layouts together</p></div><div class='form-group'><label class='control-sidebar-subheading'><input type='checkbox' data-layout='layout-boxed'class='pull-right'/> Boxed Layout</label><p>Activate the boxed layout</p></div><div class='form-group'><label class='control-sidebar-subheading'><input type='checkbox' data-layout='sidebar-collapse' class='pull-right'/> Toggle Sidebar</label><p>Toggle the left sidebar's state (open or collapse)</p></div><div class='form-group'><label class='control-sidebar-subheading'><input type='checkbox' data-enable='expandOnHover' class='pull-right'/> Sidebar Expand on Hover</label><p>Let the sidebar mini expand on hover</p></div><div class='form-group'><label class='control-sidebar-subheading'><input type='checkbox' data-controlsidebar='control-sidebar-open' class='pull-right'/> Toggle Right Sidebar Slide</label><p>Toggle between slide over content and push content effects</p></div><div class='form-group'><label class='control-sidebar-subheading'><input type='checkbox' data-sidebarskin='toggle' class='pull-right'/> Toggle Right Sidebar Skin</label><p>Toggle between dark and light skins for the right sidebar</p></div>");var d=e("<ul />",{class:"list-unstyled clearfix"}),h=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-blue' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px; background: #367fa9;'></span><span class='bg-light-blue' style='display:block; width: 80%; float: left; height: 7px;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222d32;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin'>Blue</p>");d.append(h);var u=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-black' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div style='box-shadow: 0 0 2px rgba(0,0,0,0.1)' class='clearfix'><span style='display:block; width: 20%; float: left; height: 7px; background: #fefefe;'></span><span style='display:block; width: 80%; float: left; height: 7px; background: #fefefe;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin'>Black</p>");d.append(u);var f=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-purple' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-purple-active'></span><span class='bg-purple' style='display:block; width: 80%; float: left; height: 7px;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222d32;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin'>Purple</p>");d.append(f);var p=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-green' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-green-active'></span><span class='bg-green' style='display:block; width: 80%; float: left; height: 7px;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222d32;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin'>Green</p>");d.append(p);var m=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-red' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-red-active'></span><span class='bg-red' style='display:block; width: 80%; float: left; height: 7px;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222d32;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin'>Red</p>");d.append(m);var g=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-yellow' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-yellow-active'></span><span class='bg-yellow' style='display:block; width: 80%; float: left; height: 7px;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #222d32;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin'>Yellow</p>");d.append(g);var y=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-blue-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px; background: #367fa9;'></span><span class='bg-light-blue' style='display:block; width: 80%; float: left; height: 7px;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin' style='font-size: 12px'>Blue Light</p>");d.append(y);var v=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-black-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div style='box-shadow: 0 0 2px rgba(0,0,0,0.1)' class='clearfix'><span style='display:block; width: 20%; float: left; height: 7px; background: #fefefe;'></span><span style='display:block; width: 80%; float: left; height: 7px; background: #fefefe;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin' style='font-size: 12px'>Black Light</p>");d.append(v);var b=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-purple-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-purple-active'></span><span class='bg-purple' style='display:block; width: 80%; float: left; height: 7px;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin' style='font-size: 12px'>Purple Light</p>");d.append(b);var w=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-green-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-green-active'></span><span class='bg-green' style='display:block; width: 80%; float: left; height: 7px;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin' style='font-size: 12px'>Green Light</p>");d.append(w);var C=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-red-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-red-active'></span><span class='bg-red' style='display:block; width: 80%; float: left; height: 7px;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin' style='font-size: 12px'>Red Light</p>");d.append(C);var x=e("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append("<a href='javascript:void(0);' data-skin='skin-yellow-light' style='display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)' class='clearfix full-opacity-hover'><div><span style='display:block; width: 20%; float: left; height: 7px;' class='bg-yellow-active'></span><span class='bg-yellow' style='display:block; width: 80%; float: left; height: 7px;'></span></div><div><span style='display:block; width: 20%; float: left; height: 20px; background: #f9fafc;'></span><span style='display:block; width: 80%; float: left; height: 20px; background: #f4f5f7;'></span></div></a><p class='text-center no-margin' style='font-size: 12px;'>Yellow Light</p>");d.append(x),c.append("<h4 class='control-sidebar-heading'>Skins</h4>"),c.append(d),s.append(c),e("#control-sidebar-home-tab").after(s),function(){var a=r("skin");a&&e.inArray(a,o)&&i(a),e("[data-skin]").on("click",function(t){e(this).hasClass("knob")||(t.preventDefault(),i(e(this).data("skin")))}),e("[data-layout]").on("click",function(){n(e(this).data("layout"))}),e("[data-controlsidebar]").on("click",function(){n(e(this).data("controlsidebar"));var i=!t.options.controlSidebarOptions.slide;t.options.controlSidebarOptions.slide=i,i||e(".control-sidebar").removeClass("control-sidebar-open")}),e("[data-sidebarskin='toggle']").on("click",function(){var t=e(".control-sidebar");t.hasClass("control-sidebar-dark")?(t.removeClass("control-sidebar-dark"),t.addClass("control-sidebar-light")):(t.removeClass("control-sidebar-light"),t.addClass("control-sidebar-dark"))}),e("[data-enable='expandOnHover']").on("click",function(){e(this).attr("disabled",!0),t.pushMenu.expandOnHover(),e("body").hasClass("sidebar-collapse")||e("[data-layout='sidebar-collapse']").click()}),e("body").hasClass("fixed")&&e("[data-layout='fixed']").attr("checked","checked"),e("body").hasClass("layout-boxed")&&e("[data-layout='layout-boxed']").attr("checked","checked"),e("body").hasClass("sidebar-collapse")&&e("[data-layout='sidebar-collapse']").attr("checked","checked")}()}(jQuery,$.AdminLTE),$(function(){$(".select2").select2(),$("#datemask").inputmask("dd/mm/yyyy",{placeholder:"dd/mm/yyyy"}),$("#datemask2").inputmask("mm/dd/yyyy",{placeholder:"mm/dd/yyyy"}),$("[data-mask]").inputmask(),$("#reservation").daterangepicker(),$("#reservationtime").daterangepicker({timePicker:!0,timePickerIncrement:30,format:"MM/DD/YYYY h:mm A"}),$("#daterange-btn").daterangepicker({ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},startDate:moment().subtract(29,"days"),endDate:moment()},function(e,t){$("#daterange-btn span").html(e.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))}),$("#datepicker").datepicker({autoclose:!0}),$('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"}),$('input[type="checkbox"].minimal-red, input[type="radio"].minimal-red').iCheck({checkboxClass:"icheckbox_minimal-red",radioClass:"iradio_minimal-red"}),$('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"}),$(".my-colorpicker1").colorpicker(),$(".my-colorpicker2").colorpicker(),$(".timepicker").timepicker({showInputs:!1}),$(".textarea").wysihtml5(),$(function(){$(".data-table").DataTable({rowReorder:{selector:"td:nth-child(2)"},paging:!0,lengthChange:!1,searching:!1,ordering:!0,info:!0,autoWidth:!1,responsive:!0})})});